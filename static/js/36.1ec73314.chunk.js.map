{"version":3,"sources":["components/NumericalInput/index.tsx","../node_modules/react-i18next/dist/es/withTranslation.js","pages/Borrow/Provider/index.js","pages/Borrow/GlobalOverall/index.js","services/aave/gql.js","hooks/useTokenToBalance.js","components/hoc/withBalance.js","components/BorrowInputPanel/index.js","pages/Borrow/LendingBalance/LendingModalContainer.js","pages/Borrow/LendingBalance/index.js","pages/Borrow/BorrowBalance/BorrowTokenModal.js","pages/Borrow/BorrowBalance/RepayTokenModal.js","pages/Borrow/BorrowBalance/index.js","pages/Borrow/Common/index.js","pages/Borrow/ModalProvider/index.js","pages/Borrow/ModalProvider/modals/UnlockToken.js","pages/Borrow/ModalProvider/modals/WrapEth.js","pages/Borrow/ModalProvider/modals/LendingToken.js","state/defi/actions.js","pages/Borrow/ModalProvider/modals/BorrowToken.js","pages/Borrow/index.js"],"names":["StyledInput","styled","input","error","theme","red1","text1","bg3","align","size","reverse","noBorder","modalBG","text3","inputRegex","RegExp","Input","React","memo","value","onUserInput","placeholder","rest","onChange","event","nextUserInput","target","replace","test","escapeRegExp","inputMode","title","autoComplete","autoCorrect","type","pattern","minLength","maxLength","spellCheck","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","withTranslation","ns","options","undefined","WrappedComponent","I18nextWithTranslation","_ref","forwardedRef","_objectWithoutProperties","_useTranslation","useTranslation","_useTranslation2","_slicedToArray","t","i18n","ready","passDownProps","tReady","withRef","ref","createElement","displayName","concat","getDisplayName","forwardRef","props","assign","GraphQlProvider","client","getAaveGraphClient","children","StyledCard","Card","Text","span","variant","GlobalOverall","account","useActiveWeb3React","isNative","useSelector","getAaveCurrency","dispatch","useDispatch","userAccountData","getAaveUserAccountData","ethUsd","getEthInUsd","fetchAaveGlobal","a","getAaveOverall","userAcc","setAaveUserAccountData","useEffect","loadingLendingPoolData","useInterval","formatETHField","field","dividedBy","toFixed","multipliedBy","totalLiquidity","totalCollateralETH","totalBorrowsETH","availableBorrowsETH","currentLiquidationThreshold","ltv","healthFactor","gt","BigNumber","columns","dataField","text","formatter","cellContent","row","rowIndex","wrapperClasses","bordered","classes","bootstrap4","keyField","remote","data","ResponsiveTable","breakpoint","direction","withoutBorder","GET_AAVE_RESERVES","gql","useSpotBalances","library","baseToken","getBaseToken","quoteToken","getQuoteToken","knownTokens","useMemo","getKnownTokens","tokens","getTokens","wethToken","getWethToken","allBalances","address","useState","balances","setBalances","fetchBalances","tokensToTokenBalances","res","useTokenToBalance","window","ethereum","ethBalance","useETHBalances","wethBalance","find","b","token","symbol","tokensBalance","ethereumBalance","ETH","toExact","bn","currency","balance","totalEthBalance","total","plus","baseTokenBalance","searchToken","tokenBalances","wethTokenBalance","tokenToFind","quoteTokenBalance","withBalance","Component","InputRow","div","flexRowNoWrap","Container","Label","InputContainer","LabelRow","Aligner","InputPanel","flexColumnNoWrap","StyledTokenName","CurrencySelect","button","bg1","BalanceRow","BorrowInputPanel","state","valueStr","tokenAmountInUnits","decimals","valueFixedDecimals","_updateValue","newValue","unitsInTokenAmount","min","isLessThan","setState","this","label","disable","selected","hideInput","id","showBalance","balanceText","Token","name","style","padding","borderRadius","className","CurrencyLogo","active","Boolean","slice","toUpperCase","NumericalInput","getDerivedStateFromProps","eq","Title","h4","SummaryRow","CustomTypeBlack","TYPE","Black","StyledButton","LendingModalContainer","amount","btnMsg","cardMsg","componentDidMount","TX_DEFAULTS_TRANSFER","gasTransferToken","toast","submit","tokenBalance","isEth","aToken","isLending","onSubmit","_reset","_closeModal","setMax","maxBalance","updateAmount","coinSymbol","displayDecimals","context","closeModal","show","liquidityRate","tokenSymbolToDisplayString","btnPrefix","balanceInUnits","btnText","isSubmitAllowed","isGreaterThan","onHide","centered","Body","Row","Col","xs","max","pow","toString","marginBottom","fontWeight","color","disabled","onClick","contextType","ThemeContext","LogoContainer","Symbol","Name","CellText","isEthState","setIsEthState","isHideZeroBalance","isStableCoin","isModalOpenState","setIsModalOpenState","isSubmittingState","setIsSubmittingState","aTokenDataState","setATokenDataState","isLendingState","setIsLendingState","tokenBalanceState","setTokenBalanceState","order","sort","setSort","aTokensData","getATokensData","tokensPrice","getTokensPrice","ethTotalBalance","currencySelector","getAaveLoadingState","tokensRow","map","tokenD","isEthToken","isWethToken","tb","isEqualTo","displayBalance","displayDepositBalance","tokB","formattedLendBalance","formattedBalance","tokenPrice","c_id","Number","price_usd","toNumber","apy","tokenName","tokenSymbol","sortedData","handleSubmit","startLendingTokenSteps","Protocol","Aave","startUnLendingTokenSteps","wethPlusEthBalance","openLendingModal","openUnLendingModal","bind","isAction","formatExtraData","onTableChange","sortField","sortOrder","isSubmitting","BorrowTokenModal","availableForBorrow","setError","setAmount","useTheme","variableBorrowRate","RepayTokenModal","borrowedBalance","setIsNotEnoughBalance","isLessThanOrEqualTo","balanceInShort","minus","balanceBorrowedInUnits","amountSubmit","isModalBorrowOpenState","setIsModalBorrowOpenState","isModalRepayOpenState","setIsModalRepayOpenState","isBorrowState","setIsBorrowState","availableForBorrowState","setAvailableForBorrowState","borrowBalanceState","setBorrowBalanceState","reserves","getAaveReservesGQLResponse","borrowBalance","reserve","r","displayAvailableForBorrowBalance","displayBorrowedBalance","availableBalanceForBorrowToken","priceInEth","price","totalAvailableForBorrowETH","integerValue","ROUND_DOWN","formattedBorrowedBalance","formattedAvailableForBorrowBalance","closeBorrowModal","closeRepayModal","startBorrowTokenSteps","startRepayTokenSteps","openBorrowModal","openRepayModal","modals","web3","web3Wrapper","HeaderCol","CustomNav","Nav","CustomNavItem","Item","CustomNavLink","Link","primary","primaryLight","BorrowCommon","useQuery","pollInterval","loading","aaveLoadingState","setAaveReservesGQLResponse","AaveLoadingState","NotLoaded","initAave","fetchAave","Tab","defaultActiveKey","fill","eventKey","Content","Pane","UnlockToken","unlocking","setUnlocking","currentStep","getStepsModalCurrentStep","unlockToken","getContractWrappers","getProvider","contractWrappers","approveAddress","contractAddresses","erc20Proxy","erc20Token","ERC20TokenContract","UNLIMITED_ALLOWANCE_IN_BASE_UNITS","approve","sendTransactionAsync","from","tx","awaitTransactionSuccessAsync","stepsModalAdvanceStep","onDismiss","pendingText","wrapping","setWrapping","currentWethBalance","newWethBalance","convertingFrom","wrapEthereum","updateWethBalance","convertTxHash","connect","step","gasInfo","getGasInfo","onSubmitLendingToken","defiToken","getState","protocol","getDefiProtocol","txHash","lendingAToken","lendingDefiToken","onSubmitUnLendingToken","unLendingAToken","unLendingDefiToken","setLoading","amountOfTokenString","Lending","onDone","onSubmitBorrowToken","borrowAToken","borrowDefiToken","onSubmitRepayToken","repayAToken","repayDefiToken","isBorrow","Borrowing","ModalProvider","submitted","setSubmitted","setTxHash","isOpen","Web3","givenProvider","providers","HttpProvider","process","currentProvider","Web3Wrapper","hideModal","setStepsModalCurrentStep","chainId","CHAIN_ID","hash","kind","StepKind","ToggleTokenLock","WrapEth","LendingToken","UnLendingToken","RepayToken","BorrowToken","StyledRow","Borrow","Page"],"mappings":"8qCAIA,IAAMA,EAAcC,UAAOC,MAAV,KAQP,gBAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,MAAV,OAAuBD,EAAQC,EAAMC,KAAOD,EAAME,SAQvC,qBAAGF,MAAkBG,OAE3B,gBAAGC,EAAH,EAAGA,MAAH,OAAeA,GAASA,KAI5B,kBAAwB,OAAxB,EAAGC,KAA4B,OAAS,UACpB,qBAAGC,QAAyB,IAAH,cAC5B,qBAAGA,QAAyB,IAAH,cACvB,qBAAGA,QAAyB,WAAH,OAC5B,qBAAGA,QAAyB,WAAH,OAEnC,gBAAGC,EAAH,EAAGA,SAAH,SAAaD,QAAyB,WAAaC,EAAW,WAAH,YAE5D,gBAAGP,EAAH,EAAGA,MAAH,SAAUO,SAA2B,OAAH,oBAAyBP,EAAMQ,YAoBtE,qBAAGR,MAAkBS,SAI1BC,EAAaC,OAAO,0BAEbC,EAAQC,IAAMC,MAAK,YAayC,IAZxEC,EAYuE,EAZvEA,MACAC,EAWuE,EAXvEA,YACAC,EAUuE,EAVvEA,YACAZ,EASuE,EATvEA,KACGa,EAQoE,4DAOvE,OACC,cAACtB,EAAD,2BACKsB,GADL,IAECH,MAAOA,EACPI,SAAU,SAACC,GAVI,IAACC,GACK,MADLA,EAYND,EAAME,OAAOP,MAAMQ,QAAQ,KAAM,OAXhBb,EAAWc,KAAKC,YAAaJ,MACxDL,EAAYK,IAaZK,UAAU,UACVC,MAAM,eACNC,aAAa,MACbC,YAAY,MACZxB,KAAMA,EAENyB,KAAK,OACLC,QAAQ,sBACRd,YAAaA,GAAe,MAC5Be,UAAW,EACXC,UAAW,GACXC,WAAW,e,kCCpGd,+HAIA,SAASC,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAgBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAgBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAE9U,SAASU,EAAc1B,GAAU,IAAK,IAAI2B,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKd,EAAQI,OAAOa,IAAS,GAAMC,SAAQ,SAAUC,GAAOC,IAAgBjC,EAAQgC,EAAKF,EAAOE,OAAsBf,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBnC,EAAQiB,OAAOiB,0BAA0BJ,IAAmBjB,EAAQI,OAAOa,IAASC,SAAQ,SAAUC,GAAOf,OAAOmB,eAAepC,EAAQgC,EAAKf,OAAOK,yBAAyBQ,EAAQE,OAAe,OAAOhC,EAKtgB,SAASqC,EAAgBC,GAC9B,IAAIC,EAAUX,UAAUC,OAAS,QAAsBW,IAAjBZ,UAAU,GAAmBA,UAAU,GAAK,GAClF,OAAO,SAAgBa,GACrB,SAASC,EAAuBC,GAC9B,IAAIC,EAAeD,EAAKC,aACpBhD,EAAOiD,IAAyBF,EAAM,CAAC,iBAEvCG,EAAkBC,YAAeT,EAAI1C,GACrCoD,EAAmBC,IAAeH,EAAiB,GACnDI,EAAIF,EAAiB,GACrBG,EAAOH,EAAiB,GACxBI,EAAQJ,EAAiB,GAEzBK,EAAgB3B,EAAcA,EAAc,GAAI9B,GAAO,GAAI,CAC7DsD,EAAGA,EACHC,KAAMA,EACNG,OAAQF,IASV,OANIb,EAAQgB,SAAWX,EACrBS,EAAcG,IAAMZ,GACVL,EAAQgB,SAAWX,IAC7BS,EAAcT,aAAeA,GAGxBrD,IAAMkE,cAAchB,EAAkBY,GAG/CX,EAAuBgB,YAAc,0BAA0BC,OAAOC,YAAenB,GAAmB,KACxGC,EAAuBD,iBAAmBA,EAQ1C,OAAOF,EAAQgB,QAAUhE,IAAMsE,YANd,SAAoBC,EAAON,GAC1C,OAAOjE,IAAMkE,cAAcf,EAAwBzB,OAAO8C,OAAO,GAAID,EAAO,CAC1ElB,aAAcY,QAIsCd,K,+ICxC7CsB,EAJS,SAACF,GACxB,OAAO,cAAC,iBAAD,CAAgBG,OAAQC,cAAxB,SAA+CJ,EAAMK,Y,8jBCW7D,IAAMC,EAAa7F,kBAAO8F,IAAP9F,CAAH,KAgBV+F,EAAO/F,UAAOgG,KAAV,KACA,gBAAG7F,EAAH,EAAGA,MAAO8F,EAAV,EAAUA,QAAV,OAAyBA,EAAU9F,EAAM8F,GAAW9F,EAAME,SA+JrD6F,EA1JO,SAACX,GAAW,IACzBY,EAAYC,cAAZD,QAEFE,EAAgC,WADbC,YAAYC,KAE/BC,EAAWC,cACXC,EAAkBJ,YAAYK,KAC9BC,EAASN,YAAYO,KACnBlC,EAAMH,cAANG,EAEFmC,EAAe,uCAAG,4BAAAC,EAAA,sEACDC,YAAeb,GADd,OACjBc,EADiB,OAEvBT,EAASU,YAAuBD,IAFT,2CAAH,qDAMrBE,qBAAU,YACmB,uCAAG,sBAAAJ,EAAA,0DAC1BZ,EAD0B,gCAEvBW,IAFuB,2CAAH,qDAM5BM,KACE,CAACjB,IAGJkB,YAAW,sBAAC,sBAAAN,EAAA,0DACPZ,EADO,gCAEJW,IAFI,2CAIT,KAEH,IAAMQ,EAAiB,WAAwB,IAAvBC,EAAsB,4DAAdtD,EAC/B,OAAIsD,EACIlB,EAAQ,UACTkB,EAAMC,UAAU,QAAQC,QAAQ,GADvB,QAEZb,EAAM,UACHW,EAAMC,UAAU,QAAQE,aAAad,GAAQa,QAAQ,GADlD,QAEN,QAEI,KAIHE,EAAiBL,EAAeZ,GAAmBA,EAAgBiB,gBACnEC,EAAqBN,EAAeZ,GAAmBA,EAAgBkB,oBACvEC,EAAkBP,EAAeZ,GAAmBA,EAAgBmB,iBACpEC,EAAsBR,EAAeZ,GAAmBA,EAAgBoB,qBACxEC,EACJrB,GAAe,UAAOA,EAAgBqB,4BAA4BN,QAAQ,GAA3D,OAAsE,IACjFO,EAAOtB,GAAe,UAAOA,EAAgBsB,IAAIP,QAAQ,GAAnC,OAA8C,IACtEQ,EAAe,IAGfvB,GAAmBA,EAAgBmB,gBAAgBK,GAAG,KACzDD,EAAevB,GAAmBA,EAAgBuB,aAAaT,UAAU,QAAQC,QAAQ,GACtE,IAAIU,YAAUF,IAGlC,IAAMG,EAAU,CACf,CACCC,UAAW,kBACXC,KAAM3D,EAAE,yBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAId,mBAGpB,CACCU,UAAW,mBACXC,KAAM3D,EAAE,0BACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIb,uBAGpB,CACCS,UAAW,gBACXC,KAAM3D,EAAE,uBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIZ,oBAGpB,CACCQ,UAAW,YACXC,KAAM3D,EAAE,oBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIX,wBAGpB,CACCO,UAAW,wBACXC,KAAM3D,EAAE,+BACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIV,gCAGpB,CACCM,UAAW,MACXC,KAAM,MACNC,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIT,QAGpB,CACCK,UAAW,gBACXC,KAAM3D,EAAE,uBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC3C,EAAD,UAAO0C,EAAIR,kBAKrB,OACC,eAACpC,EAAD,WACC,cAAC,IAAD,CACC8C,eAAe,oBACfC,UAAU,EACVC,QAAQ,4GACRC,YAAU,EACVC,SAAU,KACVC,QAAM,EACNC,KAAM,CACL,CACCtB,iBACAC,qBACAC,kBACAC,sBACAC,8BACAC,MACAC,iBAGFG,QAASA,IAEV,cAACc,EAAA,EAAD,CACCC,WAAY,KACZf,QAASA,EACTa,KAAM,CACL,CACCtB,iBACAC,qBACAC,kBACAC,sBACAC,8BACAC,MACAC,iBAGFmB,UAAW,MACXC,eAAa,Q,gXCpLV,IAAMC,E,MAAoBC,GAAH,K,iECyBjBC,EAAkB,WAAO,IAAD,EACPpD,cAArBD,EAD4B,EAC5BA,QAASsD,EADmB,EACnBA,QAEXC,EAAYpD,YAAYqD,KACxBC,EAAatD,YAAYuD,KAEzBC,EAAcC,mBAAQ,WAC3B,OAAOC,gBACL,IACGC,EAASF,mBAAQ,WACtB,OAAOD,EAAYI,cACjB,IAEGC,EAAYJ,mBAAQ,WACzB,OAAOD,EAAYM,iBACjB,IAKGC,EA1C0B,SAACJ,EAAQK,EAASb,GAAa,IAAD,EAC9Bc,mBAAS,IADqB,mBACvDC,EADuD,KAC7CC,EAD6C,KAGxDC,EAAa,uCAAG,4BAAA3D,EAAA,0DACjBuD,EADiB,gCAEFK,YAAsBV,EAAQK,EAASb,GAFrC,OAEdmB,EAFc,OAGpBH,EAAYG,GAHQ,2CAAH,qDAUnB,OAJAzD,qBAAU,WACTuD,MACE,CAACJ,EAASL,IAENF,mBAAQ,WACd,OAAIS,EAASlH,OAAS,EACdkH,EAEA,KAEN,CAACF,EAASE,EAAUP,IAuBHY,CAHVd,mBAAQ,WACjB,MAAM,GAAN,mBAAWE,GAAX,CAAmBE,MACjB,CAACA,EAAWF,IAC0B9D,EAAS2E,OAAOC,UAAYtB,GAE/DuB,EAAaC,YAAe,CAAC9E,IAE7B+E,EAAcnB,mBAAQ,WAC3B,OAAOM,EAAYc,MAAK,SAACC,GAAD,OAAOA,EAAEC,MAAMC,SAAWnB,EAAUmB,YAC1D,CAACjB,IAEEkB,EAAgBxB,mBAAQ,WAC7B,OAAOM,EAAYxH,QAAO,SAACuI,GAAD,OAAOA,EAAEC,MAAMC,SAAWnB,EAAUmB,YAC5D,CAACjB,IAEEmB,EAAkBzB,mBAAQ,WAC/B,IAAM0B,EAAMT,EAAW7E,GAAW6E,EAAW7E,GAASuF,UAAY,KAC5DC,EAAK,IAAIxD,YAAUsD,EAAG,SAAG,GAAM,KAErC,MAAO,CACNJ,MAAOL,EAAW7E,GAAW6E,EAAW7E,GAASyF,cAAW3H,EAC5D4H,QAASF,KAER,CAACX,IAEEc,EAAkB/B,mBAAQ,WAC/B,GAAImB,GAAeM,EAAiB,CACnC,IAAIO,EAAQb,EAAYW,QAKxB,YAJ8B5H,IAA1BuH,EAAgBH,QACnBU,EAAQP,EAAgBK,QAAQG,KAAKd,EAAYW,UAG3CE,KAIN,CAACP,EAAiBN,IAEfe,EAAmBlC,mBAAQ,WAChC,OAAOmC,YAAY,CAAEC,cAAeZ,EAAea,iBAAkBlB,EAAamB,YAAa3C,MAC7F,CAACA,EAAW6B,EAAeL,IAExBoB,EAAoBvC,mBAAQ,WACjC,OAAOmC,YAAY,CAAEC,cAAeZ,EAAea,iBAAkBlB,EAAamB,YAAazC,MAC7F,CAACA,EAAY2B,EAAeL,IAE/B,OAAOnB,mBAAQ,WACd,MAAO,CACNuC,oBACAL,mBACAH,kBACAd,WAAYQ,EACZN,cACAK,mBAEC,CAACpF,EAASuD,EAAWE,EAAYS,EAAa4B,EAAkBK,KC9FrDC,EAPK,SAACC,GACpB,OAAO,SAACjH,GACP,IAAMiF,EAAWhB,IACjB,OAAO,cAACgD,EAAD,2BAAejH,GAAWiF,M,6nFCInC,IAAMiC,GAAWzM,UAAO0M,IAAV,MACX,qBAAGvM,MAAkBwM,iBAUlBC,GAAY5M,UAAO0M,IAAV,MAUTG,GAAQ7M,UAAOgG,KAAV,MACD,qBAAG7F,MAAkBE,SAWzByM,GAAiB9M,UAAO0M,IAAV,MAQdK,GAAW/M,UAAO0M,IAAV,MACX,qBAAGvM,MAAkBwM,iBAEd,qBAAGxM,MAAkBE,SAMzB2M,GAAUhN,UAAOgG,KAAV,MAUPiH,GAAajN,UAAO0M,IAAV,MACb,qBAAGvM,MAAkB+M,oBAKlBC,GAAkBnN,UAAOgG,KAAV,MAWfoH,GAAiBpN,UAAOqN,OAAV,MAKC,qBAAGlN,MAAkBG,OAChC,qBAAGH,MAAkBE,SAwBT,qBAAGF,MAAkBmN,OAKvCC,GAAavN,UAAO0M,IAAV,MACX,qBAAGvM,MAAkBwM,iBAGd,qBAAGxM,MAAkBE,SAYVmN,G,8MACpBC,MAAQ,CACPC,SAAU,EAAKnI,MAAMrE,MAClByM,YAAmB,EAAKpI,MAAMrE,MAAO,EAAKqE,MAAMqI,SAAU,EAAKrI,MAAMsI,oBACrE,I,EAGJC,aAAe,SAAC5M,GACf,IAAM6M,EAAWC,YAAmB9M,GAAS,IAAK,EAAKqE,MAAMqI,UACxC,EAAKrI,MAAM0I,KAAOF,EAASG,WAAW,EAAK3I,MAAM0I,OAKtE,EAAK1I,MAAMpE,YAAY4M,GACvB,EAAKI,SAAS,CACbT,SAAUxM,M,uDAqBF,IAAD,EAUJkN,KAAK7I,MAVD,IAEP8I,aAFO,MAEC,QAFD,MAGPC,eAHO,SAIPC,EAJO,EAIPA,SAJO,IAKPC,iBALO,SAMPC,EANO,EAMPA,GANO,IAOPC,mBAPO,SAQPC,EARO,EAQPA,YARO,IASPtD,aATO,WASCpH,EATD,EAWAyJ,EAAaU,KAAKX,MAAlBC,SAEF9B,EAAWP,EAAQ,IAAIuD,IAAM,EAAGvD,EAAMf,QAASe,EAAMuC,SAAUvC,EAAMC,OAAQD,EAAMwD,WAAQ5K,EAEjG,OACC,cAACgJ,GAAD,CAAYwB,GAAIA,EAAhB,SACC,eAAC7B,GAAD,YACG4B,GACD,cAACzB,GAAD,UACC,cAAC,KAAD,UACC,cAACF,GAAD,UAAQwB,QAIX,eAAC5B,GAAD,CAAUqC,MAAON,EAAY,CAAEO,QAAS,IAAKC,aAAc,WAAc,GAAIT,SAAUD,EAAvF,UACC,cAAClB,GAAD,CAAgBmB,WAAYA,EAAUU,UAAU,8BAAhD,SACC,eAACjC,GAAD,WACE3B,GAAS,cAAC6D,EAAA,EAAD,CAActD,SAAUA,EAAUpL,KAAM,SAClD,cAAC2M,GAAD,CAAiB8B,UAAU,yBAAyBE,OAAQC,QAAQb,GAApE,UACGA,IAAoB,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUjL,QAAS,KAEtB,OAARiL,QAAQ,IAARA,OAAA,EAAAA,EAAUc,MAAM,EAAG,IACnB,OADA,OAEAd,QAFA,IAEAA,OAFA,EAEAA,EAAUc,OAAc,OAARd,QAAQ,IAARA,OAAA,EAAAA,EAAUjL,QAAS,EAAnC,OAAsCiL,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAUjL,UAC9CgM,cACFf,EAASe,gBANX,iBAWFd,GACD,cAAC1B,GAAD,UACC,cAACyC,GAAA,EAAD,CACCN,UAAU,2BACV/N,MAAOwM,EACPvM,YAAaiN,KAAKN,oBAKrBS,GAAYG,GAAe,cAACnB,GAAD,UAAaoB,e,GAxFA3N,IAAMwL,WAA/BgB,GAoBbgC,yBAA2B,SAACjK,EAAOkI,GAAW,IAC5CG,EAAwCrI,EAAxCqI,SAAU1M,EAA8BqE,EAA9BrE,MAAO2M,EAAuBtI,EAAvBsI,mBACjBH,EAAaD,EAAbC,SAER,OAAKxM,EAIMA,IAAU8M,YAAmBN,GAAY,IAAKE,GAAU6B,GAAGvO,GAC9D,CACNwM,SAAUC,YAAmBzM,EAAO0M,EAAUC,IAGxC,KARA,CACNH,SAAU,K,4uBCnJd,IAAMgC,GAAQ1P,UAAO2P,GAAV,MAOEC,GAAa5P,UAAO0M,IAAV,MAKK,qBAAGvM,MAAkBS,SAK3CiP,GAAkB7P,kBAAO8P,KAAKC,MAAZ/P,CAAH,MAQfgQ,GAAehQ,UAAOqN,OAAV,MAMZ4C,G,8MAELxC,MAAQ,CACPyC,OAAQ,KACRhQ,MAAO,CACNiQ,OAAQ,KACRC,QAAS,O,EAIXC,kBAAoB,WAAO,IAAD,EACC,EAAK9K,MAAvByF,EADiB,EACjBA,WAAYrG,EADK,EACLA,EAChBqG,EAAWkD,WAAWoC,MAAqBC,oBAC9CC,KAAMtQ,MAAMyE,EAAE,wBACd,EAAKwJ,SAAS,CACbjO,MAAO,CACNiQ,OAAQ,QACRC,QAASzL,EAAE,4B,EAwHf8L,O,sBAAS,0CAAA1J,EAAA,2DACsD,EAAKxB,MAA3DmL,EADA,EACAA,aAAcC,EADd,EACcA,MAAOxG,EADrB,EACqBA,UAAWyG,EADhC,EACgCA,OAAQC,EADxC,EACwCA,WAE5CF,EAHI,gBAIPtF,EAAK,2BACDlB,GADC,IAEJmB,OAAQ,QANF,2BAQGoF,EARH,gBASPrF,EAAQqF,EAAarF,MATd,gDAWA,MAXA,QAaF6E,EAAS,EAAKzC,MAAMyC,QAAU,IAAI/H,YAAU,GAClD,EAAK5C,MAAMuL,SAASZ,EAAQ7E,EAAOuF,EAAQD,EAAOE,GAd1C,4C,EAiBTE,OAAS,WACR,EAAK5C,SAAS,CACb+B,OAAQ,Q,EAIVc,YAAc,WACb,EAAKD,U,EAGNE,OAAS,WAAO,IAAD,EACiD,EAAK1L,MAA5DmL,EADM,EACNA,aAAcC,EADR,EACQA,MAAO3F,EADf,EACeA,WAAY6F,EAD3B,EAC2BA,UAAWD,EADtC,EACsCA,OACpD,GAAID,EAAO,CACV,IAAMO,EAAaL,EAAY7F,EAAa4F,EAAO/E,SAAW,IAAI1D,YAAU,GAC5E,EAAKgG,SAAS,CACb+B,OAAQgB,SAECR,GACV,EAAKvC,SAAS,CACb+B,OAAQW,EAAYH,EAAa7E,QAAU+E,EAAO/E,SAAW,IAAI1D,YAAU,M,EAK9EgJ,aAAe,SAACpD,GACf,EAAKI,SAAS,CACb+B,OAAQnC,K,uDA5JT,IAeIqD,EACAF,EACAtD,EACAyD,EAlBElR,EAAQiO,KAAKkD,QADX,EAaJlD,KAAK7I,MAVRmL,EAHO,EAGPA,aACAa,EAJO,EAIPA,WACAvG,EALO,EAKPA,WACA2F,EANO,EAMPA,MACAxG,EAPO,EAOPA,UACAyG,EARO,EAQPA,OACAC,EATO,EASPA,UACAW,EAVO,EAUPA,KACA7M,EAXO,EAWPA,EAXO,iHAckByJ,KAAKX,OAAvBvN,EAdA,EAcAA,MAAOgQ,EAdP,EAcOA,OACPuB,EAAkBb,EAAlBa,cAMR,GAAId,EACHU,EAAkBlH,EAAUkH,gBAC5BzD,EAAW,GACXsD,EAAaL,EAAY7F,EAAa4F,EAAO/E,SAAW,IAAI1D,YAAU,GACtEiJ,EAAaM,YAA2B,WAClC,KAAIhB,EAOV,OAAO,KAPkB,IACjBrF,EAAmBqF,EAAnBrF,MAAOQ,EAAY6E,EAAZ7E,QACfwF,EAAkBhG,EAAMgG,gBACxBzD,EAAWvC,EAAMuC,SACjBsD,EAAaL,EAAYhF,EAAU+E,EAAO/E,SAAW,IAAI1D,YAAU,GACnEiJ,EAAaM,YAA2BrG,EAAMC,QA/BvC,IAoCAD,EAAUqF,EAAVrF,MACFsG,EAAYd,EAAY,WAAa,YACrCe,EAAiBjE,YAAmBuD,EAAYtD,EAAUyD,GAC1DQ,EAAU3R,GAASA,EAAMiQ,OAAS,QAAUwB,EAAYP,EACxDU,EAA6B,OAAX5B,GAAoBA,GAAUA,EAAO6B,cAAcb,GAE3E,OACC,cAAC,KAAD,CAAOM,KAAMA,EAAMQ,OAAQT,EAAYU,UAAQ,EAA/C,SACC,cAAC,KAAMC,KAAP,CAAYpD,MAAO,CAAEC,QAAS,IAA9B,SACC,eAACoD,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,eAAC3C,GAAD,WACc/K,EAAZkM,EAAc,UAAe,YAD/B,IAC6CO,OAG9C,cAACgB,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,cAAC,GAAD,CACCzE,SAAUA,EACVK,IAAK,EACLqE,IAAKpB,EACL/P,YAAaiN,KAAK+C,aAClBjQ,MAAOgP,EACP7E,MAAOA,EACPkD,SAAU6C,EACV1C,aAAa,EACbL,MAAmB1J,EAAZkM,EAAc,gBAAqB,kBAC1CzP,YAAa,IAAI+G,YAAU,GAAGuE,IAAI,IAAIvE,YAAU,IAAIoK,IAAIlB,IAAkBmB,WAC1E3E,mBAAoBwD,MAGtB,cAACe,EAAA,EAAD,CAAKC,GAAI,GAAIvD,MAAO,CAAE2D,aAAc,IAApC,SACC,eAAC,KAAD,WACC,eAAC7C,GAAD,WACC,cAAC,KAAD,UACC,cAACC,GAAD,CAAiB6C,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,mBAGL,cAAC,KAAD,UACC,eAACkL,GAAD,CAAiB8C,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,UACEjB,EAAc/E,IAAI,QAAQhF,aAAa,KAAKD,QAAQ,GADtD,aAKF,eAACmI,GAAD,WACC,cAAC,KAAD,UACC,cAACC,GAAD,CAAiB6C,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,cAGL,cAAC,KAAD,UACC,cAACkL,GAAD,CAAiB8C,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,SACEd,cAMN,cAACQ,EAAA,EAAD,CACCC,GAAI,GACJpD,UACC,sFAHF,SAMC,cAACe,GAAD,CACCf,UAAS,kBAAa4B,EAAY,UAAY,WAC9C+B,SAAUd,EACVe,QAASzE,KAAKqC,OAHf,SAKEoB,iB,GAhI2B7Q,IAAMwL,WAApCyD,GACE6C,YAAcC,eAwLPjP,sBAAkBmM,I,+6BCjNjC,IAAM+C,GAAgBhT,UAAO0M,IAAV,MAIE,qBAAGvM,MAAkBE,SASpC4S,GAASjT,UAAOgG,KAAV,MACF,qBAAG7F,MAAkBE,SAMzB6S,GAAOlT,UAAOgG,KAAV,MAEA,qBAAG7F,MAAkBE,SASzB8S,GAAWnT,UAAOgG,KAAV,MAGJ,qBAAG7F,MAAkBE,SAkUhBkM,MAnTQ,SAAChH,GAAW,IAAD,EACGgF,oBAAS,GADZ,mBAC1B6I,EAD0B,KACdC,EADc,OAEiB9I,oBAAS,GAF1B,mBAE1B+I,EAF0B,aAGO/I,oBAAS,IAHhB,mBAG1BgJ,EAH0B,aAIehJ,oBAAS,IAJxB,mBAI1BiJ,EAJ0B,KAIRC,EAJQ,OAKiBlJ,oBAAS,GAL1B,mBAK1BmJ,EAL0B,KAKPC,EALO,OAMapJ,qBANb,mBAM1BqJ,EAN0B,KAMTC,EANS,OAOWtJ,oBAAS,GAPpB,mBAO1BuJ,EAP0B,KAOVC,EAPU,OAQiBxJ,qBARjB,mBAQ1ByJ,EAR0B,KAQPC,EARO,OAST1J,mBAAS,CAChChD,OAAO,EACP2M,MAAO,SAXyB,mBAS1BC,EAT0B,KASpBC,GAToB,KAazBzP,GAAMH,cAANG,EAEAwB,GAAYC,cAAZD,QACFK,GAAWC,cACX4N,GAAc/N,YAAYgO,KAC1BC,GAAcjO,YAAYkO,KAC1BrI,GAAgB5G,EAAMgG,cACtBP,GAAazF,EAAMyF,WACnByJ,GAAkBlP,EAAMuG,gBACxBM,GAAmB7G,EAAM2F,YAEzBwJ,IADmBpO,YAAYqO,KACZrO,YAAYC,MA2C/BqO,GAAY7K,mBAAQ,WACzB,IAAMd,EAAOoL,GAAYQ,KAAI,SAACC,GAAY,IACjCzJ,EAAmByJ,EAAnBzJ,MAAOQ,EAAYiJ,EAAZjJ,QAEPP,EAAWD,EAAXC,OACFyJ,EAAaC,YAAY3J,GACzBqF,EAAevE,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,MAAMC,SAAWA,KACpE,GAAIgI,EAAmB,CACtB,GAAIyB,GAAcN,GAAgBS,UAAU,IAAMrJ,GAAWA,EAAQqJ,UAAU,GAC9E,OAAO,KAGR,GAAIxE,GAAgBA,EAAa7E,QAAQqJ,UAAU,IAAMrJ,GAAWA,EAAQqJ,UAAU,GACrF,OAAO,KAGT,GAAI3B,IACElI,EAAMkI,aACV,OAAO,KAIT,IAGI4B,EACAC,EAJEC,EAAON,EACVN,IAAmB,IAAItM,YAAU,GAChCuI,GAAgBA,EAAa7E,SAAY,IAAI1D,YAAU,GAI3D,GAAIhC,IAAW0F,EAAS,CACvB,IAAMyJ,EAAuB3H,YAAmB9B,EAASR,EAAMuC,SAAUvC,EAAMgG,iBACzEkE,EAAmB5H,YAAmB0H,EAAMhK,EAAMuC,SAAUvC,EAAMgG,iBAClEmE,EAAajB,IAAeA,GAAYpJ,MAAK,SAACxG,GAAD,OAAOA,EAAE8Q,OAASpK,EAAMoK,QAClD,WAArBf,IACHS,EAAiBO,OAAOH,GACxBH,EAAwBM,OAAOJ,KAE/BH,EAAiBK,EACdA,EAAWG,UAAUjO,aAAa,IAAIS,YAAUoN,IAAmBK,WACnE,IACHR,EAAwBI,EACrBA,EAAWG,UAAUjO,aAAa,IAAIS,YAAUmN,IAAuBM,WACvE,UAGJT,EAAiB,IACjBC,EAAwB,IAGzB,IAAMS,EAAMf,EAAOrD,cAAcjK,UAAU,QAAQE,aAAa,KAAKkO,WAE/DE,EAAYf,EAAa,WAAa1J,EAAMwD,KAC5CkH,EAAchB,EAAa,MAAQ1J,EAAMC,OAAOgE,cAEtD,MAAO,CACNjE,QACAC,SACAyK,cACAD,YACAX,iBACAC,wBACAS,MACAhK,UACAwJ,OACAN,aACAD,aAIF,OAAOkB,aAAW/M,EAAMkL,KACtB,CAACE,GAAaF,IAEX5C,GAAa,WAClBkC,GAAoB,IAGfwC,GAAY,uCAAG,WAAO/F,EAAQ7E,EAAOuF,EAAQD,EAAOE,GAArC,SAAA9J,EAAA,yDACpB4M,GAAqB,GADD,UAIf9C,EAJe,gCAKZrK,GACL0P,YACChG,EACA7E,EACAuF,EACAD,EACAwF,IAASC,KACTpL,GACAoB,GACAqI,KAdgB,6CAkBZjO,GAAS6P,YAAyBnG,EAAQ7E,EAAOuF,EAAQD,IAlB7C,uBAqBnBgD,GAAqB,GACrBpC,KAtBmB,yEAAH,8DA0BZpH,GAAYH,cAAiBI,eAQ7BkM,GAAqBlK,GAAmBA,GAAiBP,QAAQG,KAAKhB,IAAc,IAAI7C,YAAU,GAWlGC,GAAU,CACf,CACCC,UAAW,YACXC,KAAM3D,GAAE,SACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,IAAMkD,EAAW,IAAIgD,IAAM,EAAGnG,EAAI4C,MAAMf,QAAS7B,EAAI4C,MAAMuC,SAAUnF,EAAI4C,MAAMC,OAAQ7C,EAAI4C,MAAMwD,MACjG,OACC,sBAECI,UAAU,8FAFX,UAIC,cAAC+D,GAAD,UACC,cAAC9D,EAAA,EAAD,CAActD,SAAUA,MAEzB,sBAAKqD,UAAU,iEAAf,UACC,cAACgE,GAAD,UAASxK,EAAIsN,cACb,cAAC7C,GAAD,UAAOzK,EAAIqN,iBARPpN,IAaRyL,MAAM,GAEP,CACC9L,UAAW,iBACXC,KAAM3D,GAAE,kBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAACyK,GAAD,UAAyC,kBAAvB1K,EAAI0M,eAAX,UAA4C1M,EAAI0M,eAAhD,YAAkE1M,EAAIsN,aAAgBtN,EAAI0M,kBAE7GhB,MAAM,GAEP,CACC9L,UAAW,wBACXC,KAAM3D,GAAE,yBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAACyK,GAAD,UAAgD,kBAA9B1K,EAAI2M,sBAAX,UAAmD3M,EAAI2M,sBAAvD,YAAgF3M,EAAIsN,aAAgBtN,EAAI2M,yBAE3HjB,MAAM,GAEP,CACC9L,UAAW,MACXC,KAAM,MACNC,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,eAACyK,GAAD,WAAW1K,EAAIoN,IAAIpO,QAAQ,GAA3B,SAER0M,MAAM,GAEP,CACC9L,UAAW,UACXC,KAAM3D,GAAE,iBACR4D,UAAW,SAACC,EAAaC,EAAKC,EAAnB,GAA2E,IAA5C6N,EAA2C,EAA3CA,iBAAkBC,EAAyB,EAAzBA,mBACnD3K,EAA6CpD,EAA7CoD,QAASwJ,EAAoC5M,EAApC4M,KAAMP,EAA8BrM,EAA9BqM,OAAQC,EAAsBtM,EAAtBsM,WAAY1J,EAAU5C,EAAV4C,MAC3C,OACC,sBACC4D,UACC,iIAFF,UAKC,cAAC,aAAD,UACC,cAAC,cAAD,CACC4D,QAAS0D,EAAiBE,KAAK,GAAM3B,EAAQC,EAAYM,EAAMhK,GAC/DuH,SAAUyC,EAAKH,UAAU,GAF1B,SAIEvQ,GAAE,eAIL,cAAC,aAAD,UACC,cAAC,cAAD,CACCsB,QAAS,UACT4M,QAAS2D,EAAmBC,KAAK,GAAM3B,EAAQC,EAAYM,EAAMhK,GACjEuH,SAAU/G,GAAWA,EAAQqJ,UAAU,GAHxC,SAKEvQ,GAAE,oBAMR+R,UAAU,EACVC,gBAAiB,CAChBJ,iBArOsB,WAAc,IAAD,uBAATlV,EAAS,yBAATA,EAAS,oBAC9ByT,EAAmCzT,EADL,GACtB0T,EAA2B1T,EADL,GACVgU,EAAehU,EADL,GACJgK,EAAShK,EADL,GAErCwS,EAAmBiB,GACnBrB,GAAoB,GAChBsB,GACH1B,GAAc,GACdY,EAAqB,2BAAK7H,IAAN,IAAwBP,QAASwJ,OAErDhC,GAAc,GACdY,EAAqB9H,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,QAAUA,OAE9D0I,GAAkB,IA2NhByC,mBAxNwB,WAAc,IAAD,uBAATnV,EAAS,yBAATA,EAAS,oBAChCyT,EAAmCzT,EADH,GACxB0T,EAA2B1T,EADH,GACZgU,EAAehU,EADH,GACNgK,EAAShK,EADH,GAEvCwS,EAAmBiB,GACfC,GACH1B,GAAc,GACdY,EAAqB,2BAAK7H,IAAN,IAAwBP,QAASwJ,OAErDhC,GAAc,GACdY,EAAqB9H,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,QAAUA,OAE9DoI,GAAoB,GACpBM,GAAkB,OAkNnB,OACC,sBAAK9E,UAAU,qBAAf,UACC,cAAC,IAAD,CACCtG,eAAe,qCACfC,UAAU,EACVC,QAAQ,+FACRC,YAAU,EACVE,QAAM,EACND,SAAS,KACTE,KAAM2L,GACNxM,QAASA,GACTwO,cA3GmB,SAAC3U,EAAMqP,GACf,SAATrP,GACHmS,GAAQ,CACP7M,MAAO+J,EAAQuF,UACf3C,MAAO5C,EAAQwF,eAyGhB,cAAC5N,EAAA,EAAD,CAAiBC,WAAY,KAAMf,QAASA,GAASa,KAAM2L,GAAWxL,UAAW,QAEhFoK,GAAoBI,GACpB,cAAC,GAAD,CACCpC,KAAMgC,EACN9C,aAAcsD,EACd+C,aAAcrD,EACd5C,SAAUmF,GACVrF,OAAQgD,EACRrC,WAAYA,GACZvG,WAAYsL,GACZ3F,MAAOyC,EACPjJ,UAAWA,GACX0G,UAAWiD,U,gsBCpWhB,IAAMpE,GAAQ1P,UAAO2P,GAAV,MAOEC,GAAa5P,UAAO0M,IAAV,MAKK,qBAAGvM,MAAkBS,SAK3CiP,GAAkB7P,kBAAO8P,KAAKC,MAAZ/P,CAAH,MAQfgQ,GAAehQ,UAAOqN,OAAV,MA4JH2J,GAtJU,SAACzR,GAAW,IAEnCmL,EASGnL,EATHmL,aACAa,EAQGhM,EARHgM,WACAvG,EAOGzF,EAPHyF,WACA2F,EAMGpL,EANHoL,MACAxG,EAKG5E,EALH4E,UACAyG,EAIGrL,EAJHqL,OACAqG,EAGG1R,EAHH0R,mBACAzF,EAEGjM,EAFHiM,KATkC,eAW/BjM,EAX+B,qGAYTgF,mBAAS,CAClC4F,OAAQ,KACRC,QAAS,QAdyB,mBAY5BlQ,EAZ4B,KAYrBgX,EAZqB,OAgBP3M,mBAAS,IAAIpC,YAAU,IAhBhB,mBAgB5B+H,EAhB4B,KAgBpBiH,EAhBoB,KAiB3BxS,EAAMH,cAANG,EAEFxE,EAAQiX,eAEdjQ,qBAAU,WACL6D,EAAWkD,WAAWoC,MAAqBC,oBAC9CC,KAAMtQ,MAAMyE,EAAE,wBACduS,EAAS,CACR/G,OAAQ,QACRC,QAASzL,EAAE,4BAGX,CAACqG,IA7B+B,IAiC/BoG,EAEAxD,EACAyD,EALIgG,EAAuBzG,EAAvByG,mBACAhM,EAAUqF,EAAVrF,MAEJ6F,EAAa+F,EAIjB,GAAItG,EACHU,EAAkBlH,EAAUkH,gBAC5BzD,EAAW,GACXwD,EAAaM,YAA2B,WAClC,KAAIhB,EAMV,OAAO,KALPW,EAAkBhG,EAAMgG,gBACxBzD,EAAWvC,EAAMuC,SACjBsD,EAAa+F,EACb7F,EAAaM,YAA2BrG,EAAMC,QAK/C,IACMsG,EAAiBjE,YAAmBuD,EAAYtD,EAAUyD,GAC1DQ,EAAU3R,GAASA,EAAMiQ,OAAS,QAFtB,UAE4CiB,EACxDU,EAA6B,OAAX5B,GAAoBA,GAAUA,EAAO6B,cAAcb,GAuB3E,OACC,cAAC,KAAD,CAAOM,KAAMA,EAAMQ,OAAQT,EAAYU,UAAQ,EAA/C,SACC,cAAC,KAAMC,KAAP,CAAYpD,MAAO,CAAEC,QAAS,IAA9B,SACC,eAACoD,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,eAAC,GAAD,WACE1N,EAAE,gBADJ,IACsByM,OAGvB,cAACgB,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,cAAC,GAAD,CACCzE,SAAUA,EACVK,IAAK,EACLqE,IAAKpB,EACL/P,YApCiB,SAAC4M,GACvBoJ,EAAUpJ,IAoCL7M,MAAOgP,EACP7E,MAAOA,EACPkD,SAAU6C,EACV1C,aAAa,EACbL,MAAO1J,EAAE,gBACTvD,YAAa,IAAI+G,YAAU,GAAGuE,IAAI,IAAIvE,YAAU,IAAIoK,IAAIlB,IAAkBmB,WAC1E3E,mBAAoBwD,MAGtB,cAACe,EAAA,EAAD,CAAKC,GAAI,GAAIvD,MAAO,CAAE2D,aAAc,IAApC,SACC,eAAC,KAAD,WACC,eAAC,GAAD,WACC,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBC,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,yBAGL,cAAC,KAAD,UACC,eAAC,GAAD,CAAiBgO,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,UACE2E,EAAmB3K,IAAI,QAAQhF,aAAa,KAAKD,QAAQ,GAD3D,aAKF,eAAC,GAAD,WACC,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBiL,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,wBAGL,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBgO,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,SACEd,cAON,cAACQ,EAAA,EAAD,CACCC,GAAI,GACJpD,UACC,sFAHF,SAMC,cAAC,GAAD,CACCA,UAAS,kBAAa/O,GAASA,EAAMiQ,OAAS,SAAW,WACzDyC,SAAUd,EACVe,QA9EW,WAChB,IAAIxH,EACJ,GAAIsF,EACHtF,EAAK,2BACDlB,GADC,IAEJmB,OAAQ,YAEH,KAAIoF,EAGV,OAAO,KAFPrF,EAAQqF,EAAarF,MAKtB9F,EAAMuL,SAASZ,EAAQ7E,EAAOuF,EAAQD,IA8DlC,SAKEkB,c,srBC3KR,IAAMnC,GAAQ1P,UAAO2P,GAAV,MAOEC,GAAa5P,UAAO0M,IAAV,MAKK,qBAAGvM,MAAkBS,SAK3CiP,GAAkB7P,kBAAO8P,KAAKC,MAAZ/P,CAAH,MAQfgQ,GAAehQ,UAAOqN,OAAV,MAmLHiK,GA7KS,SAAC/R,GAAW,IAqC/B6L,EAnCHV,EASGnL,EATHmL,aACAa,EAQGhM,EARHgM,WACAvG,EAOGzF,EAPHyF,WACA2F,EAMGpL,EANHoL,MACAxG,EAKG5E,EALH4E,UACAyG,EAIGrL,EAJHqL,OACA2G,EAGGhS,EAHHgS,gBACA/F,EAEGjM,EAFHiM,KATiC,eAW9BjM,EAX8B,kGAYRgF,mBAAS,CAClC4F,OAAQ,KACRC,QAAS,QAdwB,mBAY3BlQ,EAZ2B,KAYpBgX,EAZoB,OAgBN3M,mBAAS,MAhBH,mBAgB3B2F,EAhB2B,KAgBnBiH,EAhBmB,OAiBkB5M,oBAAS,GAjB3B,mBAiBPiN,GAjBO,WAmB1B7S,GADS8B,cACHjC,cAANG,GACFxE,EAAQiX,eAEdjQ,qBAAU,WACL6D,EAAWkD,WAAWoC,MAAqBC,oBAC9CC,KAAMtQ,MAAMyE,EAAE,wBACduS,EAAS,CACR/G,OAAQ,QACRC,QAASzL,EAAE,0BAIZ6S,EADG7G,EACmB3F,EAAWyM,oBAAoBF,GAE/B7G,EAAa7E,QAAQ4L,oBAAoBF,MAE9D,CAACvM,EAAY0F,IAGhB,IAEI9C,EACAyD,EACAqG,EAJAxG,EAAa,IAAI/I,YAAU,GAC3B0D,EAAU,IAAI1D,YAAU,GAKpBkD,EAAUqF,EAAVrF,MACR,GAAIsF,EACHU,EAAkBlH,EAAUkH,gBAC5BzD,EAAW,GACXsD,EAAaqG,GAAmB,IAAIpP,YAAU,GAC9CiJ,EAAaM,YAA2B,OACxC7F,EAAUb,EACV0M,EAAiBxG,EAAWyG,MAAM3M,OAC5B,KAAI0F,EAQV,OAAO,KAPPW,EAAkBhG,EAAMgG,gBACxBzD,EAAWvC,EAAMuC,SACjBsD,EAAaqG,GAAmB,IAAIpP,YAAU,GAC9CiJ,EAAaM,YAA2BrG,EAAMC,QAC9CoM,EAAiBxG,EAAWyG,MAAMjH,EAAa7E,SAC/CA,EAAU6E,EAAa7E,QAKxB,IACM+L,EAAyBjK,YAAmBuD,EAAYtD,EAAUyD,GAClEO,EAAiBjE,YAAmB9B,EAAS+B,EAAUyD,GAEvDQ,GADwBlE,YAAmB+J,EAAgB9J,EAAUyD,EAAkB,GAC7EnR,GAASA,EAAMiQ,OAAS,QAJtB,SAI4CiB,GACxDU,EACM,OAAX5B,GAAoBA,GAAUA,EAAO6B,cAAcb,IAAiBhB,GAAUA,EAAOgF,UAAU,GA8BhG,OACC,cAAC,KAAD,CAAO1D,KAAMA,EAAMQ,OAAQT,EAAYU,UAAQ,EAA/C,SACC,cAAC,KAAMC,KAAP,CAAYpD,MAAO,CAAEC,QAAS,IAA9B,SACC,eAACoD,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,eAAC,GAAD,WACE1N,EAAE,SADJ,IACeyM,OAGhB,cAACgB,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,cAAC,GAAD,CACCzE,SAAUA,EACVK,IAAK,EACLqE,IAAKpB,EACL/P,YA3CiB,SAAC4M,GACvBoJ,EAAUpJ,IA2CL7M,MAAOgP,EACP7E,MAAOA,EACPkD,SAAU6C,EACV1C,aAAa,EACbL,MAAO1J,EAAE,eACTvD,YAAa,IAAI+G,YAAU,GAAGuE,IAAI,IAAIvE,YAAU,IAAIoK,IAAIlB,IAAkBmB,WAC1E3E,mBAAoBwD,MAItB,cAACe,EAAA,EAAD,CAAKC,GAAI,GAAIvD,MAAO,CAAE2D,aAAc,IAApC,SACC,eAAC,KAAD,WACC,eAAC,GAAD,WACC,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBC,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,6BAGL,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBgO,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,SACEkF,SAIJ,eAAC,GAAD,WACC,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBlF,WAAY,IAAKC,MAAOxS,EAAME,MAA/C,SACEsE,EAAE,8BAGL,cAAC,KAAD,UACC,cAAC,GAAD,CAAiBgO,MAAOxS,EAAME,MAAOqS,WAAY,IAAjD,SACEd,cAON,cAACQ,EAAA,EAAD,CACCC,GAAI,GACJpD,UACC,sFAHF,SAMC,cAAC,GAAD,CACCA,UAAS,kBAAa/O,GAASA,EAAMiQ,OAAS,SAAW,WACzDyC,SAAUd,EACVe,QA/EW,WAChB,IAAIxH,EACJ,GAAIsF,EACHtF,EAAK,2BACDlB,GADC,IAEJmB,OAAQ,YAEH,KAAIoF,EAGV,OAAO,KAFPrF,EAAQqF,EAAarF,MAItB,IAAMwM,EAAe3H,GAAU,IAAI/H,YAAU,GAC7C5C,EAAMuL,SAAS+G,EAAcxM,EAAOuF,EAAQD,IA+DxC,SAKEkB,c,q6BChLR,IAAMmB,GAAgBhT,UAAO0M,IAAV,MAIE,qBAAGvM,MAAkBE,SASpC4S,GAASjT,UAAOgG,KAAV,MACF,qBAAG7F,MAAkBE,SAMzB6S,GAAOlT,UAAOgG,KAAV,MAGA,qBAAG7F,MAAkBE,SAQzB8S,GAAWnT,UAAOgG,KAAV,MAGJ,qBAAG7F,MAAkBE,SAoZhBkM,MArYO,SAAChH,GAAW,IAAD,EACIgF,oBAAS,GADb,mBACzB6I,EADyB,KACbC,EADa,OAEkB9I,oBAAS,GAF3B,mBAEzB+I,EAFyB,aAGQ/I,oBAAS,IAHjB,mBAGzBgJ,EAHyB,KAIxB5O,GAJwB,KAIlBH,cAANG,GAJwB,EAK4B4F,oBAAS,GALrC,mBAKzBuN,EALyB,KAKDC,EALC,OAM0BxN,oBAAS,GANnC,mBAMzByN,EANyB,KAMFC,EANE,OAOkB1N,oBAAS,GAP3B,mBAOzBmJ,EAPyB,KAONC,EAPM,OAQcpJ,qBARd,mBAQzBqJ,EARyB,KAQRC,EARQ,OASUtJ,oBAAS,GATnB,mBASzB2N,EATyB,KASVC,EATU,OAUkB5N,qBAVlB,mBAUzByJ,GAVyB,KAUNC,GAVM,QAW8B1J,mBAAS,IAAIpC,YAAU,IAXrD,qBAWzBiQ,GAXyB,MAWAC,GAXA,SAYoB9N,mBAAS,IAAIpC,YAAU,IAZ3C,qBAYzBmQ,GAZyB,MAYLC,GAZK,SAaRhO,mBAAS,CAChChD,OAAO,EACP2M,MAAO,SAfwB,qBAazBC,GAbyB,MAanBC,GAbmB,MAkBxBjO,GAAYC,cAAZD,QACFqS,GAAWlS,YAAYmS,KACvB/R,GAAkBJ,YAAYK,KAC9BH,GAAWC,cACX4N,GAAc/N,YAAYgO,KAC1BC,GAAcjO,YAAYkO,KAC1BrI,GAAgB5G,EAAMgG,cACtBP,GAAazF,EAAMyF,WACnByJ,GAAkBlP,EAAMuG,gBACxBM,GAAmB7G,EAAM2F,YAEzBwJ,IADmBpO,YAAYqO,KACZrO,YAAYC,MA6C/BqO,GAAY7K,mBAAQ,WACzB,IAAMd,EAAOoL,GAAYQ,KAAI,SAACC,GAAY,IACjCzJ,EAAkCyJ,EAAlCzJ,MAAOQ,EAA2BiJ,EAA3BjJ,QAAS6M,EAAkB5D,EAAlB4D,cAEhBpN,EAAWD,EAAXC,OACFqN,EAAUH,GAASrN,MAAK,SAACyN,GAAD,OAAOA,EAAEhI,OAAOnC,KAAOqG,EAAOxK,WACtDyK,EAAaC,YAAY3J,GACzBqF,EAAevE,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,MAAMC,SAAWA,KACpE,GAAIgI,GAKCoF,GAAiBA,EAAcxD,UAAU,GAC5C,OAAO,KAGT,GAAI3B,IACElI,EAAMkI,aACV,OAAO,KAIT,IAGIsF,EACAC,EAJEzD,EAAON,EACVN,IAAmB,IAAItM,YAAU,GAChCuI,GAAgBA,EAAa7E,SAAY,IAAI1D,YAAU,GAGvD8O,EAAqB,IAAI9O,YAAU,GACnC4Q,EAAiC,IAAI5Q,YAAU,GAEnD,GAAIhC,IAAWuS,GAAiBC,GAAWjS,GAAiB,CAC3D,IAAMsS,EAAaL,EAAQM,MAAMD,WAC3BE,EAA6BxS,GAAgBoB,oBACnDmP,EAAqBvQ,GAAgBoB,oBACrCiR,EAAiCG,EAC/B1R,UAAU,IAAIW,YAAU6Q,GAAYtM,IAAI,IAAIvE,YAAU,IAAIoK,IAAIlH,EAAMuC,YACpEuL,aAAahR,YAAUiR,YACzB,IAAMC,EAA2B1L,YAChC+K,EACArN,EAAMuC,SACNvC,EAAMgG,iBAEDiI,EAAqC3L,YAC1CoL,EACA1N,EAAMuC,SACNvC,EAAMgG,iBAEDmE,EAAajB,IAAeA,GAAYpJ,MAAK,SAACxG,GAAD,OAAOA,EAAE8Q,OAASpK,EAAMoK,QAClD,WAArBf,IACHmE,EAAmCnD,OAAO4D,GAC1CR,EAAyBpD,OAAO2D,KAEhCR,EAAmCrD,EAChCA,EAAWG,UACVjO,aAAa,IAAIS,YAAUmR,IAC3B1D,WACD,IACHkD,EAAyBtD,EACtBA,EAAWG,UAAUjO,aAAa,IAAIS,YAAUkR,IAA2BzD,WAC3E,UAGJiD,EAAmC,IACnCC,EAAyB,IAG1B,IAAMjD,EAAMf,EAAOuC,mBAAmB7P,UAAU,QAAQE,aAAa,KAAKkO,WAEpEE,EAAYf,EAAa,WAAa1J,EAAMwD,KAC5CkH,EAAchB,EAAa,MAAQ1J,EAAMC,OAAOgE,cAEtD,MAAO,CACNjE,QACAC,SACAyK,cACAD,YACA+C,mCACAE,iCACAD,yBACA7B,qBACAyB,gBACA7C,MACAhK,UACAwJ,OACAN,aACAD,aAIF,OAAOkB,aAAW/M,EAAMkL,MACtB,CAACE,GAAaF,KAGXoF,GAAmB,WACxBxB,GAA0B,IAErByB,GAAkB,WACvBvB,GAAyB,IAGpBhC,GAAY,uCAAG,WAAO/F,EAAQ7E,EAAOuF,EAAQD,GAA9B,SAAA5J,EAAA,yDACpB4M,GAAqB,GADD,UAIfuE,EAJe,gCAKZ1R,GACLiT,YACCvJ,EACA7E,EACAuF,EACAD,EACAwF,IAASC,KACTpL,GACAoB,GACAqI,KAdgB,6CAkBZjO,GACLkT,YACCxJ,EACA7E,EACAuF,EACAD,EACAwF,IAASC,KACTpL,GACAoB,GACAqI,KA3BgB,uBAgCnBd,GAAqB,GACjBuE,EACHqB,KAEAC,KApCkB,yEAAH,4DAwCZrP,GAAYH,cAAiBI,eAQ7BkM,GAAqBlK,GAAmBA,GAAiBP,QAAQG,KAAKhB,IAAc,IAAI7C,YAAU,GAWlGC,GAAU,CACf,CACCC,UAAW,YACXC,KAAM3D,EAAE,SACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,IAAMkD,EAAW,IAAIgD,IAAM,EAAGnG,EAAI4C,MAAMf,QAAS7B,EAAI4C,MAAMuC,SAAUnF,EAAI4C,MAAMC,OAAQ7C,EAAI4C,MAAMwD,MACjG,OACC,sBAECI,UAAU,8FAFX,UAIC,cAAC,GAAD,UACC,cAACC,EAAA,EAAD,CAActD,SAAUA,MAEzB,sBAAKqD,UAAU,iEAAf,UACC,cAAC,GAAD,CAAQA,UAAW,mBAAnB,SAAwCxG,EAAIsN,cAC5C,cAAC,GAAD,CAAM9G,UAAW,mBAAjB,SAAsCxG,EAAIqN,iBARtCpN,IAaRyL,MAAM,GAEP,CACC9L,UAAW,mCACXC,KAAM3D,EAAE,oBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC,GAAD,UAA2D,kBAAzCD,EAAIoQ,iCAAX,UAA8DpQ,EAAIoQ,iCAAlE,YAAsGpQ,EAAIsN,aAAgBtN,EAAIoQ,oCAEjJ1E,MAAM,GAEP,CACC9L,UAAW,yBACXC,KAAM3D,EAAE,wBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,cAAC,GAAD,UAAiD,kBAA/BD,EAAIqQ,uBAAX,UAAoDrQ,EAAIqQ,uBAAxD,YAAkFrQ,EAAIsN,aAAgBtN,EAAIqQ,0BAE7H3E,MAAM,GAEP,CACC9L,UAAW,MACXC,KAAM3D,EAAE,qBACR4D,UAAW,SAACC,EAAaC,EAAKC,GAC7B,OAAO,eAAC,GAAD,WAAWD,EAAIoN,IAAIpO,QAAQ,GAA3B,SAER0M,MAAM,GAEP,CACC9L,UAAW,UACXC,KAAM3D,EAAE,iBACR4D,UAAW,SAACC,EAAaC,EAAKC,EAAnB,GAAsE,IAAvCiR,EAAsC,EAAtCA,gBAAiBC,EAAqB,EAArBA,eAEzDvE,EAOG5M,EAPH4M,KACAP,EAMGrM,EANHqM,OACAC,EAKGtM,EALHsM,WACA1J,EAIG5C,EAJH4C,MACAqN,EAGGjQ,EAHHiQ,cACAK,EAEGtQ,EAFHsQ,+BACA9B,EACGxO,EADHwO,mBAED,OACC,sBACChI,UACC,iIAFF,UAKC,cAAC,aAAD,UACC,cAAC,cAAD,CACC4D,QAAS8G,EAAgBlD,KACxB,GACA3B,EACAC,EACAM,EACAhK,EACA0N,GAEDnG,SAAUqE,EAAmB/B,UAAU,KAAO/O,GAT/C,SAWExB,EAAE,oBAIL,cAAC,aAAD,UACC,cAAC,cAAD,CACCsB,QAAS,UACT4M,QAAS+G,EAAenD,KAAK,GAAM3B,EAAQC,EAAYM,EAAMhK,EAAOqN,GACpE9F,SAAW8F,GAAiBA,EAAcxD,UAAU,KAAQ/O,GAH7D,SAKExB,EAAE,iBAMR+R,UAAU,EACVC,gBAAiB,CAChBgD,gBA9RqB,WAAc,IAAD,uBAATtY,EAAS,yBAATA,EAAS,oBAC7ByT,EAAmEzT,EADtC,GACrB0T,EAA2D1T,EADtC,GACTgU,EAA+ChU,EADtC,GACHgK,EAAyChK,EADtC,GACI0X,EAAkC1X,EADtC,GAEpCwS,EAAmBiB,GACnBiD,GAA0B,GACtBhD,GACH1B,GAAc,GACdY,GAAqB,2BAAK7H,IAAN,IAAwBP,QAASwJ,OAErDhC,GAAc,GACdY,GAAqB9H,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,QAAUA,OAE9DgN,GAA2BU,GAC3BZ,GAAiB,IAmRfyB,eAhRoB,WAAc,IAAD,uBAATvY,EAAS,yBAATA,EAAS,oBAC5ByT,EAAkDzT,EADtB,GACpB0T,EAA0C1T,EADtB,GACRgU,EAA8BhU,EADtB,GACFgK,EAAwBhK,EADtB,GACKqX,EAAiBrX,EADtB,GAEnCwS,EAAmBiB,GACfC,GACH1B,GAAc,GACdY,GAAqB,2BAAK7H,IAAN,IAAwBP,QAASwJ,OAErDhC,GAAc,GACdY,GAAqB9H,GAAchB,MAAK,SAAC8J,GAAD,OAAQA,EAAG5J,QAAUA,OAE9DkN,GAAsBG,GAAiB,IAAIvQ,YAAU,IACrD8P,GAAyB,GACzBE,GAAiB,OAyQZ0B,GACL,qCACE/B,GAA0BlE,GAC1B,cAAC,GAAD,CACCpC,KAAMsG,EACNpH,aAAcsD,GACd+C,aAAcrD,EACduD,mBAAoBmB,GACpBtH,SAAUmF,GACVrF,OAAQgD,EACRrC,WAAYgI,GACZvO,WAAYsL,GACZ3F,MAAOyC,EACPjJ,UAAWA,KAGZ6N,GAAyBpE,GACzB,cAAC,GAAD,CACCpC,KAAMwG,EACNtH,aAAcsD,GACd+C,aAAcrD,EACd5C,SAAUmF,GACVsB,gBAAiBe,GACjB1H,OAAQgD,EACRrC,WAAYiI,GACZxO,WAAYsL,GACZ3F,MAAOyC,EACPjJ,UAAWA,QAMf,OACC,sBAAK8E,UAAU,qBAAf,UACC,cAAC,IAAD,CACCtG,eAAe,qCACfC,UAAU,EACVC,QAAQ,+FACRC,YAAU,EACVE,QAAM,EACND,SAAS,KACTE,KAAM2L,GACNxM,QAASA,GACTwO,cA3JmB,SAAC3U,EAAMqP,GACf,SAATrP,GACHmS,GAAQ,CACP7M,MAAO+J,EAAQuF,UACf3C,MAAO5C,EAAQwF,eAyJhB,cAAC5N,EAAA,EAAD,CAAiBC,WAAY,KAAMf,QAASA,GAASa,KAAM2L,GAAWxL,UAAW,QAEhFyQ,S,21CCncJ,ICFIC,GACAC,GDCEC,GAAYha,kBAAOoS,IAAPpS,CAAH,MAQTia,GAAYja,kBAAOka,IAAPla,CAAH,MAWTma,GAAgBna,kBAAOka,IAAIE,KAAXpa,CAAH,MAoBbqa,GAAgBra,kBAAOka,IAAII,KAAXta,CAAH,MAET,qBAAGG,MAAkBoa,WACV,qBAAGpa,MAAkBqa,gBAiB/B,qBAAGra,MAAkBoa,WAIrB,qBAAGpa,MAAkBE,SACV,qBAAGF,MAAkBoa,WAoE5BE,GAhEM,SAAClV,GAAW,IACxBY,EAAYC,cAAZD,QADuB,EAEEuU,mBAASpR,EAAmB,CAC5D5D,OAAQC,cACRgV,aAAc,MAFPC,EAFuB,EAEvBA,QAAS1a,EAFc,EAEdA,MAAO+I,EAFO,EAEPA,KAIlBzC,EAAWC,cACXoU,EAAmBvU,YAAYqO,KAC7BhQ,EAAMH,cAANG,EAoBR,OAlBAwC,qBAAU,WACJyT,GAAY1a,IAAS+I,IACzBzC,EAASsU,YAA2B7R,EAAKuP,WACrCqC,IAAqBE,IAAiBC,UACzCxU,EAASyU,YAAS9U,IAElBK,EAAS0U,YAAU/U,OAGnB,CAACyU,EAAS3R,EAAM9C,IAGnBkB,YAAW,sBAAC,sBAAAN,EAAA,sDACPZ,GAAW8C,IAAS2R,IAAY1a,GACnCsG,EAAS0U,YAAU/U,IAFT,2CAIT,KAGF,cAAC,IAAD,UACC,cAACgV,EAAA,EAAIvO,UAAL,CAAewO,iBAAiB,UAAhC,SACC,eAACjJ,EAAA,EAAD,WACC,cAAC6H,GAAD,CACC3H,GAAI,GACJpD,UACC,mIAHF,SAMC,eAACgL,GAAD,CAAWoB,MAAI,EAACpV,QAAQ,QAAQgJ,UAAW,iDAA3C,UACC,cAACkL,GAAD,UACC,cAACE,GAAD,CAAeiB,SAAS,UAAxB,SAAmC3W,EAAE,eAEtC,cAACwV,GAAD,UACC,cAACE,GAAD,CAAeiB,SAAS,SAAxB,SAAkC3W,EAAE,yBAKvC,cAACyN,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,eAAC8I,EAAA,EAAII,QAAL,CAAatM,UAAW,iBAAxB,UACC,cAACkM,EAAA,EAAIK,KAAL,CAAUF,SAAS,UAAnB,SACC,cAAC,GAAD,MAED,cAACH,EAAA,EAAIK,KAAL,CAAUF,SAAS,SAAnB,SACC,cAAC,GAAD,mB,wEErFOG,GA5CK,SAAClW,GAAW,IAAD,EACIgF,oBAAS,GADb,mBACvBmR,EADuB,KACZC,EADY,OAEDvV,cAArBD,EAFsB,EAEtBA,QACFyV,GAHwB,EAEbnS,QACGnD,YAAYuV,MACxBvR,EAAmBsR,EAAnBtR,QAASe,EAAUuQ,EAAVvQ,MACXyO,EAAOvU,EAAMuU,KACbtT,EAAWC,cAEXqV,EAAW,uCAAG,oCAAA/U,EAAA,+EAEagV,aAAoBjC,EAAKkC,eAFtC,cAEZC,EAFY,OAGZC,EAAiB5R,GAAoB2R,EAAiBE,kBAAkBC,WAExEC,EAAa,IAAIC,sBAAmBjR,EAAMf,QAAS2R,EAAiBD,eACpE9L,EAASqM,MANG,SAQDF,EAAWG,QAAQN,EAAgBhM,GAAQuM,qBAAqB,CAChFC,KAAMvW,IATW,cAQZwW,EARY,OAWlBhB,GAAa,GAXK,UAYZ7B,EAAK8C,6BAA6BD,GAZtB,QAcdA,IACHhB,GAAa,GACbnV,EAASqW,gBAhBQ,kDAmBlBlB,GAAa,GACbpW,EAAMuX,YApBY,0DAAH,qDA4BjB,OAJA3V,qBAAU,WACT2U,MACE,CAACF,IAGH,cAAC,KAAD,CACCkB,UAAWpB,EAAY,kBAAM,MAAOnW,EAAMuX,UAC1CC,YAAarB,EAAY,YAAc,8BCY3BnP,I,eAAAA,GA3CC,SAAChH,GAAW,IAAD,EACMgF,oBAAS,GADf,mBACnByS,EADmB,KACTC,EADS,KAElB9W,EAAYC,cAAZD,QACFyV,EAActV,YAAYuV,KACxB3Q,EAAgB3F,EAAhB2F,YACAgS,EAAuCtB,EAAvCsB,mBAAoBC,EAAmBvB,EAAnBuB,eACtBrD,EAAOvU,EAAMuU,KACbtT,EAAWC,cAIX2W,EAFSD,EAAexF,MAAMuF,GACTnL,cAAc,GACJ,MAAQ,OAEvCsL,EAAY,uCAAG,4BAAAtW,EAAA,+EAESP,EAC3B8W,YAAkBpS,EAAaiS,EAAgBhX,EAAS2T,EAAKkC,gBAH3C,cAEbuB,EAFa,OAKnBN,GAAY,GALO,SAMFnD,EAAK8C,6BAA6BW,GANhC,gBASlBN,GAAY,GACZzW,EAASqW,gBAVS,kDAanBI,GAAY,GACZ1X,EAAMuX,YAda,0DAAH,qDAsBlB,OAJA3V,qBAAU,WACTkW,MACE,CAACzB,IAGH,cAAC,KAAD,CACCkB,UAAWE,EAAW,kBAAM,MAAOzX,EAAMuX,UACzCC,YAAaC,EAAW,cAAH,kBAA8BI,SCkBvCI,gBAhBS,SAAC/P,GACxB,MAAO,CACNgQ,KAAM5B,YAAyBpO,GAC/BiQ,QAASC,YAAWlQ,OAIK,SAACjH,GAC3B,MAAO,CACNoX,qBAAsB,SAACvS,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAAlC,OACrBK,EChE6B,SAAC6E,EAAOwS,EAAW3N,EAAQS,EAAOxK,GACjE,8CAAO,WAAOK,EAAUsX,GAAjB,mBAAA/W,EAAA,sDACA0G,EAAQqQ,IACRC,EAAWC,YAAgBvQ,GAF3B,KAGEsQ,EAHF,cAIA5H,IAASC,KAJT,wBAKE6H,EAASzX,EAAS0X,YAAc7S,EAAOwS,EAAW3N,EAAQS,EAAOxK,IALnE,kBAMG8X,GANH,6EAAP,wDD+DWE,CAAiB9S,EAAOwS,EAAW3N,EAAQS,EAAOxK,KAC5DiY,uBAAwB,SAAC/S,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAAlC,OACvBK,ECxB+B,SAAC6E,EAAOwS,EAAW3N,EAAQS,EAAOxK,GACnE,8CAAO,WAAOK,EAAUsX,GAAjB,mBAAA/W,EAAA,sDACA0G,EAAQqQ,IACRC,EAAWC,YAAgBvQ,GAF3B,KAGEsQ,EAHF,cAIA5H,IAASC,KAJT,wBAKE6H,EAASzX,EAAS6X,YAAgBhT,EAAOwS,EAAW3N,EAAQS,EAAOxK,IALrE,kBAMG8X,GANH,6EAAP,wDDuBWK,CAAmBjT,EAAOwS,EAAW3N,EAAQS,EAAOxK,QAIjDqX,EAlEM,SAACjY,GAAW,IAAD,EACDgF,oBAAS,GADR,mBACxBqQ,EADwB,KACf2D,EADe,KAEvBpY,EAAYC,cAAZD,QAEAsX,EAAuDlY,EAAvDkY,KAAMG,EAAiDrY,EAAjDqY,qBAAsBQ,EAA2B7Y,EAA3B6Y,uBAC5BlO,EAA+CuN,EAA/CvN,OAAQ7E,EAAuCoS,EAAvCpS,MAAOsF,EAAgC8M,EAAhC9M,MAAOkN,EAAyBJ,EAAzBI,UAAWhN,EAAc4M,EAAd5M,UAEnCO,EAAaT,EAAQe,YAA2B,OAASA,YAA2BrG,EAAMC,QAC1FsC,EAAW+C,EAAQ,GAAK8M,EAAKpS,MAAMuC,SACnC4Q,EAAmB,UAAM7Q,YAC9B8P,EAAKvN,OACLtC,EACA6P,EAAKpS,MAAMgG,iBACVmB,WAJuB,YAITpB,GAEV0I,EAAOvU,EAAMuU,KAEb2E,EAAO,uCAAG,4BAAA1X,EAAA,mEAEC8J,EAFD,gCAGL+M,EAAqBvS,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAHjD,0DAILiY,EAAuB/S,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAJnD,kCAER8X,EAFQ,KAKdM,GAAW,GALG,UAMGzE,EAAK8C,6BAA6BqB,GANrC,iBAQbM,GAAW,GACXhZ,EAAMmZ,OAAOT,IATA,kDAYdM,GAAW,GACXhZ,EAAMuX,YAbQ,0DAAH,qDAqBb,OAJA3V,qBAAU,WACTsX,MACE,CAAChB,IAGH,cAAC,KAAD,CACCX,UAAWlC,EAAU,kBAAM,MAAOrV,EAAMuX,UACxCC,YACCnC,EAAO,8CAEUzU,EAFV,eAEwB0K,EAAY,UAAY,WAFhD,YAE8D2N,EAF9D,UE0BIhB,gBAhBS,SAAC/P,GACxB,MAAO,CACNgQ,KAAM5B,YAAyBpO,GAC/BiQ,QAASC,YAAWlQ,OAIK,SAACjH,GAC3B,MAAO,CACNmY,oBAAqB,SAACtT,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAAlC,OACpBK,EDpD4B,SAAC6E,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAChE,8CAAO,WAAOK,EAAUsX,GAAjB,mBAAA/W,EAAA,sDACA0G,EAAQqQ,IACRC,EAAWC,YAAgBvQ,GAF3B,KAGEsQ,EAHF,cAIA5H,IAASC,KAJT,wBAKE6H,EAASzX,EAASoY,YAAavT,EAAOwS,EAAW3N,EAAQS,EAAOxK,IALlE,kBAMG8X,GANH,6EAAP,wDCmDWY,CAAgBxT,EAAOwS,EAAW3N,EAAQS,EAAOxK,KAC3D2Y,mBAAoB,SAACzT,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAAlC,OACnBK,EDxC2B,SAAC6E,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAC/D,8CAAO,WAAOK,EAAUsX,GAAjB,mBAAA/W,EAAA,sDACA0G,EAAQqQ,IACRC,EAAWC,YAAgBvQ,GAF3B,KAGEsQ,EAHF,cAIA5H,IAASC,KAJT,wBAKE6H,EAASzX,EAASuY,YAAY1T,EAAOwS,EAAW3N,EAAQS,EAAOxK,IALjE,kBAMG8X,GANH,6EAAP,wDCuCWe,CAAe3T,EAAOwS,EAAW3N,EAAQS,EAAOxK,QAI7CqX,EApEM,SAACjY,GAAW,IAAD,EACDgF,oBAAS,GADR,mBACxBqQ,EADwB,KACf2D,EADe,KAEvBpY,EAAYC,cAAZD,QAEAsX,EAAkDlY,EAAlDkY,KAAMkB,EAA4CpZ,EAA5CoZ,oBAAqBG,EAAuBvZ,EAAvBuZ,mBAC3B5O,EAA8CuN,EAA9CvN,OAAQ7E,EAAsCoS,EAAtCpS,MAAOsF,EAA+B8M,EAA/B9M,MAAOkN,EAAwBJ,EAAxBI,UAAWoB,EAAaxB,EAAbwB,SAEnC7N,EAAaT,EAAQe,YAA2B,OAASA,YAA2BrG,EAAMC,QAC1FsC,EAAW+C,EAAQ,GAAK8M,EAAKpS,MAAMuC,SAEnC4Q,EAAmB,UAAM7Q,YAC9B8P,EAAKvN,OACLtC,EACA6P,EAAKpS,MAAMgG,iBACVmB,WAJuB,YAITpB,GAEV0I,EAAOvU,EAAMuU,KAEboF,EAAS,uCAAG,4BAAAnY,EAAA,mEAEDkY,EAFC,gCAGPN,EAAoBtT,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAH9C,0DAIP2Y,EAAmBzT,EAAOwS,EAAW3N,EAAQS,EAAOxK,GAJ7C,kCAEV8X,EAFU,KAMhBM,GAAW,GANK,UAOCzE,EAAK8C,6BAA6BqB,GAPnC,iBASfM,GAAW,GACXhZ,EAAMmZ,OAAOT,IAVE,kDAahBM,GAAW,GACXhZ,EAAMuX,YAdU,0DAAH,qDAsBf,OAJA3V,qBAAU,WACT+X,MACE,CAACzB,IAGH,cAAC,KAAD,CACCX,UAAWlC,EAAU,kBAAM,MAAOrV,EAAMuX,UACxCC,YACCnC,EAAO,8CAEUzU,EAFV,eAEwB8Y,EAAW,SAAW,QAF9C,YAEyDT,EAFzD,UL0BIW,GA5DO,SAAC5Z,GAAW,IAAD,EACEgF,oBAAS,GADX,mBACzB6U,EADyB,KACdC,EADc,OAEJ9U,mBAAS,MAFL,mBAEzB0T,EAFyB,KAEjBqB,EAFiB,KAG1B1D,EAActV,YAAYuV,KAC1BrV,EAAWC,cACX8Y,EAAyB,OAAhB3D,EAEfzU,qBAAU,YACT2S,GAAO,IAAI0F,KAAKA,KAAKC,eAAiB,IAAID,KAAKE,UAAUC,aAAaC,mEAC7DC,kBACR9F,GAAc,IAAI+F,eAAYhG,GAAK+F,oBAElC,IAEH,IAAME,EAAY,WACjBV,GAAa,GACbC,EAAU,MACV9Y,EAASwZ,YAAyB,QAG7BtB,EAAS,SAAC/B,GACf0C,GAAa,GACbC,EAAU3C,IAGX,OACC,qCACEpX,EAAMK,SACP,cAAC,KAAD,CAAO4L,KAAM+N,EAAQtN,UAAQ,EAACD,OAAQ+N,EAAtC,SACC,cAAC,KAAM7N,KAAP,CAAYjD,UAAW,YAAvB,SACGmQ,EAsBD,cAAC,KAAD,CAA6Ba,QAASC,KAAUC,KAAMlC,EAAQnB,UAAWiD,IArBzE,qCACEnE,GAAeA,EAAYwE,OAASC,MAASC,iBAC7C,cAAC,GAAD,CAAaxD,UAAWiD,EAAWjG,KAAMC,KAEzC6B,GAAeA,EAAYwE,OAASC,MAASE,SAC7C,cAAC,GAAD,CAASzD,UAAWiD,EAAWjG,KAAMC,KAErC6B,GAAeA,EAAYwE,OAASC,MAASG,cAC7C,cAAC,GAAD,CAAc1D,UAAWiD,EAAWrB,OAAQA,EAAQ5E,KAAMC,KAE1D6B,GAAeA,EAAYwE,OAASC,MAASI,gBAC7C,cAAC,GAAD,CAAc3D,UAAWiD,EAAWrB,OAAQA,EAAQ5E,KAAMC,KAE1D6B,GAAeA,EAAYwE,OAASC,MAASK,YAC7C,cAACC,GAAD,CAAa7D,UAAWiD,EAAWrB,OAAQA,EAAQ5E,KAAMC,KAEzD6B,GAAeA,EAAYwE,OAASC,MAASM,aAC7C,cAACA,GAAD,CAAa7D,UAAWiD,EAAWrB,OAAQA,EAAQ5E,KAAMC,gB,2JMzDjE,IAAM6G,GAAY5gB,kBAAOmS,IAAPnS,CAAH,MA0BA6gB,UAlBA,SAACtb,GACf,OACC,cAACub,EAAA,EAAD,UACC,eAAC,EAAD,WACC,cAAC,GAAD,IACA,eAACF,GAAD,WACC,cAACxO,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,cAAC,EAAD,MAED,cAACD,EAAA,EAAD,CAAKC,GAAI,GAAT,SACC,cAAC,GAAD","file":"static/js/36.1ec73314.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { escapeRegExp } from \"../../utils\";\n\nconst StyledInput = styled.input<{\n\terror?: boolean;\n\tfontSize?: string;\n\talign?: string;\n\tnoBorder?: boolean;\n\treverse?: boolean;\n\tsize?: string;\n}>`\n\tcolor: ${({ error, theme }) => (error ? theme.red1 : theme.text1)};\n\twidth: 0;\n\tposition: relative;\n\tfont-weight: 500;\n\tfont-family: inherit;\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tfont-size: 1rem;\n\ttext-align: ${({ align }) => align && align};\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\theight: ${({ size }) => (size === \"sm\" ? \"48px\" : \"56px\")};\n\tborder-bottom-right-radius: ${({ reverse }) => (reverse ? \"0\" : `1.125rem`)};\n\tborder-top-right-radius: ${({ reverse }) => (reverse ? \"0\" : `1.125rem`)};\n\tborder-bottom-left-radius: ${({ reverse }) => (reverse ? \"1.125rem\" : `0`)};\n\tborder-top-left-radius: ${({ reverse }) => (reverse ? \"1.125rem\" : `0`)};\n\tpadding-right: 0.625rem;\n\tpadding-left: ${({ noBorder, reverse }) => (reverse ? \"1.375rem\" : noBorder ? \"0.625rem\" : `1.5rem`)};\n\t-webkit-appearance: textfield;\n\tborder-left: ${({ theme, noBorder }) => (noBorder ? \"none\" : `3px solid ${theme.modalBG}`)};\n\n\t@media (min-width: 768px) {\n\t\tpadding-right: 4.5625rem;\n\t}\n\n\t::-webkit-search-decoration {\n\t\t-webkit-appearance: none;\n\t}\n\n\t[type=\"number\"] {\n\t\t-moz-appearance: textfield;\n\t}\n\n\t::-webkit-outer-spin-button,\n\t::-webkit-inner-spin-button {\n\t\t-webkit-appearance: none;\n\t}\n\n\t::placeholder {\n\t\tcolor: ${({ theme }) => theme.text3};\n\t}\n`;\n\nconst inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`); // match escaped \".\" characters via in a non-capturing group\n\nexport const Input = React.memo(function InnerInput({\n\tvalue,\n\tonUserInput,\n\tplaceholder,\n\tsize,\n\t...rest\n}: {\n\tvalue: string | number;\n\tonUserInput: (input: string) => void;\n\terror?: boolean;\n\tfontSize?: string;\n\tsize?: string;\n\talign?: \"right\" | \"left\";\n} & Omit<React.HTMLProps<HTMLInputElement>, \"ref\" | \"onChange\" | \"as\">) {\n\tconst enforcer = (nextUserInput: string) => {\n\t\tif (nextUserInput === \"\" || inputRegex.test(escapeRegExp(nextUserInput))) {\n\t\t\tonUserInput(nextUserInput);\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledInput\n\t\t\t{...rest}\n\t\t\tvalue={value}\n\t\t\tonChange={(event) => {\n\t\t\t\t// replace commas with periods, because uniswap exclusively uses period as the decimal separator\n\t\t\t\tenforcer(event.target.value.replace(/,/g, \".\"));\n\t\t\t}}\n\t\t\t// universal input options\n\t\t\tinputMode=\"decimal\"\n\t\t\ttitle=\"Token Amount\"\n\t\t\tautoComplete=\"off\"\n\t\t\tautoCorrect=\"off\"\n\t\t\tsize={size}\n\t\t\t// text-specific options\n\t\t\ttype=\"text\"\n\t\t\tpattern=\"^[0-9]*[.,]?[0-9]*$\"\n\t\t\tplaceholder={placeholder || \"0.0\"}\n\t\t\tminLength={1}\n\t\t\tmaxLength={79}\n\t\t\tspellCheck=\"false\"\n\t\t/>\n\t);\n});\n\nexport default Input;\n\n// const inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useTranslation } from './useTranslation';\nimport { getDisplayName } from './utils';\nexport function withTranslation(ns) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function Extend(WrappedComponent) {\n    function I18nextWithTranslation(_ref) {\n      var forwardedRef = _ref.forwardedRef,\n          rest = _objectWithoutProperties(_ref, [\"forwardedRef\"]);\n\n      var _useTranslation = useTranslation(ns, rest),\n          _useTranslation2 = _slicedToArray(_useTranslation, 3),\n          t = _useTranslation2[0],\n          i18n = _useTranslation2[1],\n          ready = _useTranslation2[2];\n\n      var passDownProps = _objectSpread(_objectSpread({}, rest), {}, {\n        t: t,\n        i18n: i18n,\n        tReady: ready\n      });\n\n      if (options.withRef && forwardedRef) {\n        passDownProps.ref = forwardedRef;\n      } else if (!options.withRef && forwardedRef) {\n        passDownProps.forwardedRef = forwardedRef;\n      }\n\n      return React.createElement(WrappedComponent, passDownProps);\n    }\n\n    I18nextWithTranslation.displayName = \"withI18nextTranslation(\".concat(getDisplayName(WrappedComponent), \")\");\n    I18nextWithTranslation.WrappedComponent = WrappedComponent;\n\n    var forwardRef = function forwardRef(props, ref) {\n      return React.createElement(I18nextWithTranslation, Object.assign({}, props, {\n        forwardedRef: ref\n      }));\n    };\n\n    return options.withRef ? React.forwardRef(forwardRef) : I18nextWithTranslation;\n  };\n}","import { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport { getAaveGraphClient } from \"../../../services/aave/aave\";\n\nconst GraphQlProvider = (props) => {\n\treturn <ApolloProvider client={getAaveGraphClient()}>{props.children}</ApolloProvider>;\n};\n\nexport default GraphQlProvider;\n","import { BigNumber } from \"@0x/utils\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport \"./styles.scss\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { getAaveCurrency, getAaveUserAccountData, getEthInUsd } from \"../../../state/selectors\";\nimport { getAaveOverall } from \"../../../services/aave/aave\";\nimport { setAaveUserAccountData } from \"../../../state/aave/actions\";\nimport React, { useEffect } from \"react\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport Card from \"../../../components/Card\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\n\nconst StyledCard = styled(Card)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\n\t& .card-body {\n\t\tpadding: 24px 20px 20px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\t& .card-body {\n\t\t\tpadding: 24px;\n\t\t}\n\t}\n`;\n\nconst Text = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 1rem;\n\tfont-weight: 700;\n`;\n\nconst GlobalOverall = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst currencySelector = useSelector(getAaveCurrency);\n\tconst isNative = currencySelector === \"NATIVE\";\n\tconst dispatch = useDispatch();\n\tconst userAccountData = useSelector(getAaveUserAccountData);\n\tconst ethUsd = useSelector(getEthInUsd);\n\tconst { t } = useTranslation();\n\n\tconst fetchAaveGlobal = async () => {\n\t\tconst userAcc = await getAaveOverall(account);\n\t\tdispatch(setAaveUserAccountData(userAcc));\n\t};\n\n\t// initial loading\n\tuseEffect(() => {\n\t\tconst loadingLendingPoolData = async () => {\n\t\t\tif (account) {\n\t\t\t\tawait fetchAaveGlobal();\n\t\t\t}\n\t\t};\n\n\t\tloadingLendingPoolData();\n\t}, [account]);\n\n\t// Update global state\n\tuseInterval(async () => {\n\t\tif (account) {\n\t\t\tawait fetchAaveGlobal();\n\t\t}\n\t}, 30 * 1000);\n\n\tconst formatETHField = (field = undefined) => {\n\t\tif (field) {\n\t\t\treturn isNative\n\t\t\t\t? `${field.dividedBy(\"1e18\").toFixed(3)} ETH`\n\t\t\t\t: ethUsd\n\t\t\t\t? `${field.dividedBy(\"1e18\").multipliedBy(ethUsd).toFixed(3)} USD`\n\t\t\t\t: \"- USD\";\n\t\t} else {\n\t\t\treturn \"-\";\n\t\t}\n\t};\n\n\tconst totalLiquidity = formatETHField(userAccountData && userAccountData.totalLiquidity);\n\tconst totalCollateralETH = formatETHField(userAccountData && userAccountData.totalCollateralETH);\n\tconst totalBorrowsETH = formatETHField(userAccountData && userAccountData.totalBorrowsETH);\n\tconst availableBorrowsETH = formatETHField(userAccountData && userAccountData.availableBorrowsETH);\n\tconst currentLiquidationThreshold =\n\t\t(userAccountData && `${userAccountData.currentLiquidationThreshold.toFixed(0)} %`) || \"-\";\n\tconst ltv = (userAccountData && `${userAccountData.ltv.toFixed(0)} %`) || \"-\";\n\tlet healthFactor = \"-\";\n\tlet healtFactorValue;\n\t// const healthFactor = (userAccountData && userAccountData.healthFactor.toFixed(3)) || '-';;\n\tif (userAccountData && userAccountData.totalBorrowsETH.gt(0)) {\n\t\thealthFactor = userAccountData && userAccountData.healthFactor.dividedBy(\"1e18\").toFixed(3);\n\t\thealtFactorValue = new BigNumber(healthFactor);\n\t}\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"total_liquidity\",\n\t\t\ttext: t(\"borrow.totalLiquidity\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalLiquidity}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"total_collateral\",\n\t\t\ttext: t(\"borrow.totalCollateral\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalCollateralETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"total_borrows\",\n\t\t\ttext: t(\"borrow.totalBorrows\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalBorrowsETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"available\",\n\t\t\ttext: t(\"borrow.available\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.availableBorrowsETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"liquidation_threshold\",\n\t\t\ttext: t(\"borrow.liquidationThreshold\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.currentLiquidationThreshold}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"ltv\",\n\t\t\ttext: \"LTV\",\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.ltv}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"health_factor\",\n\t\t\ttext: t(\"borrow.healthFactor\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.healthFactor}</Text>;\n\t\t\t},\n\t\t},\n\t];\n\n\treturn (\n\t\t<StyledCard>\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden global-overall__table mb-0\"\n\t\t\t\tbootstrap4\n\t\t\t\tkeyField={\"id\"}\n\t\t\t\tremote\n\t\t\t\tdata={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttotalLiquidity,\n\t\t\t\t\t\ttotalCollateralETH,\n\t\t\t\t\t\ttotalBorrowsETH,\n\t\t\t\t\t\tavailableBorrowsETH,\n\t\t\t\t\t\tcurrentLiquidationThreshold,\n\t\t\t\t\t\tltv,\n\t\t\t\t\t\thealthFactor,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tcolumns={columns}\n\t\t\t/>\n\t\t\t<ResponsiveTable\n\t\t\t\tbreakpoint={\"lg\"}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttotalLiquidity,\n\t\t\t\t\t\ttotalCollateralETH,\n\t\t\t\t\t\ttotalBorrowsETH,\n\t\t\t\t\t\tavailableBorrowsETH,\n\t\t\t\t\t\tcurrentLiquidationThreshold,\n\t\t\t\t\t\tltv,\n\t\t\t\t\t\thealthFactor,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tdirection={\"rtl\"}\n\t\t\t\twithoutBorder\n\t\t\t/>\n\t\t</StyledCard>\n\t);\n};\n\nexport default GlobalOverall;\n","/**\n * GraphQl Queries\n *\n */\nimport { gql } from \"apollo-boost\";\n\nexport const GET_AAVE_RESERVES = gql`\n\t{\n\t\treserves {\n\t\t\tid\n\t\t\tname\n\t\t\tsymbol\n\t\t\tdecimals\n\t\t\tliquidityRate\n\t\t\tvariableBorrowRate\n\t\t\tprice {\n\t\t\t\tpriceInEth\n\t\t\t}\n\t\t\tstableBorrowRate\n\t\t\taverageStableBorrowRate\n\t\t\taToken {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n`;\n\n/*export const GET_USER_AAVE_DATA = gql`\n{\n    query UserData($userAddress: String! ){\n        user(id: $userAddress){\n           id,\n           reserves{\n            id,\n            userBalanceIndex,\n            principalATokenBalance,\n            redirectedBalance,\n            principalBorrows,\n            borrowRateMode,\n            borrowRate,\n            usageAsCollateralEnabledOnUser,\n           }\n     }\n   }\n`;*/\n","import { useMemo, useState, useEffect } from \"react\";\nimport { tokensToTokenBalances } from \"../utils/spot/tokens\";\nimport { useActiveWeb3React } from \"./index\";\nimport { useSelector } from \"react-redux\";\nimport { getBaseToken, getQuoteToken, searchToken } from \"../state/selectors\";\nimport { getKnownTokens } from \"../utils/known_tokens\";\nimport { useETHBalances } from \"../state/wallet/hooks\";\nimport { BigNumber } from \"@0x/utils\";\n\nexport const useTokenToBalance = (tokens, address, library) => {\n\tconst [balances, setBalances] = useState([]);\n\n\tconst fetchBalances = async () => {\n\t\tif (address) {\n\t\t\tconst res = await tokensToTokenBalances(tokens, address, library);\n\t\t\tsetBalances(res);\n\t\t}\n\t};\n\tuseEffect(() => {\n\t\tfetchBalances();\n\t}, [address, tokens]);\n\n\treturn useMemo(() => {\n\t\tif (balances.length > 0) {\n\t\t\treturn balances;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}, [address, balances, tokens]);\n};\n\nexport const useSpotBalances = () => {\n\tconst { account, library } = useActiveWeb3React();\n\n\tconst baseToken = useSelector(getBaseToken);\n\tconst quoteToken = useSelector(getQuoteToken);\n\n\tconst knownTokens = useMemo(() => {\n\t\treturn getKnownTokens();\n\t}, []);\n\tconst tokens = useMemo(() => {\n\t\treturn knownTokens.getTokens();\n\t}, []);\n\n\tconst wethToken = useMemo(() => {\n\t\treturn knownTokens.getWethToken();\n\t}, []);\n\n\tconst t = useMemo(() => {\n\t\treturn [...tokens, wethToken];\n\t}, [wethToken, tokens]);\n\tconst allBalances = useTokenToBalance(t, account, window.ethereum || library);\n\n\tconst ethBalance = useETHBalances([account]);\n\n\tconst wethBalance = useMemo(() => {\n\t\treturn allBalances.find((b) => b.token.symbol === wethToken.symbol);\n\t}, [allBalances]);\n\n\tconst tokensBalance = useMemo(() => {\n\t\treturn allBalances.filter((b) => b.token.symbol !== wethToken.symbol);\n\t}, [allBalances]);\n\n\tconst ethereumBalance = useMemo(() => {\n\t\tconst ETH = ethBalance[account] ? ethBalance[account].toExact() : null;\n\t\tconst bn = new BigNumber(ETH * 10 ** 18);\n\n\t\treturn {\n\t\t\ttoken: ethBalance[account] ? ethBalance[account].currency : undefined,\n\t\t\tbalance: bn,\n\t\t};\n\t}, [ethBalance]);\n\n\tconst totalEthBalance = useMemo(() => {\n\t\tif (wethBalance && ethereumBalance) {\n\t\t\tlet total = wethBalance.balance;\n\t\t\tif (ethereumBalance.token !== undefined) {\n\t\t\t\ttotal = ethereumBalance.balance.plus(wethBalance.balance);\n\t\t\t}\n\n\t\t\treturn total;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}, [ethereumBalance, wethBalance]);\n\n\tconst baseTokenBalance = useMemo(() => {\n\t\treturn searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: baseToken });\n\t}, [baseToken, tokensBalance, wethBalance]);\n\n\tconst quoteTokenBalance = useMemo(() => {\n\t\treturn searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: quoteToken });\n\t}, [quoteToken, tokensBalance, wethBalance]);\n\n\treturn useMemo(() => {\n\t\treturn {\n\t\t\tquoteTokenBalance,\n\t\t\tbaseTokenBalance,\n\t\t\ttotalEthBalance,\n\t\t\tethBalance: ethereumBalance,\n\t\t\twethBalance,\n\t\t\ttokensBalance,\n\t\t};\n\t}, [account, baseToken, quoteToken, allBalances, baseTokenBalance, quoteTokenBalance]);\n};\n","import { useSpotBalances } from \"../../hooks/useTokenToBalance\";\n\nconst withBalance = (Component) => {\n\treturn (props) => {\n\t\tconst balances = useSpotBalances();\n\t\treturn <Component {...props} {...balances} />;\n\t};\n};\n\nexport default withBalance;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { RowBetween } from \"../Row\";\nimport { Input as NumericalInput } from \"../NumericalInput\";\nimport { tokenAmountInUnits, unitsInTokenAmount } from \"../../utils/spot/tokens\";\nimport { Token } from \"@uniswap/sdk\";\nimport CurrencyLogo from \"../CurrencyLogo\";\n\nconst InputRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\n\tpadding: 0.625rem 0 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding-top: 0.75rem;\n\t}\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 34px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-bottom: 36px;\n\t}\n`;\n\nconst Label = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tpadding: 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding: 0 1rem;\n\t\tfont-weight: 700;\n\t}\n`;\n\nconst InputContainer = styled.div`\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: nowrap;\n\tflex: 1;\n`;\n\nconst LabelRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding: 0;\n`;\n\nconst Aligner = styled.span`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t@media (min-width: 768px) {\n\t\tjustify-content: space-between;\n\t}\n`;\n\nconst InputPanel = styled.div`\n\t${({ theme }) => theme.flexColumnNoWrap};\n\tposition: relative;\n\tborder-radius: 0.42rem;\n`;\n\nconst StyledTokenName = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tmargin-left: 15px;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tmargin-right: auto;\n\t}\n`;\n\nconst CurrencySelect = styled.button`\n\talign-items: center;\n\theight: 56px;\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tcolor: ${({ theme }) => theme.text1};\n\tborder-bottom-left-radius: 18px;\n\tborder-top-left-radius: 18px;\n\tbox-shadow: none;\n\toutline: none;\n\tcursor: pointer;\n\tuser-select: none;\n\tborder: none;\n\tpadding: 0.875rem 0.625rem;\n\tmin-width: 116px;\n\twidth: 116px;\n\ttext-align: center;\n\n\t@media (min-width: 768px) {\n\t\tmin-width: 116px;\n\t\twidth: 116px;\n\t\tpadding: 0.625rem 1rem;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t\ttext-align: left;\n\t}\n\n\t:focus,\n\t:hover {\n\t\tbackground-color: ${({ theme }) => theme.bg1};\n\t\toutline: none;\n\t}\n`;\n\nlet BalanceRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\tmargin-top: 10px;\n\tcolor: ${({ theme }) => theme.text1};\n\topacity: 0.5;\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tline-height: 1rem;\n\tpadding: 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding: 0 1rem;\n\t}\n`;\n\nexport default class BorrowInputPanel extends React.Component {\n\tstate = {\n\t\tvalueStr: this.props.value\n\t\t\t? tokenAmountInUnits(this.props.value, this.props.decimals, this.props.valueFixedDecimals)\n\t\t\t: \"\",\n\t};\n\n\t_updateValue = (value) => {\n\t\tconst newValue = unitsInTokenAmount(value || \"0\", this.props.decimals);\n\t\tconst invalidValue = this.props.min && newValue.isLessThan(this.props.min);\n\t\tif (invalidValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onUserInput(newValue);\n\t\tthis.setState({\n\t\t\tvalueStr: value,\n\t\t});\n\t};\n\n\tstatic getDerivedStateFromProps = (props, state) => {\n\t\tconst { decimals, value, valueFixedDecimals } = props;\n\t\tconst { valueStr } = state;\n\n\t\tif (!value) {\n\t\t\treturn {\n\t\t\t\tvalueStr: \"\",\n\t\t\t};\n\t\t} else if (value && !unitsInTokenAmount(valueStr || \"0\", decimals).eq(value)) {\n\t\t\treturn {\n\t\t\t\tvalueStr: tokenAmountInUnits(value, decimals, valueFixedDecimals),\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tlabel = \"Input\",\n\t\t\tdisable = false,\n\t\t\tselected,\n\t\t\thideInput = false,\n\t\t\tid,\n\t\t\tshowBalance = true,\n\t\t\tbalanceText,\n\t\t\ttoken = undefined,\n\t\t} = this.props;\n\t\tconst { valueStr } = this.state;\n\n\t\tconst currency = token ? new Token(1, token.address, token.decimals, token.symbol, token.name) : undefined;\n\n\t\treturn (\n\t\t\t<InputPanel id={id}>\n\t\t\t\t<Container>\n\t\t\t\t\t{!hideInput && (\n\t\t\t\t\t\t<LabelRow>\n\t\t\t\t\t\t\t<RowBetween>\n\t\t\t\t\t\t\t\t<Label>{label}</Label>\n\t\t\t\t\t\t\t</RowBetween>\n\t\t\t\t\t\t</LabelRow>\n\t\t\t\t\t)}\n\t\t\t\t\t<InputRow style={hideInput ? { padding: \"0\", borderRadius: \"0.42rem\" } : {}} selected={disable}>\n\t\t\t\t\t\t<CurrencySelect selected={!!selected} className=\"open-currency-select-button\">\n\t\t\t\t\t\t\t<Aligner>\n\t\t\t\t\t\t\t\t{token && <CurrencyLogo currency={currency} size={\"24px\"} />}\n\t\t\t\t\t\t\t\t<StyledTokenName className=\"token-symbol-container\" active={Boolean(selected)}>\n\t\t\t\t\t\t\t\t\t{(selected && selected?.length > 20\n\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\tselected?.slice(0, 4) +\n\t\t\t\t\t\t\t\t\t\t\t\t\"...\" +\n\t\t\t\t\t\t\t\t\t\t\t\tselected?.slice(selected?.length - 5, selected?.length)\n\t\t\t\t\t\t\t\t\t\t  ).toUpperCase()\n\t\t\t\t\t\t\t\t\t\t: selected.toUpperCase()) || `Select`}\n\t\t\t\t\t\t\t\t</StyledTokenName>\n\t\t\t\t\t\t\t</Aligner>\n\t\t\t\t\t\t</CurrencySelect>\n\n\t\t\t\t\t\t{!hideInput && (\n\t\t\t\t\t\t\t<InputContainer>\n\t\t\t\t\t\t\t\t<NumericalInput\n\t\t\t\t\t\t\t\t\tclassName=\"token-amount-input pl-3 \"\n\t\t\t\t\t\t\t\t\tvalue={valueStr}\n\t\t\t\t\t\t\t\t\tonUserInput={this._updateValue}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InputContainer>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</InputRow>\n\t\t\t\t\t{selected && showBalance && <BalanceRow>{balanceText()}</BalanceRow>}\n\t\t\t\t</Container>\n\t\t\t</InputPanel>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled, { ThemeContext } from \"styled-components\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { Field } from \"../../../state/swap/actions\";\nimport { TYPE } from \"../../../theme\";\nimport { toast } from \"react-hot-toast\";\nimport { withTranslation } from \"react-i18next\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.Black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nclass LendingModalContainer extends React.Component {\n\tstatic contextType = ThemeContext;\n\tstate = {\n\t\tamount: null,\n\t\terror: {\n\t\t\tbtnMsg: null,\n\t\t\tcardMsg: null,\n\t\t},\n\t};\n\n\tcomponentDidMount = () => {\n\t\tconst { ethBalance, t } = this.props;\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tthis.setState({\n\t\t\t\terror: {\n\t\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\tconst theme = this.context;\n\t\tconst {\n\t\t\ttokenBalance,\n\t\t\tcloseModal,\n\t\t\tethBalance,\n\t\t\tisEth,\n\t\t\twethToken,\n\t\t\taToken,\n\t\t\tisLending,\n\t\t\tshow,\n\t\t\tt,\n\t\t\t...restProps\n\t\t} = this.props;\n\t\tconst { error, amount } = this.state;\n\t\tconst { liquidityRate } = aToken;\n\t\tlet coinSymbol;\n\t\tlet maxBalance;\n\t\tlet decimals;\n\t\tlet displayDecimals;\n\n\t\tif (isEth) {\n\t\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\t\tdecimals = 18;\n\t\t\tmaxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n\t\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t\t} else if (tokenBalance) {\n\t\t\tconst { token, balance } = tokenBalance;\n\t\t\tdisplayDecimals = token.displayDecimals;\n\t\t\tdecimals = token.decimals;\n\t\t\tmaxBalance = isLending ? balance : aToken.balance || new BigNumber(0);\n\t\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { token } = tokenBalance;\n\t\tconst btnPrefix = isLending ? \"Deposit \" : \"Withdraw \";\n\t\tconst balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\t\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\t\tconst isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n\n\t\treturn (\n\t\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t\t{isLending ? t(\"Deposit\") : t(\"withdraw\")} {coinSymbol}\n\t\t\t\t\t\t\t</Title>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\t\tonUserInput={this.updateAmount}\n\t\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\t\tlabel={isLending ? t(\"wantToDeposit\") : t(\"wantToWithdraw\")}\n\t\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t\t{t(\"interestAPR\")}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{liquidityRate.div(\"1e27\").multipliedBy(100).toFixed(5)} %\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t\t{t(\"amount\")}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\txs={12}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\t\tclassName={`btn btn-${isLending ? \"primary\" : \"warning\"}`}\n\t\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\t\tonClick={this.submit}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Modal.Body>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\tsubmit = async () => {\n\t\tconst { tokenBalance, isEth, wethToken, aToken, isLending } = this.props;\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t\tconst amount = this.state.amount || new BigNumber(0);\n\t\tthis.props.onSubmit(amount, token, aToken, isEth, isLending);\n\t};\n\n\t_reset = () => {\n\t\tthis.setState({\n\t\t\tamount: null,\n\t\t});\n\t};\n\n\t_closeModal = () => {\n\t\tthis._reset();\n\t};\n\n\tsetMax = () => {\n\t\tconst { tokenBalance, isEth, ethBalance, isLending, aToken } = this.props;\n\t\tif (isEth) {\n\t\t\tconst maxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n\t\t\tthis.setState({\n\t\t\t\tamount: maxBalance,\n\t\t\t});\n\t\t} else if (tokenBalance) {\n\t\t\tthis.setState({\n\t\t\t\tamount: isLending ? tokenBalance.balance : aToken.balance || new BigNumber(0),\n\t\t\t});\n\t\t}\n\t};\n\n\tupdateAmount = (newValue) => {\n\t\tthis.setState({\n\t\t\tamount: newValue,\n\t\t});\n\t};\n}\n\nexport default withTranslation()(LendingModalContainer);\n","import React, { useMemo, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\nimport { Token } from \"@uniswap/sdk\";\n\nimport { getAaveCurrency, getAaveLoadingState, getATokensData, getTokensPrice } from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { setAaveCurrency } from \"../../../state/aave/actions\";\nimport { getKnownTokens, isWethToken } from \"../../../utils/known_tokens\";\nimport { formatTokenSymbol, tokenAmountInUnits } from \"../../../utils/spot/tokens\";\nimport { Protocol } from \"../../../utils/aave/types\";\nimport { startLendingTokenSteps, startUnLendingTokenSteps } from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { StyledLink, TradeButton } from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport LendingModalContainer from \"./LendingModalContainer\";\nimport { sortedData } from \"../../../lib/helper\";\nimport { useTranslation } from \"react-i18next\";\n\nconst LogoContainer = styled.div`\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 32px;\n\tbackground-color: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tborder-radius: 24px;\n\t}\n`;\n\nconst Symbol = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 1rem;\n\tmargin-right: 10px;\n\tfont-weight: 700;\n`;\n\nconst Name = styled.span`\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.875rem;\n\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 400;\n\t}\n`;\n\nconst CellText = styled.span`\n\tfont-weight: 500;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t&.font-size-base {\n\t\tfont-size: 1rem;\n\t}\n\n\t@media (max-width: 991px) {\n\t\tfont-weight: 700;\n\n\t\t&.label {\n\t\t\tfont-weight: 500;\n\t\t}\n\t}\n`;\n\nconst LendingBalance = (props) => {\n\tconst [isEthState, setIsEthState] = useState(false);\n\tconst [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n\tconst [isStableCoin, setIsStableCoin] = useState(false);\n\tconst [isModalOpenState, setIsModalOpenState] = useState(false);\n\tconst [isSubmittingState, setIsSubmittingState] = useState(false);\n\tconst [aTokenDataState, setATokenDataState] = useState();\n\tconst [isLendingState, setIsLendingState] = useState(true);\n\tconst [tokenBalanceState, setTokenBalanceState] = useState();\n\tconst [sort, setSort] = useState({\n\t\tfield: false,\n\t\torder: \"desc\",\n\t});\n\tconst { t } = useTranslation();\n\n\tconst { account } = useActiveWeb3React();\n\tconst dispatch = useDispatch();\n\tconst aTokensData = useSelector(getATokensData);\n\tconst tokensPrice = useSelector(getTokensPrice);\n\tconst tokenBalances = props.tokensBalance;\n\tconst ethBalance = props.ethBalance;\n\tconst ethTotalBalance = props.totalEthBalance;\n\tconst wethTokenBalance = props.wethBalance;\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst currencySelector = useSelector(getAaveCurrency);\n\n\tconst innerTabs = [\n\t\t{\n\t\t\tactive: currencySelector === \"NATIVE\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"NATIVE\")),\n\t\t\ttext: \"Native\",\n\t\t},\n\t\t{\n\t\t\tactive: currencySelector === \"USD\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"USD\")),\n\t\t\ttext: \"USD\",\n\t\t},\n\t];\n\n\tconst openLendingModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tsetIsModalOpenState(true);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetIsLendingState(true);\n\t};\n\n\tconst openUnLendingModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetIsModalOpenState(true);\n\t\tsetIsLendingState(false);\n\t};\n\n\tconst tokensRow = useMemo(() => {\n\t\tconst data = aTokensData.map((tokenD) => {\n\t\t\tconst { token, balance } = tokenD;\n\n\t\t\tconst { symbol } = token;\n\t\t\tconst isEthToken = isWethToken(token);\n\t\t\tconst tokenBalance = tokenBalances.find((tb) => tb.token.symbol === symbol);\n\t\t\tif (isHideZeroBalance) {\n\t\t\t\tif (isEthToken && ethTotalBalance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (tokenBalance && tokenBalance.balance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isStableCoin) {\n\t\t\t\tif (!token.isStableCoin) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tokB = isEthToken\n\t\t\t\t? ethTotalBalance || new BigNumber(0)\n\t\t\t\t: (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n\t\t\tlet displayBalance;\n\t\t\tlet displayDepositBalance;\n\n\t\t\tif (account && balance) {\n\t\t\t\tconst formattedLendBalance = tokenAmountInUnits(balance, token.decimals, token.displayDecimals);\n\t\t\t\tconst formattedBalance = tokenAmountInUnits(tokB, token.decimals, token.displayDecimals);\n\t\t\t\tconst tokenPrice = tokensPrice && tokensPrice.find((t) => t.c_id === token.c_id);\n\t\t\t\tif (currencySelector === \"NATIVE\") {\n\t\t\t\t\tdisplayBalance = Number(formattedBalance);\n\t\t\t\t\tdisplayDepositBalance = Number(formattedLendBalance);\n\t\t\t\t} else {\n\t\t\t\t\tdisplayBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t\tdisplayDepositBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedLendBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdisplayBalance = \"-\";\n\t\t\t\tdisplayDepositBalance = \"-\";\n\t\t\t}\n\n\t\t\tconst apy = tokenD.liquidityRate.dividedBy(\"1e27\").multipliedBy(100).toNumber();\n\n\t\t\tconst tokenName = isEthToken ? \"Ethereum\" : token.name;\n\t\t\tconst tokenSymbol = isEthToken ? \"ETH\" : token.symbol.toUpperCase();\n\n\t\t\treturn {\n\t\t\t\ttoken,\n\t\t\t\tsymbol,\n\t\t\t\ttokenSymbol,\n\t\t\t\ttokenName,\n\t\t\t\tdisplayBalance,\n\t\t\t\tdisplayDepositBalance,\n\t\t\t\tapy,\n\t\t\t\tbalance,\n\t\t\t\ttokB,\n\t\t\t\tisEthToken,\n\t\t\t\ttokenD,\n\t\t\t};\n\t\t});\n\n\t\treturn sortedData(data, sort);\n\t}, [aTokensData, sort]);\n\n\tconst closeModal = () => {\n\t\tsetIsModalOpenState(false);\n\t};\n\n\tconst handleSubmit = async (amount, token, aToken, isEth, isLending) => {\n\t\tsetIsSubmittingState(true);\n\n\t\ttry {\n\t\t\tif (isLending) {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartLendingTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait dispatch(startUnLendingTokenSteps(amount, token, aToken, isEth));\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsSubmittingState(false);\n\t\t\tcloseModal();\n\t\t}\n\t};\n\n\tconst wethToken = getKnownTokens().getWethToken();\n\tconst onHideZeroBalance = () => {\n\t\tsetIsHideZeroBalance(!isHideZeroBalance);\n\t};\n\tconst onIsStableCoin = () => {\n\t\tsetIsStableCoin(!isStableCoin);\n\t};\n\n\tconst wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n\tconst onTableChange = (type, context) => {\n\t\tif (type === \"sort\") {\n\t\t\tsetSort({\n\t\t\t\tfield: context.sortField,\n\t\t\t\torder: context.sortOrder,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"tokenName\",\n\t\t\ttext: t(\"token\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\tconst currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\tclassName=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LogoContainer>\n\t\t\t\t\t\t\t<CurrencyLogo currency={currency} />\n\t\t\t\t\t\t</LogoContainer>\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n\t\t\t\t\t\t\t<Symbol>{row.tokenSymbol}</Symbol>\n\t\t\t\t\t\t\t<Name>{row.tokenName}</Name>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayBalance\",\n\t\t\ttext: t(\"borrow.balance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayBalance === 'number' ? `${row.displayBalance} ${row.tokenSymbol}` : row.displayBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayDepositBalance\",\n\t\t\ttext: t(\"borrow.depositBalance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayDepositBalance === 'number' ? `${row.displayDepositBalance} ${row.tokenSymbol}` : row.displayDepositBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"apy\",\n\t\t\ttext: \"APY\",\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{row.apy.toFixed(6)} %</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"actions\",\n\t\t\ttext: t(\"table.actions\"),\n\t\t\tformatter: (cellContent, row, rowIndex, { openLendingModal, openUnLendingModal }) => {\n\t\t\t\tconst { balance, tokB, tokenD, isEthToken, token } = row;\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tonClick={openLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n\t\t\t\t\t\t\t\tdisabled={tokB.isEqualTo(0)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"deposit\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tvariant={\"warning\"}\n\t\t\t\t\t\t\t\tonClick={openUnLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n\t\t\t\t\t\t\t\tdisabled={balance && balance.isEqualTo(0)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"withdraw\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tisAction: true,\n\t\t\tformatExtraData: {\n\t\t\t\topenLendingModal,\n\t\t\t\topenUnLendingModal,\n\t\t\t},\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className=\"d-flex flex-column\">\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"table-responsive d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n\t\t\t\tbootstrap4\n\t\t\t\tremote\n\t\t\t\tkeyField=\"id\"\n\t\t\t\tdata={tokensRow}\n\t\t\t\tcolumns={columns}\n\t\t\t\tonTableChange={onTableChange}\n\t\t\t></BootstrapTable>\n\t\t\t<ResponsiveTable breakpoint={\"lg\"} columns={columns} data={tokensRow} direction={\"rtl\"} />\n\n\t\t\t{isModalOpenState && aTokenDataState && (\n\t\t\t\t<LendingModalContainer\n\t\t\t\t\tshow={isModalOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t\tisLending={isLendingState}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default withBalance(LendingBalance);\n","import { Row, Col } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { BigNumber } from \"@0x/utils\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { TYPE } from \"../../../theme\";\nimport { toast } from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.Black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nconst BorrowTokenModal = (props) => {\n\tconst {\n\t\ttokenBalance,\n\t\tcloseModal,\n\t\tethBalance,\n\t\tisEth,\n\t\twethToken,\n\t\taToken,\n\t\tavailableForBorrow,\n\t\tshow,\n\t\t...restProps\n\t} = props;\n\tconst [error, setError] = useState({\n\t\tbtnMsg: null,\n\t\tcardMsg: null,\n\t});\n\tconst [amount, setAmount] = useState(new BigNumber(0));\n\tconst { t } = useTranslation();\n\n\tconst theme = useTheme();\n\n\tuseEffect(() => {\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tsetError({\n\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t});\n\t\t}\n\t}, [ethBalance]);\n\n\tconst { variableBorrowRate } = aToken;\n\tconst { token } = tokenBalance;\n\tlet coinSymbol;\n\tlet maxBalance = availableForBorrow;\n\tlet decimals;\n\tlet displayDecimals;\n\n\tif (isEth) {\n\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\tdecimals = 18;\n\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t} else if (tokenBalance) {\n\t\tdisplayDecimals = token.displayDecimals;\n\t\tdecimals = token.decimals;\n\t\tmaxBalance = availableForBorrow;\n\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t} else {\n\t\treturn null;\n\t}\n\n\tconst btnPrefix = \"Borrow \";\n\tconst balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\tconst isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n\tconst onUpdateAmount = (newValue) => {\n\t\tsetAmount(newValue);\n\t};\n\tconst onSetMax = () => {\n\t\tsetAmount(availableForBorrow);\n\t};\n\tconst onSubmit = () => {\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\n\t\tprops.onSubmit(amount, token, aToken, isEth);\n\t};\n\n\treturn (\n\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t{t(\"borrow.title\")} {coinSymbol}\n\t\t\t\t\t\t</Title>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\tonUserInput={onUpdateAmount}\n\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\tlabel={t(\"wantToBorrow\")}\n\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.borrowRate\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{variableBorrowRate.div(\"1e27\").multipliedBy(100).toFixed(5)} %\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.available\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\tclassName={`btn btn-${error && error.btnMsg ? \"danger\" : \"primary\"}`}\n\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n};\n\nexport default BorrowTokenModal;\n","import { Row, Col } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { BigNumber } from \"@0x/utils\";\nimport { useDispatch } from \"react-redux\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport { TYPE } from \"../../../theme\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { toast } from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.Black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nconst RepayTokenModal = (props) => {\n\tconst {\n\t\ttokenBalance,\n\t\tcloseModal,\n\t\tethBalance,\n\t\tisEth,\n\t\twethToken,\n\t\taToken,\n\t\tborrowedBalance,\n\t\tshow,\n\t\t...restProps\n\t} = props;\n\tconst [error, setError] = useState({\n\t\tbtnMsg: null,\n\t\tcardMsg: null,\n\t});\n\tconst [amount, setAmount] = useState(null);\n\tconst [isNotEnoughBalance, setIsNotEnoughBalance] = useState(false);\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tuseEffect(() => {\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tsetError({\n\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t});\n\t\t}\n\t\tif (isEth) {\n\t\t\tsetIsNotEnoughBalance(ethBalance.isLessThanOrEqualTo(borrowedBalance));\n\t\t} else {\n\t\t\tsetIsNotEnoughBalance(tokenBalance.balance.isLessThanOrEqualTo(borrowedBalance));\n\t\t}\n\t}, [ethBalance, tokenBalance]);\n\n\tlet coinSymbol;\n\tlet maxBalance = new BigNumber(0);\n\tlet balance = new BigNumber(0);\n\tlet decimals;\n\tlet displayDecimals;\n\tlet balanceInShort;\n\n\tconst { token } = tokenBalance;\n\tif (isEth) {\n\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\tdecimals = 18;\n\t\tmaxBalance = borrowedBalance || new BigNumber(0);\n\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t\tbalance = ethBalance;\n\t\tbalanceInShort = maxBalance.minus(ethBalance);\n\t} else if (tokenBalance) {\n\t\tdisplayDecimals = token.displayDecimals;\n\t\tdecimals = token.decimals;\n\t\tmaxBalance = borrowedBalance || new BigNumber(0);\n\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t\tbalanceInShort = maxBalance.minus(tokenBalance.balance);\n\t\tbalance = tokenBalance.balance;\n\t} else {\n\t\treturn null;\n\t}\n\n\tconst btnPrefix = \"Repay \";\n\tconst balanceBorrowedInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\tconst balanceInUnits = tokenAmountInUnits(balance, decimals, displayDecimals);\n\tconst displayBalanceInShort = tokenAmountInUnits(balanceInShort, decimals, displayDecimals + 1);\n\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\tconst isSubmitAllowed =\n\t\tamount === null || (amount && amount.isGreaterThan(maxBalance)) || (amount && amount.isEqualTo(0));\n\tconst onUpdateAmount = (newValue) => {\n\t\tsetAmount(newValue);\n\t};\n\tconst onSetMax = () => {\n\t\tif (isEth) {\n\t\t\tconst bal = ethBalance.isLessThanOrEqualTo(maxBalance) ? ethBalance : maxBalance;\n\t\t\tsetAmount(bal);\n\t\t} else if (tokenBalance) {\n\t\t\tconst bal = tokenBalance.balance.isLessThanOrEqualTo(maxBalance) ? tokenBalance.balance : maxBalance;\n\t\t\tsetAmount(bal);\n\t\t}\n\t};\n\n\tconst onSubmit = () => {\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t\tconst amountSubmit = amount || new BigNumber(0);\n\t\tprops.onSubmit(amountSubmit, token, aToken, isEth);\n\t};\n\n\treturn (\n\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t{t(\"repay\")} {coinSymbol}\n\t\t\t\t\t\t</Title>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\tonUserInput={onUpdateAmount}\n\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\tlabel={t(\"wantToRepay\")}\n\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.amountBorrowed\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceBorrowedInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.amountAvailable\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\tclassName={`btn btn-${error && error.btnMsg ? \"danger\" : \"primary\"}`}\n\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n};\n\nexport default RepayTokenModal;\n","import React, { useMemo, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\n\nimport {\n\tgetAaveCurrency,\n\tgetAaveLoadingState,\n\tgetAaveReservesGQLResponse,\n\tgetAaveUserAccountData,\n\tgetATokensData,\n\tgetTokensPrice,\n} from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { setAaveCurrency } from \"../../../state/aave/actions\";\nimport { getKnownTokens, isWethToken } from \"../../../utils/known_tokens\";\nimport { formatTokenSymbol, tokenAmountInUnits } from \"../../../utils/spot/tokens\";\nimport { Protocol } from \"../../../utils/aave/types\";\nimport {\n\tstartBorrowTokenSteps,\n\tstartLendingTokenSteps,\n\tstartRepayTokenSteps,\n\tstartUnLendingTokenSteps,\n} from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { StyledLink, TradeButton } from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport BorrowTokenModal from \"./BorrowTokenModal\";\nimport RepayTokenModal from \"./RepayTokenModal\";\nimport { Token } from \"@uniswap/sdk\";\nimport { sortedData } from \"../../../lib/helper\";\nimport { useTranslation } from \"react-i18next\";\n\nconst LogoContainer = styled.div`\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 32px;\n\tbackground-color: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tborder-radius: 24px;\n\t}\n`;\n\nconst Symbol = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 1rem;\n\tmargin-right: 10px;\n\tfont-weight: 500;\n`;\n\nconst Name = styled.span`\n\tfont-weight: 400;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 400;\n\t}\n`;\n\nconst CellText = styled.span`\n\tfont-weight: 500;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t&.font-size-base {\n\t\tfont-size: 1rem;\n\t}\n\n\t@media (max-width: 991px) {\n\t\tfont-weight: 700;\n\n\t\t&.label {\n\t\t\tfont-weight: 500;\n\t\t}\n\t}\n`;\n\nconst BorrowBalance = (props) => {\n\tconst [isEthState, setIsEthState] = useState(false);\n\tconst [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n\tconst [isStableCoin, setIsStableCoin] = useState(false);\n\tconst { t } = useTranslation();\n\tconst [isModalBorrowOpenState, setIsModalBorrowOpenState] = useState(false);\n\tconst [isModalRepayOpenState, setIsModalRepayOpenState] = useState(false);\n\tconst [isSubmittingState, setIsSubmittingState] = useState(false);\n\tconst [aTokenDataState, setATokenDataState] = useState();\n\tconst [isBorrowState, setIsBorrowState] = useState(true);\n\tconst [tokenBalanceState, setTokenBalanceState] = useState();\n\tconst [availableForBorrowState, setAvailableForBorrowState] = useState(new BigNumber(0));\n\tconst [borrowBalanceState, setBorrowBalanceState] = useState(new BigNumber(0));\n\tconst [sort, setSort] = useState({\n\t\tfield: false,\n\t\torder: \"desc\",\n\t});\n\n\tconst { account } = useActiveWeb3React();\n\tconst reserves = useSelector(getAaveReservesGQLResponse);\n\tconst userAccountData = useSelector(getAaveUserAccountData);\n\tconst dispatch = useDispatch();\n\tconst aTokensData = useSelector(getATokensData);\n\tconst tokensPrice = useSelector(getTokensPrice);\n\tconst tokenBalances = props.tokensBalance;\n\tconst ethBalance = props.ethBalance;\n\tconst ethTotalBalance = props.totalEthBalance;\n\tconst wethTokenBalance = props.wethBalance;\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst currencySelector = useSelector(getAaveCurrency);\n\n\tconst innerTabs = [\n\t\t{\n\t\t\tactive: currencySelector === \"NATIVE\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"NATIVE\")),\n\t\t\ttext: \"Native\",\n\t\t},\n\t\t{\n\t\t\tactive: currencySelector === \"USD\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"USD\")),\n\t\t\ttext: \"USD\",\n\t\t},\n\t];\n\n\tconst openBorrowModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token, availableBalanceForBorrowToken] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tsetIsModalBorrowOpenState(true);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetAvailableForBorrowState(availableBalanceForBorrowToken);\n\t\tsetIsBorrowState(true);\n\t};\n\n\tconst openRepayModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token, borrowBalance] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetBorrowBalanceState(borrowBalance || new BigNumber(0));\n\t\tsetIsModalRepayOpenState(true);\n\t\tsetIsBorrowState(false);\n\t};\n\n\tconst tokensRow = useMemo(() => {\n\t\tconst data = aTokensData.map((tokenD) => {\n\t\t\tconst { token, balance, borrowBalance } = tokenD;\n\n\t\t\tconst { symbol } = token;\n\t\t\tconst reserve = reserves.find((r) => r.aToken.id === tokenD.address);\n\t\t\tconst isEthToken = isWethToken(token);\n\t\t\tconst tokenBalance = tokenBalances.find((tb) => tb.token.symbol === symbol);\n\t\t\tif (isHideZeroBalance) {\n\t\t\t\t/* if ((isEthToken && ethTotalBalance.isEqualTo(0)) && (balance && balance.isEqualTo(0))) {\n                     return null;\n                 }*/\n\n\t\t\t\tif (borrowBalance && borrowBalance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isStableCoin) {\n\t\t\t\tif (!token.isStableCoin) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tokB = isEthToken\n\t\t\t\t? ethTotalBalance || new BigNumber(0)\n\t\t\t\t: (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n\t\t\tlet displayAvailableForBorrowBalance;\n\t\t\tlet displayBorrowedBalance;\n\t\t\tlet availableForBorrow = new BigNumber(0);\n\t\t\tlet availableBalanceForBorrowToken = new BigNumber(0);\n\n\t\t\tif (account && borrowBalance && reserve && userAccountData) {\n\t\t\t\tconst priceInEth = reserve.price.priceInEth;\n\t\t\t\tconst totalAvailableForBorrowETH = userAccountData.availableBorrowsETH;\n\t\t\t\tavailableForBorrow = userAccountData.availableBorrowsETH;\n\t\t\t\tavailableBalanceForBorrowToken = totalAvailableForBorrowETH\n\t\t\t\t\t.dividedBy(new BigNumber(priceInEth).div(new BigNumber(10).pow(token.decimals)))\n\t\t\t\t\t.integerValue(BigNumber.ROUND_DOWN);\n\t\t\t\tconst formattedBorrowedBalance = tokenAmountInUnits(\n\t\t\t\t\tborrowBalance,\n\t\t\t\t\ttoken.decimals,\n\t\t\t\t\ttoken.displayDecimals\n\t\t\t\t);\n\t\t\t\tconst formattedAvailableForBorrowBalance = tokenAmountInUnits(\n\t\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\t\ttoken.decimals,\n\t\t\t\t\ttoken.displayDecimals\n\t\t\t\t);\n\t\t\t\tconst tokenPrice = tokensPrice && tokensPrice.find((t) => t.c_id === token.c_id);\n\t\t\t\tif (currencySelector === \"NATIVE\") {\n\t\t\t\t\tdisplayAvailableForBorrowBalance = Number(formattedAvailableForBorrowBalance);\n\t\t\t\t\tdisplayBorrowedBalance = Number(formattedBorrowedBalance);\n\t\t\t\t} else {\n\t\t\t\t\tdisplayAvailableForBorrowBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd\n\t\t\t\t\t\t\t\t.multipliedBy(new BigNumber(formattedAvailableForBorrowBalance))\n\t\t\t\t\t\t\t\t.toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t\tdisplayBorrowedBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBorrowedBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdisplayAvailableForBorrowBalance = \"-\";\n\t\t\t\tdisplayBorrowedBalance = \"-\";\n\t\t\t}\n\n\t\t\tconst apy = tokenD.variableBorrowRate.dividedBy(\"1e27\").multipliedBy(100).toNumber();\n\n\t\t\tconst tokenName = isEthToken ? \"Ethereum\" : token.name;\n\t\t\tconst tokenSymbol = isEthToken ? \"ETH\" : token.symbol.toUpperCase();\n\n\t\t\treturn {\n\t\t\t\ttoken,\n\t\t\t\tsymbol,\n\t\t\t\ttokenSymbol,\n\t\t\t\ttokenName,\n\t\t\t\tdisplayAvailableForBorrowBalance,\n\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\tdisplayBorrowedBalance,\n\t\t\t\tavailableForBorrow,\n\t\t\t\tborrowBalance,\n\t\t\t\tapy,\n\t\t\t\tbalance,\n\t\t\t\ttokB,\n\t\t\t\tisEthToken,\n\t\t\t\ttokenD,\n\t\t\t};\n\t\t});\n\n\t\treturn sortedData(data, sort);\n\t}, [aTokensData, sort]);\n\n\n\tconst closeBorrowModal = () => {\n\t\tsetIsModalBorrowOpenState(false);\n\t};\n\tconst closeRepayModal = () => {\n\t\tsetIsModalRepayOpenState(false);\n\t};\n\n\tconst handleSubmit = async (amount, token, aToken, isEth) => {\n\t\tsetIsSubmittingState(true);\n\n\t\ttry {\n\t\t\tif (isBorrowState) {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartBorrowTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartRepayTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsSubmittingState(false);\n\t\t\tif (isBorrowState) {\n\t\t\t\tcloseBorrowModal();\n\t\t\t} else {\n\t\t\t\tcloseRepayModal();\n\t\t\t}\n\t\t}\n\t};\n\tconst wethToken = getKnownTokens().getWethToken();\n\tconst onHideZeroBalance = () => {\n\t\tsetIsHideZeroBalance(!isHideZeroBalance);\n\t};\n\tconst onIsStableCoin = () => {\n\t\tsetIsStableCoin(!isStableCoin);\n\t};\n\n\tconst wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n\tconst onTableChange = (type, context) => {\n\t\tif (type === \"sort\") {\n\t\t\tsetSort({\n\t\t\t\tfield: context.sortField,\n\t\t\t\torder: context.sortOrder,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"tokenName\",\n\t\t\ttext: t(\"token\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\tconst currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\tclassName=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LogoContainer>\n\t\t\t\t\t\t\t<CurrencyLogo currency={currency} />\n\t\t\t\t\t\t</LogoContainer>\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n\t\t\t\t\t\t\t<Symbol className={\"font-weight-bold\"}>{row.tokenSymbol}</Symbol>\n\t\t\t\t\t\t\t<Name className={\"font-weight-bold\"}>{row.tokenName}</Name>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayAvailableForBorrowBalance\",\n\t\t\ttext: t(\"borrow.available\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayAvailableForBorrowBalance === 'number' ? `${row.displayAvailableForBorrowBalance} ${row.tokenSymbol}` : row.displayAvailableForBorrowBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayBorrowedBalance\",\n\t\t\ttext: t(\"borrow.borrowBalance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayBorrowedBalance === 'number' ? `${row.displayBorrowedBalance} ${row.tokenSymbol}` : row.displayBorrowedBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"apy\",\n\t\t\ttext: t(\"borrow.borrowRate\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{row.apy.toFixed(6)} %</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"actions\",\n\t\t\ttext: t(\"table.actions\"),\n\t\t\tformatter: (cellContent, row, rowIndex, { openBorrowModal, openRepayModal }) => {\n\t\t\t\tconst {\n\t\t\t\t\ttokB,\n\t\t\t\t\ttokenD,\n\t\t\t\t\tisEthToken,\n\t\t\t\t\ttoken,\n\t\t\t\t\tborrowBalance,\n\t\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\t\tavailableForBorrow,\n\t\t\t\t} = row;\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tonClick={openBorrowModal.bind(\n\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\ttokenD,\n\t\t\t\t\t\t\t\t\tisEthToken,\n\t\t\t\t\t\t\t\t\ttokB,\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tavailableBalanceForBorrowToken\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tdisabled={availableForBorrow.isEqualTo(0) || !account}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"borrow.title\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tvariant={\"warning\"}\n\t\t\t\t\t\t\t\tonClick={openRepayModal.bind(this, tokenD, isEthToken, tokB, token, borrowBalance)}\n\t\t\t\t\t\t\t\tdisabled={(borrowBalance && borrowBalance.isEqualTo(0)) || !account}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"repay\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tisAction: true,\n\t\t\tformatExtraData: {\n\t\t\t\topenBorrowModal,\n\t\t\t\topenRepayModal,\n\t\t\t},\n\t\t},\n\t];\n\n\tconst modals = (\n\t\t<>\n\t\t\t{isModalBorrowOpenState && aTokenDataState && (\n\t\t\t\t<BorrowTokenModal\n\t\t\t\t\tshow={isModalBorrowOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tavailableForBorrow={availableForBorrowState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeBorrowModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isModalRepayOpenState && aTokenDataState && (\n\t\t\t\t<RepayTokenModal\n\t\t\t\t\tshow={isModalRepayOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\tborrowedBalance={borrowBalanceState}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeRepayModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<div className=\"d-flex flex-column\">\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"table-responsive d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n\t\t\t\tbootstrap4\n\t\t\t\tremote\n\t\t\t\tkeyField=\"id\"\n\t\t\t\tdata={tokensRow}\n\t\t\t\tcolumns={columns}\n\t\t\t\tonTableChange={onTableChange}\n\t\t\t></BootstrapTable>\n\t\t\t<ResponsiveTable breakpoint={\"lg\"} columns={columns} data={tokensRow} direction={\"rtl\"} />\n\n\t\t\t{modals}\n\t\t</div>\n\t);\n};\n\nexport default withBalance(BorrowBalance);\n","import { Col, Nav, Row, Tab } from \"react-bootstrap\";\nimport styled from \"styled-components\";\n\nimport { ResponsiveCard } from \"../../../components/Card\";\nimport React, { useEffect } from \"react\";\nimport { GET_AAVE_RESERVES } from \"../../../services/aave/gql\";\nimport { useQuery } from \"@apollo/client\";\nimport { getAaveGraphClient } from \"../../../services/aave/aave\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { getAaveLoadingState } from \"../../../state/selectors\";\nimport { fetchAave, initAave, setAaveReservesGQLResponse } from \"../../../state/aave/actions\";\nimport { AaveLoadingState } from \"../../../utils/aave/types\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport LendingBalance from \"../LendingBalance\";\nimport BorrowBalance from \"../BorrowBalance\";\nimport { useTranslation } from \"react-i18next\";\n\nconst HeaderCol = styled(Col)`\n\tmargin: -10px 0 20px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-bottom: 25px;\n\t}\n`;\n\nconst CustomNav = styled(Nav)`\n\tmargin-left: -30px !important;\n\tmargin-right: -30px !important;\n\toverflow: auto;\n\n\t@media (min-width: 768px) {\n\t\tmargin-left: -10px !important;\n\t\tmargin-right: -10px !important;\n\t}\n`;\n\nconst CustomNavItem = styled(Nav.Item)`\n\tflex-grow: initial !important;\n\n\tpadding: 0 10px 10px;\n\n\t@media (max-width: 767px) {\n\t\tpadding: 0 5px 10px;\n\t}\n\n\t&:first-child {\n\t\t@media (max-width: 767px) {\n\t\t\tpadding-left: 30px;\n\t\t}\n\t}\n\t&:last-child {\n\t\t@media (max-width: 767px) {\n\t\t\tpadding-right: 30px;\n\t\t}\n\t}\n`;\nconst CustomNavLink = styled(Nav.Link)`\n\tborder-radius: 18px !important;\n\tcolor: ${({ theme }) => theme.primary};\n\tbackground-color: ${({ theme }) => theme.primaryLight};\n\twhite-space: nowrap;\n\tpadding: 14px 24px;\n\tmin-height: 56px;\n\tfont-weight: 500;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t@media (max-width: 767px) {\n\t\tpadding: 6px 15px;\n\t\tfont-size: 1rem;\n\t\tmin-height: 32px;\n\t\tborder-radius: 12px !important;\n\t}\n\n\t&:hover {\n\t\tcolor: ${({ theme }) => theme.primary};\n\t}\n\n\t&.active {\n\t\tcolor: ${({ theme }) => theme.text1};\n\t\tbackground-color: ${({ theme }) => theme.primary};\n\t}\n`;\n\nconst BorrowCommon = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst { loading, error, data } = useQuery(GET_AAVE_RESERVES, {\n\t\tclient: getAaveGraphClient(),\n\t\tpollInterval: 1000,\n\t});\n\tconst dispatch = useDispatch();\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (!loading && !error && data) {\n\t\t\tdispatch(setAaveReservesGQLResponse(data.reserves));\n\t\t\tif (aaveLoadingState === AaveLoadingState.NotLoaded) {\n\t\t\t\tdispatch(initAave(account));\n\t\t\t} else {\n\t\t\t\tdispatch(fetchAave(account));\n\t\t\t}\n\t\t}\n\t}, [loading, data, account]);\n\n\t// Update Aaave state each 60 seconds\n\tuseInterval(async () => {\n\t\tif (account && data && !loading && !error) {\n\t\t\tdispatch(fetchAave(account));\n\t\t}\n\t}, 60 * 1000);\n\n\treturn (\n\t\t<ResponsiveCard>\n\t\t\t<Tab.Container defaultActiveKey=\"deposit\">\n\t\t\t\t<Row>\n\t\t\t\t\t<HeaderCol\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex flex-column-reverse flex-lg-row align-items-stretch align-items-lg-start justify-content-start justify-content-lg-between\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CustomNav fill variant=\"pills\" className={\"d-flex flex-row align-items-center flex-nowrap\"}>\n\t\t\t\t\t\t\t<CustomNavItem>\n\t\t\t\t\t\t\t\t<CustomNavLink eventKey=\"deposit\">{t(\"deposit\")}</CustomNavLink>\n\t\t\t\t\t\t\t</CustomNavItem>\n\t\t\t\t\t\t\t<CustomNavItem>\n\t\t\t\t\t\t\t\t<CustomNavLink eventKey=\"borrow\">{t(\"borrow.title\")}</CustomNavLink>\n\t\t\t\t\t\t\t</CustomNavItem>\n\t\t\t\t\t\t</CustomNav>\n\t\t\t\t\t</HeaderCol>\n\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Tab.Content className={\"bg-transparent\"}>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"deposit\">\n\t\t\t\t\t\t\t\t<LendingBalance />\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"borrow\">\n\t\t\t\t\t\t\t\t<BorrowBalance />\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t</Tab.Content>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Tab.Container>\n\t\t</ResponsiveCard>\n\t);\n};\n\nexport default BorrowCommon;\n","import { Modal } from \"../../../components/Modal/bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Web3 from \"web3\";\nimport { Web3Wrapper } from \"@0x/web3-wrapper\";\n\nimport { getStepsModalCurrentStep } from \"../../../state/selectors\";\nimport { setStepsModalCurrentStep } from \"../../../state/spotUI/actions\";\nimport { CHAIN_ID, StepKind } from \"../../../constants\";\n\nimport UnlockToken from \"./modals/UnlockToken\";\nimport React, { useEffect, useState } from \"react\";\nimport { TransactionSubmittedContent } from \"../../../components/TransactionConfirmationModal\";\nimport WrapEth from \"./modals/WrapEth\";\nimport LendingToken from \"./modals/LendingToken\";\nimport BorrowToken from \"./modals/BorrowToken\";\n\nlet web3;\nlet web3Wrapper;\n\nconst ModalProvider = (props) => {\n\tconst [submitted, setSubmitted] = useState(false);\n\tconst [txHash, setTxHash] = useState(null);\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst dispatch = useDispatch();\n\tconst isOpen = currentStep !== null;\n\n\tuseEffect(() => {\n\t\tweb3 = new Web3(Web3.givenProvider || new Web3.providers.HttpProvider(process.env.REACT_APP_NETWORK_URL));\n\t\tif (web3.currentProvider) {\n\t\t\tweb3Wrapper = new Web3Wrapper(web3.currentProvider);\n\t\t}\n\t}, []);\n\n\tconst hideModal = () => {\n\t\tsetSubmitted(false);\n\t\tsetTxHash(null);\n\t\tdispatch(setStepsModalCurrentStep(null));\n\t};\n\n\tconst onDone = (tx) => {\n\t\tsetSubmitted(true);\n\t\tsetTxHash(tx);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{props.children}\n\t\t\t<Modal show={isOpen} centered onHide={hideModal}>\n\t\t\t\t<Modal.Body className={\"px-0 py-0\"}>\n\t\t\t\t\t{!submitted ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.ToggleTokenLock && (\n\t\t\t\t\t\t\t\t<UnlockToken onDismiss={hideModal} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.WrapEth && (\n\t\t\t\t\t\t\t\t<WrapEth onDismiss={hideModal} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.LendingToken && (\n\t\t\t\t\t\t\t\t<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.UnLendingToken && (\n\t\t\t\t\t\t\t\t<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.RepayToken && (\n\t\t\t\t\t\t\t\t<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.BorrowToken && (\n\t\t\t\t\t\t\t\t<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<TransactionSubmittedContent chainId={CHAIN_ID} hash={txHash} onDismiss={hideModal} />\n\t\t\t\t\t)}\n\t\t\t\t</Modal.Body>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ModalProvider;\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { UNLIMITED_ALLOWANCE_IN_BASE_UNITS } from \"../../../../constants\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { getContractWrappers } from \"../../../../utils/spot/contractWrapper\";\nimport { ERC20TokenContract } from \"@0x/contract-wrappers\";\nimport { stepsModalAdvanceStep } from \"../../../../state/spotUI/actions\";\n\nconst UnlockToken = (props) => {\n\tconst [unlocking, setUnlocking] = useState(false);\n\tconst { account, library } = useActiveWeb3React();\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst { address, token } = currentStep;\n\tconst web3 = props.web3;\n\tconst dispatch = useDispatch();\n\n\tconst unlockToken = async () => {\n\t\ttry {\n\t\t\tconst contractWrappers = await getContractWrappers(web3.getProvider());\n\t\t\tconst approveAddress = address ? address : contractWrappers.contractAddresses.erc20Proxy;\n\n\t\t\tconst erc20Token = new ERC20TokenContract(token.address, contractWrappers.getProvider());\n\t\t\tconst amount = UNLIMITED_ALLOWANCE_IN_BASE_UNITS;\n\n\t\t\tconst tx = await erc20Token.approve(approveAddress, amount).sendTransactionAsync({\n\t\t\t\tfrom: account,\n\t\t\t});\n\t\t\tsetUnlocking(true);\n\t\t\tawait web3.awaitTransactionSuccessAsync(tx);\n\n\t\t\tif (tx) {\n\t\t\t\tsetUnlocking(false);\n\t\t\t\tdispatch(stepsModalAdvanceStep());\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetUnlocking(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tunlockToken();\n\t}, [currentStep]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={unlocking ? () => null : props.onDismiss}\n\t\t\tpendingText={unlocking ? \"Unlocking\" : \"Waiting for confirmation\"}\n\t\t/>\n\t);\n};\n\nexport default UnlockToken;\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { UNLIMITED_ALLOWANCE_IN_BASE_UNITS } from \"../../../../constants\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { getContractWrappers } from \"../../../../utils/spot/contractWrapper\";\nimport { ERC20TokenContract } from \"@0x/contract-wrappers\";\nimport { stepsModalAdvanceStep, updateWethBalance } from \"../../../../state/spotUI/actions\";\nimport withBalance from \"../../../../components/hoc/withBalance\";\nimport {\n\tINSUFFICIENT_ETH_BALANCE_FOR_DEPOSIT,\n\tUNEXPECTED_ERROR,\n\tUSER_DENIED_TRANSACTION_SIGNATURE_ERR,\n} from \"../../../../lib/exceptions/common\";\nimport { tokenAmountInUnits } from \"../../../../utils/spot/tokens\";\nimport { ConvertBalanceMustNotBeEqualException } from \"../../../../lib/exceptions/convertBalance\";\n\nconst WrapEth = (props) => {\n\tconst [wrapping, setWrapping] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst { wethBalance } = props;\n\tconst { currentWethBalance, newWethBalance } = currentStep;\n\tconst web3 = props.web3;\n\tconst dispatch = useDispatch();\n\n\tconst amount = newWethBalance.minus(currentWethBalance);\n\tconst isEthToWeth = amount.isGreaterThan(0);\n\tconst convertingFrom = isEthToWeth ? \"ETH\" : \"wETH\";\n\n\tconst wrapEthereum = async () => {\n\t\ttry {\n\t\t\tconst convertTxHash = await dispatch(\n\t\t\t\tupdateWethBalance(wethBalance, newWethBalance, account, web3.getProvider())\n\t\t\t);\n\t\t\tsetWrapping(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(convertTxHash);\n\n\t\t\tif (tx) {\n\t\t\t\tsetWrapping(false);\n\t\t\t\tdispatch(stepsModalAdvanceStep());\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetWrapping(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twrapEthereum();\n\t}, [currentStep]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={wrapping ? () => null : props.onDismiss}\n\t\t\tpendingText={wrapping ? \"Wrapping...\" : `Convert ${convertingFrom}`}\n\t\t/>\n\t);\n};\n\nexport default withBalance(WrapEth);\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../../utils/spot/tokens\";\nimport { getGasInfo, getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { lendingDefiToken, unLendingDefiToken } from \"../../../../state/defi/actions\";\n\nconst LendingToken = (props) => {\n\tconst [loading, setLoading] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\n\tconst { step, onSubmitLendingToken, onSubmitUnLendingToken } = props;\n\tconst { amount, token, isEth, defiToken, isLending } = step;\n\n\tconst coinSymbol = isEth ? tokenSymbolToDisplayString(\"ETH\") : tokenSymbolToDisplayString(token.symbol);\n\tconst decimals = isEth ? 18 : step.token.decimals;\n\tconst amountOfTokenString = `${tokenAmountInUnits(\n\t\tstep.amount,\n\t\tdecimals,\n\t\tstep.token.displayDecimals\n\t).toString()} ${coinSymbol}`;\n\n\tconst web3 = props.web3;\n\n\tconst Lending = async () => {\n\t\ttry {\n\t\t\tconst txHash = isLending\n\t\t\t\t? await onSubmitLendingToken(token, defiToken, amount, isEth, account)\n\t\t\t\t: await onSubmitUnLendingToken(token, defiToken, amount, isEth, account);\n\t\t\tsetLoading(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(txHash);\n\t\t\tif (tx) {\n\t\t\t\tsetLoading(false);\n\t\t\t\tprops.onDone(txHash);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tLending();\n\t}, [step]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={loading ? () => null : props.onDismiss}\n\t\t\tpendingText={\n\t\t\t\tloading\n\t\t\t\t\t? `Pending Transaction...`\n\t\t\t\t\t: `Confirm on ${account} to ${isLending ? \"deposit\" : \"withdraw\"} ${amountOfTokenString}.`\n\t\t\t}\n\t\t/>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tstep: getStepsModalCurrentStep(state),\n\t\tgasInfo: getGasInfo(state),\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonSubmitLendingToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(lendingDefiToken(token, defiToken, amount, isEth, account)),\n\t\tonSubmitUnLendingToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(unLendingDefiToken(token, defiToken, amount, isEth, account)),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { getUpdateAToken } from \"../../services/aave/aave\";\nimport { Protocol } from \"../../utils/aave/types\";\nimport { borrowAToken, lendingAToken, repayAToken, setATokenBalance, unLendingAToken } from \"../aave/actions\";\nimport { getDefiProtocol } from \"../selectors\";\n\nexport const lendingDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(lendingAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const borrowDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(borrowAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const repayDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(repayAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const unLendingDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(unLendingAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const updateDefiTokenBalance = (defiToken, ethAccount) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst token = await getUpdateAToken(ethAccount, defiToken);\n\t\t\t\tdispatch(setATokenBalance(token));\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../../utils/spot/tokens\";\nimport { getGasInfo, getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { borrowDefiToken, repayDefiToken } from \"../../../../state/defi/actions\";\n\nconst LendingToken = (props) => {\n\tconst [loading, setLoading] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\n\tconst { step, onSubmitBorrowToken, onSubmitRepayToken } = props;\n\tconst { amount, token, isEth, defiToken, isBorrow } = step;\n\n\tconst coinSymbol = isEth ? tokenSymbolToDisplayString(\"ETH\") : tokenSymbolToDisplayString(token.symbol);\n\tconst decimals = isEth ? 18 : step.token.decimals;\n\n\tconst amountOfTokenString = `${tokenAmountInUnits(\n\t\tstep.amount,\n\t\tdecimals,\n\t\tstep.token.displayDecimals\n\t).toString()} ${coinSymbol}`;\n\n\tconst web3 = props.web3;\n\n\tconst Borrowing = async () => {\n\t\ttry {\n\t\t\tconst txHash = isBorrow\n\t\t\t\t? await onSubmitBorrowToken(token, defiToken, amount, isEth, account)\n\t\t\t\t: await onSubmitRepayToken(token, defiToken, amount, isEth, account);\n\n\t\t\tsetLoading(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(txHash);\n\t\t\tif (tx) {\n\t\t\t\tsetLoading(false);\n\t\t\t\tprops.onDone(txHash);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tBorrowing();\n\t}, [step]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={loading ? () => null : props.onDismiss}\n\t\t\tpendingText={\n\t\t\t\tloading\n\t\t\t\t\t? `Pending Transaction...`\n\t\t\t\t\t: `Confirm on ${account} to ${isBorrow ? \"Borrow\" : \"Repay\"} ${amountOfTokenString}.`\n\t\t\t}\n\t\t/>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tstep: getStepsModalCurrentStep(state),\n\t\tgasInfo: getGasInfo(state),\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonSubmitBorrowToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(borrowDefiToken(token, defiToken, amount, isEth, account)),\n\t\tonSubmitRepayToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(repayDefiToken(token, defiToken, amount, isEth, account)),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { Row, Col } from \"react-bootstrap\";\n\nimport GraphQlProvider from \"./Provider\";\nimport Page from \"../../components/Page\";\nimport GlobalOverall from \"./GlobalOverall\";\nimport BorrowCommon from \"./Common\";\nimport \"./style.scss\";\nimport ModalProvider from \"./ModalProvider\";\nimport styled from \"styled-components\";\n\nconst StyledRow = styled(Row)`\n\tmargin-top: 40px;\n\n\t@media (max-width: 767px) {\n\t\tmargin-top: 20px;\n\t}\n`;\n\nconst Borrow = (props) => {\n\treturn (\n\t\t<Page>\n\t\t\t<GraphQlProvider>\n\t\t\t\t<ModalProvider />\n\t\t\t\t<StyledRow>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<GlobalOverall />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowCommon />\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</GraphQlProvider>\n\t\t</Page>\n\t);\n};\n\nexport default Borrow;\n"],"sourceRoot":""}