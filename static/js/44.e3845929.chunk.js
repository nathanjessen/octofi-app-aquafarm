(this["webpackJsonpoctofi-app-aquafarm"]=this["webpackJsonpoctofi-app-aquafarm"]||[]).push([[44],{3145:function(t){t.exports=JSON.parse('{"a":[{"constant":true,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]}')},3160:function(t,e,n){"use strict";n.d(e,"a",(function(){return lt})),n.d(e,"b",(function(){return pt})),n.d(e,"g",(function(){return dt})),n.d(e,"h",(function(){return bt})),n.d(e,"f",(function(){return ht})),n.d(e,"c",(function(){return yt})),n.d(e,"d",(function(){return vt})),n.d(e,"e",(function(){return Ot}));var r=n(40),a=n(1),s=n.n(a),c=n(63),i=n(30),o=n(748),u=(n(298),n(3685)),l=n.n(u),p=n(3686),d=n(3145),f=n(78),b={1:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-beta",42:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-kovan"};function m(){return(m=Object(i.a)(s.a.mark((function t(e,n,a,c,i,o){var u,l,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={poolShares:{__args:{where:{userAddress_in:c.map((function(t){return t.toLowerCase()})),balance_gt:0},first:1e3,orderBy:"balance",orderDirection:"desc"},userAddress:{id:!0},balance:!0,poolId:{totalShares:!0,tokens:{id:!0,balance:!0}}}},"latest"!==o&&(u.poolShares.__args.block={number:o}),t.next=4,bt(b[n],u);case 4:return l=t.sent,p={},l&&l.poolShares&&l.poolShares.forEach((function(t){return t.poolId.tokens.map((function(e){var n=e.id.split("-");if(Object(r.a)(n,2)[1]===i.address.toLowerCase()){var a=Object(f.a)(t.userAddress.id);p[a]||(p[a]=0),p[a]=p[a]+e.balance/t.poolId.totalShares*t.balance}}))})),t.abrupt("return",p||{});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=n(752);function j(t,e){return(t.args||["%{address}"]).map((function(t){return"string"===typeof t?t.replace(/%{address}/g,e):t}))}function y(){return(y=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,[c.methodABI],a.map((function(t){return[c.address,c.methodABI.name,j(c,t)]})),{blockTag:o});case 3:return u=t.sent,t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.toString(),c.decimals))]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var v=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function O(t,e,n,r,a,s){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,v,a.map((function(t){return[c.address,"balanceOf",[t]]})),{blockTag:o});case 3:return u=t.sent,t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.toString(),c.decimals))]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e,n,r,a,c,i);case 2:return o=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(o).map((function(t){return[t[0],t[1]*c.coeff]}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e,n,r,a,c,i);case 2:return o=t.sent,u=Object.values(o).reduce((function(t,e){return t+e}),0),t.abrupt("return",Object.fromEntries(Object.entries(o).map((function(t){return[t[0],c.total*t[1]/u]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e,n,r,a,c,i);case 2:return o=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(o).map((function(t){return[t[0],Math.sqrt(t[1])]}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e,n,r,a,c,i);case 2:return o=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(o).map((function(t){return[t[0],t[1]>(c.minBalance||0)?1:0]}))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e,n,r,a,s){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(s.a.mark((function t(e,n,a,c,i,o){var u,l,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={delegations:{__args:{where:{delegate_in:c.map((function(t){return t.toLowerCase()})),delegator_not_in:c.map((function(t){return t.toLowerCase()})),space_in:["",e]},first:1e3},delegator:!0,space:!0,delegate:!0}},"latest"!==o&&(u.delegations.__args.block={number:o}),t.next=4,bt(pt[n],u);case 4:if((l=t.sent)&&l.delegations){t.next=7;break}return t.abrupt("return",{});case 7:return p={},l.delegations.forEach((function(t){return p[t.delegator]=t.delegate})),l.delegations.filter((function(t){return""!==t.space})).forEach((function(t){return p[t.delegator]=t.delegate})),t.abrupt("return",Object.fromEntries(c.map((function(t){return[t,Object.entries(p).filter((function(e){var n=Object(r.a)(e,2)[1];return t.toLowerCase()===n})).map((function(t){return Object(r.a)(t,1)[0]}))]}))));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e,n,r,a,c,i);case 2:if(o=t.sent,0!==Object.keys(o).length){t.next=5;break}return t.abrupt("return",{});case 5:return console.debug("Delegations",o),t.next=8,O(e,n,r,Object.values(o).reduce((function(t,e){return t.concat(e)})),c,i);case 8:return u=t.sent,console.debug("Delegators score",u),t.abrupt("return",Object.fromEntries(a.map((function(t){return[t,o[t]?o[t].reduce((function(t,e){return t+u[e]}),0):0]}))));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,d.a,a.map((function(t){return[lt[n],"getEthBalance",[t]]})),{blockTag:o});case 3:return u=t.sent,t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.toString(),18))]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _={1:"0x9ef05f7f6deb616fd37ac3c959a2ddd25a54e4f5"},M=[{constant:!0,inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function B(){return(B=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,M,a.map((function(t){return[_[n],"deposits",[t]]})),{blockTag:o});case 3:return u=t.sent,t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.toString(),c.decimals))]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P={1:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984"},A=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"getCurrentVotes",outputs:[{internalType:"uint96",name:"",type:"uint96"}],payable:!1,stateMutability:"view",type:"function"}];function D(){return(D=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,A,a.map((function(t){return[P[n],"getCurrentVotes",[t.toLowerCase()],{blockTag:o}]})));case 3:return u=t.sent,t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.toString(),c.decimals))]}))));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var F=[{constant:!0,inputs:[],name:"getPricePerFullShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function z(){return(z=Object(i.a)(s.a.mark((function t(e,n,a,c,i,o){var u,l,p,d,f,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="number"===typeof o?o:"latest",t.next=3,Promise.all([O(e,n,a,c,i,o),dt(n,a,F,[[i.address,"getPricePerFullShare",[]]],{blockTag:u})]);case 3:return l=t.sent,p=Object(r.a)(l,2),d=p[0],f=Object(r.a)(p[1],1),b=f[0],b=parseFloat(Object(h.a)(b.toString(),18)),t.abrupt("return",Object.fromEntries(Object.entries(d).map((function(t){return[t[0],t[1]*b]}))));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"memberAddressByDelegateKey",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"members",outputs:[{internalType:"address",name:"delegateKey",type:"address"},{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"uint256",name:"loot",type:"uint256"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"highestIndexYesVote",type:"uint256"},{internalType:"uint256",name:"jailed",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function L(){return(L=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,I,a.map((function(t){return[c.address,"memberAddressByDelegateKey",[t]]})),{blockTag:o});case 3:return u=t.sent,t.next=6,dt(n,r,I,u.filter((function(t){return"0x0000000000000000000000000000000000000000"!==t.toString()})).map((function(t){return[c.address,"members",[t.toString()]]})),{blockTag:o});case 6:return l=t.sent,t.abrupt("return",Object.fromEntries(l.map((function(t,e){return[a[e],parseFloat(Object(h.a)(t.shares.toString(),c.decimals))]}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var V={1:"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2"};function q(){return(q=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u,l,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={users:{__args:{where:{id_in:a.map((function(t){return t.toLowerCase()}))},first:1e3},id:!0,liquidityPositions:{__args:{where:{liquidityTokenBalance_gt:0}},liquidityTokenBalance:!0,pair:{id:!0,token0:{id:!0},reserve0:!0,token1:{id:!0},reserve1:!0,totalSupply:!0}}}},"latest"!==i&&(o.users.liquidityPositions.__args.block={number:i}),u=c.address.toLowerCase(),t.next=5,bt(V[n],o);case 5:return l=t.sent,p={},l&&l.users&&l.users.forEach((function(t){t.liquidityPositions.filter((function(t){return t.pair.token0.id==u||t.pair.token1.id==u})).forEach((function(e){var n=e.pair.reserve0/e.pair.totalSupply,r=e.pair.reserve1/e.pair.totalSupply,a=e.pair.token0.id==u?n*e.liquidityTokenBalance:r*e.liquidityTokenBalance,s=Object(f.a)(t.id);p[s]||(p[s]=0),p[s]=p[s]+a}))})),t.abrupt("return",p||{});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"}],J=[{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"}],H="0x73feaa1eE314F8c655E354234017bE2193C9E24E";function W(){return(W=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u,l,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,O(e,n,r,a,c,i);case 3:return u=t.sent,t.next=6,dt(n,r,J,a.map((function(t){return[H,"userInfo",["0",t]]})),{blockTag:o});case 6:return l=t.sent,t.next=9,Promise.all(c.chefAddresses.map((function(t){return dt(n,r,Y,a.map((function(e){return[t.address,"userInfo",[e],{blockTag:o}]})),{blockTag:o})})));case 9:return p=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(u).map((function(t,e){return[t[0],t[1]+l.reduce((function(t,e,n){return t+parseFloat(Object(h.a)(e.amount.toString(),18))}),0)+p.reduce((function(t,n,r){return t+parseFloat(Object(h.a)(n[e].amount.toString(),c.chefAddresses[r].decimals))}),0)]}))));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var K=[{constant:!0,inputs:[{name:"",type:"address"}],name:"issuanceData",outputs:[{name:"initialDebtOwnership",type:"uint256"},{name:"debtEntryIndex",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],G="0x4b9Ca5607f1fF8019c1C6A3c2f0CC8de622D5B82";function Q(){return(Q=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,K,a.map((function(t){return[G,"issuanceData",[t]]})),{blockTag:o});case 3:return u=t.sent,l=function(t){var e=1e5*t;return Math.sqrt(e)},t.abrupt("return",Object.fromEntries(u.map((function(t,e){return[a[e],l(parseFloat(Object(h.a)(t.initialDebtOwnership.toString(),27)))]}))));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"borrowBalanceStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function U(){return(U=Object(i.a)(s.a.mark((function t(e,n,a,c,i,o){var u,l,p,d,f,b,m,j,y,v,O,x,g,w,k,S;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u="number"===typeof o?o:"latest","number"!==typeof o){t.next=5;break}t.t0=o-i.offsetCheck,t.next=10;break;case 5:return t.next=7,a.getBlockNumber();case 7:t.t1=t.sent,t.t2=i.offsetCheck,t.t0=t.t1-t.t2;case 10:return l=t.t0,p=c.map((function(t){return[i.address,"balanceOf",[t]]})),d=c.map((function(t){return[i.address,"borrowBalanceStored",[t]]})),f=p.concat(d),t.next=16,Promise.all([dt(n,a,R,f,{blockTag:u}),dt(n,a,R,c.map((function(t){return[i.address,"balanceOf",[t]]})),{blockTag:l})]);case 16:for(b=t.sent,m=Object(r.a)(b,2),j=m[0],y=m[1],v=j.slice(0,c.length),O=j.slice(c.length),x={},g=0;g<v.length;g++)w=1,i.borrowingRestricted&&(w=0==O[g].toString().localeCompare("0")?1:0),k=parseFloat(Object(h.a)(v[g].toString(),i.decimals)),S=parseFloat(Object(h.a)(y[g].toString(),i.decimals)),x[c[g]]=Math.min(k,S)*w;return t.abrupt("return",x);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var X={1:"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-v2",3:"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-dev"},Z=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function $(){return($=Object(i.a)(s.a.mark((function t(e,n,a,c,i,o){var u,l,p,d,f,b,m,h,j,y;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=i.address,t.next=3,Promise.all([tt(n,c,u,o),nt(n,a,c,i,o)]);case 3:for(l=t.sent,p=Object(r.a)(l,2),d=p[0],f=p[1],b=0,m=Object.entries(f);b<m.length;b++)h=Object(r.a)(m[b],2),j=h[0],y=h[1],d[j]||(d[j]=0),d[j]=d[j]+y;return t.abrupt("return",d||{});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t,e,n,r){return et.apply(this,arguments)}function et(){return(et=Object(i.a)(s.a.mark((function t(e,n,a,c){var i,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={poolShares:{__args:{where:{userAddress_in:n.map((function(t){return t.toLowerCase()})),balance_gt:0},first:1e3,orderBy:"balance",orderDirection:"desc"},userAddress:{id:!0},balance:!0,poolId:{totalShares:!0,tokens:{id:!0,balance:!0}}}},"latest"!==c&&(i.poolShares.__args.block={number:c}),t.next=4,bt(X[e],i);case 4:return o=t.sent,u={},o&&o.poolShares&&o.poolShares.forEach((function(t){return t.poolId.tokens.map((function(e){var n=e.id.split("-"),s=Object(r.a)(n,2)[1];if("string"===typeof a&&s===a.toLowerCase()){var c=Object(f.a)(t.userAddress.id);u[c]||(u[c]=0),u[c]=u[c]+e.balance/t.poolId.totalShares*t.balance}}))})),t.abrupt("return",u||{});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t,e,n,r,a){return rt.apply(this,arguments)}function rt(){return(rt=Object(i.a)(s.a.mark((function t(e,n,r,a,i){var o,u,l,p,d,f,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o="number"===typeof i?i:"latest",u=a.pools.length,l=r.length,p=[],d=function(t){p.push.apply(p,Object(c.a)(r.map((function(e){return[a.pools[t].address,"balanceOf",[e]]}))))},f=0;f<u;f++)d(f);return t.next=8,dt(e,n,Z,p,{blockTag:o});case 8:return b=t.sent,t.abrupt("return",Object.fromEntries(r.map((function(t,e){for(var n=0,r=0;r<u;r++)n+=parseFloat(Object(h.a)(b[e+r*l].toString(),18));return[t,n]}))));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var at=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOfBonded",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function st(){return(st=Object(i.a)(s.a.mark((function t(e,n,r,a,i,o){var u,l,p,d,f,b,m,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="number"===typeof o?o:"latest",l=a.map((function(t){return[i.dao,"balanceOfBonded",[t]]})),p=a.map((function(t){return[i.rewards,"balanceOfBonded",[t]]})),t.next=5,dt(n,r,at,[[i.token,"balanceOf",[i.uniswap]],[i.uniswap,"totalSupply"]].concat(Object(c.a)(l),Object(c.a)(p)),{blockTag:u});case 5:return d=t.sent,f=d[0],b=d[1],m=d.slice(2,a.length+2),j=d.slice(a.length+2,2*a.length+2),t.abrupt("return",Object.fromEntries(Array(a.length).fill("x").map((function(t,e){return[a[e],parseFloat(Object(h.a)(f[0].div(b[0]).mul(j[e][0]).add(m[e][0]).toString(),i.decimals))]}))));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ct=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function it(){return(it=Object(i.a)(s.a.mark((function t(e,n,r,a,c,i){var o,u,l,p,d,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"===typeof i?i:"latest",t.next=3,dt(n,r,ct,[[c.uniswapAddress,"totalSupply",[]],[c.tokenAddress,"balanceOf",[c.uniswapAddress]]].concat(a.map((function(t){return[c.stakingAddress,"balanceOf",[t]]}))),{blockTag:o});case 3:return u=t.sent,l=u[0],p=u[1],d=p/Math.pow(10,c.decimals)/(l/1e18),f=u.slice(2),t.abrupt("return",Object.fromEntries(f.map((function(t,e){return[a[e],t/Math.pow(10,c.decimals)*d]}))));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ot={balancer:function(t,e,n,r,a,s){return m.apply(this,arguments)},"contract-call":function(t,e,n,r,a,s){return y.apply(this,arguments)},"erc20-balance-of":O,"erc20-balance-of-fixed-total":function(t,e,n,r,a,s){return w.apply(this,arguments)},"erc20-balance-of-cv":function(t,e,n,r,a,s){return k.apply(this,arguments)},"erc20-balance-of-coeff":function(t,e,n,r,a,s){return g.apply(this,arguments)},"erc20-with-balance":function(t,e,n,r,a,s){return S.apply(this,arguments)},"erc20-balance-of-delegation":function(t,e,n,r,a,s){return E.apply(this,arguments)},"eth-balance":function(t,e,n,r,a,s){return C.apply(this,arguments)},"maker-ds-chief":function(t,e,n,r,a,s){return B.apply(this,arguments)},uni:function(t,e,n,r,a,s){return D.apply(this,arguments)},"yearn-vault":function(t,e,n,r,a,s){return z.apply(this,arguments)},moloch:function(t,e,n,r,a,s){return L.apply(this,arguments)},uniswap:function(t,e,n,r,a,s){return q.apply(this,arguments)},pancake:function(t,e,n,r,a,s){return W.apply(this,arguments)},synthetix:function(t,e,n,r,a,s){return Q.apply(this,arguments)},ctoken:function(t,e,n,r,a,s){return U.apply(this,arguments)},cream:function(t,e,n,r,a,s){return $.apply(this,arguments)},"staked-uniswap":function(t,e,n,r,a,s){return it.apply(this,arguments)},esd:function(t,e,n,r,a,s){return st.apply(this,arguments)}},ut=n(67),lt={1:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441",4:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821",5:"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e",6:"0x53c43764255c17bd724f74c4ef150724ac50a3ed",42:"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a",56:"0x1ee38d535d541c55c9dae27b12edf090c608e6fb",82:"0x579De77CAEd0614e3b158cb738fcD5131B9719Ae",97:"0x8b54247c6BAe96A6ccAFa468ebae96c4D7445e46",100:"0xb5b692a88bdfc81ca69dcb1d924f59f0413a602a",wanchain:"0xba5934ab3056fca1fa458d30fbb3810c3eb5145f"},pt={1:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot",4:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-rinkeby",42:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-kovan"};function dt(t,e,n,r,a){return ft.apply(this,arguments)}function ft(){return(ft=Object(i.a)(s.a.mark((function t(e,n,a,c,i){var u,l,p,f,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=new o.b(a),l=Object(ut.e)(lt[e],d.a,n),t.prev=2,t.prev=3,t.next=6,l.aggregate(c.map((function(t){return[t[0].toLowerCase(),u.encodeFunctionData(t[1],t[2])]})),i||{});case 6:return p=t.sent,f=Object(r.a)(p,2),b=f[1],t.abrupt("return",b.map((function(t,e){return u.decodeFunctionResult(c[e][1],t)})));case 12:return t.prev=12,t.t0=t.catch(3),t.abrupt("return",[]);case 15:t.next=20;break;case 17:return t.prev=17,t.t1=t.catch(2),t.abrupt("return",Promise.reject(t.t1));case 20:case"end":return t.stop()}}),t,null,[[2,17],[3,12]])})))).apply(this,arguments)}function bt(t,e){return mt.apply(this,arguments)}function mt(){return(mt=Object(i.a)(s.a.mark((function t(e,n){var r,a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:Object(p.jsonToGraphQLQuery)({query:n})})});case 2:return r=t.sent,t.next=5,r.json();case 5:return a=t.sent,c=a.data,t.abrupt("return",c||{});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t,e,n,r,a){return jt.apply(this,arguments)}function jt(){return(jt=Object(i.a)(s.a.mark((function t(e,n,r,a,c){var i,o=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>5&&void 0!==o[5]?o[5]:"latest",t.next=3,Promise.all(n.map((function(t){return ot[t.name](e,r,a,c,t.params,i)})));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(0.[00]a)";return l()(t).format(e)}function vt(t){var e=JSON.parse(JSON.stringify(t));return e.msg=function(t,e){if("string"!==typeof t)return e||{};try{return JSON.parse(t)}catch(n){return e||{}}}(e.msg,e.msg),"0.1.0"===e.msg.version&&(e.msg.payload.start=1595088e3,e.msg.payload.end=1595174400,e.msg.payload.snapshot=10484400,e.bpt_voting_disabled="1"),"0.1.0"!==e.msg.version&&"0.1.1"!==e.msg.version||(e.msg.payload.metadata={}),e}function Ot(t){return Object.fromEntries(Object.entries(t).map((function(t){return[t[0],vt(t[1])]})))}},4563:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n(4),s=n(1),c=n.n(s),i=n(30),o=n(40),u=n(0),l=n(2990),p=n(1245),d=n(2991),f=n(2964),b=n(50),m=n(279),h=n(148),j=n(3160),y=n(801),v=n(109),O=n(470),x=n(351),g=n(455),w=n(457),k=n(751),S=n(19),T=n(18),N=n(4546);function E(){var t=Object(S.a)(["\n\tborder-top: 1px solid ",";\n"]);return E=function(){return t},t}function C(){var t=Object(S.a)(["\n\theight: 1px;\n\topacity: 0;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tdisplay: none;\n"]);return C=function(){return t},t}function _(){var t=Object(S.a)(["\n\tmargin-bottom: 0;\n\n\ttd {\n\t\tborder: 0;\n\t\tborder-bottom: 1px solid ",";\n\t\tborder-radius: 0 !important;\n\t\tvertical-align: middle;\n\t\tbackground: transparent !important;\n\n\t\t&:first-child,\n\t\t&:last-child {\n\t\t\tborder-left: 0;\n\t\t\tborder-right: 0;\n\t\t}\n\n\t\t&:last-child {\n\t\t\twidth: 200px;\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\ttr:last-child td {\n\t\tborder-bottom: 0;\n\n\t\t&:first-child {\n\t\t\tborder-bottom-left-radius: 18px !important;\n\t\t}\n\t\t&:last-child {\n\t\t\tborder-bottom-right-radius: 18px !important;\n\t\t}\n\t}\n"]);return _=function(){return t},t}function M(){var t=Object(S.a)(["\n\tbackground-color: ",";\n\tborder-radius: 20px;\n"]);return M=function(){return t},t}function B(){var t=Object(S.a)(["\n\tbackground-color: ",";\n\theight: 5px;\n\tborder: none;\n\twidth: 100%;\n\tborder-radius: 20px;\n"]);return B=function(){return t},t}function P(){var t=Object(S.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tmargin: 0;\n\tcolor: ",";\n\n\t@media (min-width: 768px) {\n\t\tfont-weight: 500;\n\t}\n"]);return P=function(){return t},t}function A(){var t=Object(S.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&:not(:last-child) {\n\t\tmargin-bottom: 40px;\n\t}\n"]);return A=function(){return t},t}function D(){var t=Object(S.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: ",";\n\tcolor: ",";\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t}\n"]);return D=function(){return t},t}function F(){var t=Object(S.a)(["\n\tcolor: ",";\n\tfont-weight: 700;\n\tfont-size: 0.875rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n\n\t&:focus,\n\t&:active {\n\t\toutline: none;\n\t}\n"]);return F=function(){return t},t}function z(){var t=Object(S.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tpadding-left: 11px;\n\tcolor: ",";\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t}\n"]);return z=function(){return t},t}function I(){var t=Object(S.a)(["\n\tline-height: 1.5;\n\n\tp {\n\t\tfont-weight: 400;\n\t}\n\n\th1,\n\th2,\n\th3,\n\th4,\n\th5,\n\th6 {\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 600;\n\t\tmargin-top: 1.5rem;\n\n\t\t@media (min-width: 768px) {\n\t\t\tfont-size: 1.35rem;\n\t\t}\n\t}\n"]);return I=function(){return t},t}function L(){var t=Object(S.a)(["\n\tcolor: ",";\n\tfont-weight: 600;\n\tfont-size: 1rem;\n\tline-height: 1.5;\n\tmargin: 0;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1.25rem;\n\t}\n"]);return L=function(){return t},t}function V(){var t=Object(S.a)(["\n\tdisplay: flex;\n\talign-items: center;\n"]);return V=function(){return t},t}function q(){var t=Object(S.a)(["\n\t.card-body {\n\t\tpadding: 0 0 0.5rem 0;\n\t}\n"]);return q=function(){return t},t}var Y=Object(T.default)(g.c)(q()),J=T.default.div(V()),H=T.default.h4(L(),(function(t){return t.theme.text1})),W=T.default.div(I()),K=T.default.span(z(),(function(t){return t.theme.text1})),G=T.default.a(F(),(function(t){return t.theme.primary})),Q=T.default.span(D(),(function(t){return t.fontWeight||700}),(function(t){return t.theme.text1})),R=T.default.div(A()),U=T.default.span(P(),(function(t){return t.theme.text1})),X=T.default.div(B(),(function(t){return t.theme.primaryLight})),Z=T.default.div(M(),(function(t){return t.theme.primary})),$=Object(T.default)(N.a)(_(),(function(t){return t.theme.borderColor})),tt=T.default.thead(C()),et=T.default.div(E(),(function(t){return t.theme.borderColor}));function nt(t){var e,n,a,s=t.proposal,c=t.selected,i=t.onSelectOption,o=t.onVote,u=Object(f.a)().t,l=Object(h.d)().account;return Object(r.jsx)(g.c,{header:Object(r.jsx)("div",{className:"d-flex flex-column justify-content-around",children:Object(r.jsx)(J,{children:Object(r.jsx)(H,{children:u("governance.castVote")})})}),children:Object(r.jsxs)("div",{className:"d-flex flex-column",children:[null===(e=s.msg)||void 0===e||null===(n=e.payload)||void 0===n||null===(a=n.choices)||void 0===a?void 0:a.map((function(t,e){return Object(r.jsx)("button",{className:"btn ".concat(e===c-1?"btn-secondary-light":"btn-light-secondary-light"," mb-2 btn-block py-3"),onClick:function(){return i(e+1)},children:t},e)})),Object(r.jsx)(d.a,{className:"py-3 mt-3 align-self-center",disabled:!c,style:{width:200},onClick:o,children:u(l?"governance.vote":"wallet.connect")})]})})}var rt=n(4120),at=n(3187),st=n.n(at),ct=new rt.a;function it(t){var e,n,a=t.proposal,s=t.status,c=Object(u.useMemo)((function(){var t,e;return st.a.sanitize(null===a||void 0===a||null===(t=a.msg)||void 0===t||null===(e=t.payload)||void 0===e?void 0:e.body)}),[null===a||void 0===a||null===(e=a.msg)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.body]);return Object(r.jsx)(g.c,{header:Object(r.jsx)("div",{className:"d-flex flex-column justify-content-around",children:Object(r.jsxs)(J,{children:[Object(r.jsx)(H,{children:a.msg.payload.name}),s&&Object(r.jsx)("span",{className:"label ".concat(s.className," label-lg font-weight-medium d-flex label-inline py-3 ml-3"),children:s.title})]})}),children:Object(r.jsx)(W,{dangerouslySetInnerHTML:{__html:ct.render(c)}})})}var ot=n(950);function ut(){var t=Object(S.a)(["\n\tcolor: ",";\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n"]);return ut=function(){return t},t}function lt(){var t=Object(S.a)(["\n\tcolor: ",";\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n"]);return lt=function(){return t},t}function pt(){var t=Object(S.a)(["\n\tpadding: 10px 0;\n\tposition: relative;\n\ttransition: 0.3s ease all;\n\tmargin-bottom: 0.625rem;\n\n\ttd {\n\t\theight: 40px;\n\t\t&:last-child {\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\t@media (min-width: 768px) {\n\t\tbackground-color: ",";\n\n\t\ttd {\n\t\t\tborder-top: 1px solid ",";\n\t\t\tborder-bottom: 1px solid ",";\n\t\t\theight: 50px;\n\n\t\t\t&:first-child {\n\t\t\t\tborder-left: 1px solid ",";\n\t\t\t\tborder-top-left-radius: 18px;\n\t\t\t\tborder-bottom-left-radius: 18px;\n\t\t\t\tpadding-left: 30px;\n\t\t\t}\n\n\t\t\t&:last-child {\n\t\t\t\tborder-right: 1px solid ",";\n\t\t\t\tborder-top-right-radius: 18px;\n\t\t\t\tpadding-right: 30px;\n\t\t\t\tborder-bottom-right-radius: 18px;\n\t\t\t\tmax-width: 80px;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t}\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tborder-color: ",";\n\t\t}\n\t}\n"]);return pt=function(){return t},t}function dt(){var t=Object(S.a)(["\n\twidth: 24px;\n\theight: 24px;\n\tmargin-right: 10px;\n\n\t@media (min-width: 768px) {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tmargin-right: 15px;\n\t}\n"]);return dt=function(){return t},t}var ft=Object(T.default)(ot.a)(dt()),bt=T.default.tr(pt(),(function(t){return t.theme.modalBG}),(function(t){return t.theme.text3}),(function(t){return t.theme.text3}),(function(t){return t.theme.text3}),(function(t){return t.theme.text3}),(function(t){return t.theme.bg1}),(function(t){return t.theme.text3})),mt=T.default.span(lt(),(function(t){return t.theme.text1})),ht=T.default.span(ut(),(function(t){return t.theme.text1})),jt=function(t){return Object(r.jsxs)(bt,{children:[Object(r.jsx)("td",{children:Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("div",{className:"d-none d-lg-block",children:Object(r.jsx)(ft,{address:t.address})}),Object(r.jsxs)(ht,{children:[t.address.slice(0,6),"...",t.address.slice(-4)]})]})}),Object(r.jsx)("td",{children:Object(r.jsx)(mt,{className:"d-none d-lg-flex",children:t.vote})}),Object(r.jsx)("td",{children:Object(r.jsxs)(mt,{children:[Object(j.c)(t.score)," ",t.symbol]})})]})};function yt(t){var e=t.votes,n=t.result,a=t.proposal,s=t.space,c=Object(f.a)().t,i=Object(u.useState)(!1),l=Object(o.a)(i,2),p=l[0],b=l[1];return Object(r.jsxs)(Y,{header:Object(r.jsx)("div",{className:"d-flex flex-column justify-content-around",children:Object(r.jsxs)(J,{children:[Object(r.jsx)(H,{children:c("governance.votes")}),e&&Object(r.jsx)("span",{className:"label label-light-primary label-lg font-weight-medium d-flex label-inline py-3 ml-3",children:Object.keys(e).length})]})}),children:[Object(r.jsxs)($,{children:[Object(r.jsx)(tt,{style:{maxHeight:1,opacity:0,visibility:"hidden"},children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"User"}),Object(r.jsx)("td",{children:"Vote"}),Object(r.jsx)("td",{children:"Power"})]})}),Object(r.jsx)("tbody",{children:n?p||n.hasOwnProperty("votes")&&Object.keys(n.votes||{}).length<10?Object.values(n.votes).map((function(t,e){var n,c;return Object(r.jsx)(jt,{address:null===t||void 0===t?void 0:t.address,vote:null===a||void 0===a||null===(n=a.msg)||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.choices[t.msg.payload.choice-1],score:null===t||void 0===t?void 0:t.balance,symbol:null===s||void 0===s?void 0:s.symbol},e)})):n.hasOwnProperty("votes")&&Object.values(n.votes).slice(0,10).map((function(t,e){var n,c;return Object(r.jsx)(jt,{address:null===t||void 0===t?void 0:t.address,vote:null===a||void 0===a||null===(n=a.msg)||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.choices[t.msg.payload.choice-1],score:null===t||void 0===t?void 0:t.balance,symbol:null===s||void 0===s?void 0:s.symbol},e)})):null})]}),e?Object(r.jsx)(r.Fragment,{children:!p&&Object.keys(e||{}).length>10?Object(r.jsx)(et,{className:"py-4 text-center",children:Object(r.jsx)(d.a,{variant:"primary",onClick:function(){return b(!0)},children:c("showMore")})}):null}):Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center py-5 w-100 my-4",children:Object(r.jsx)(w.a,{color:"primary",width:40,height:40,active:!0,id:"votes-loading"})})]})}var vt=n(3033),Ot=n.n(vt);function xt(){var t=Object(S.a)(["\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tmargin: 0;\n\tcolor: ",";\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t}\n"]);return xt=function(){return t},t}function gt(){var t=Object(S.a)(["\n\tposition: relative;\n\ttransition: 0.3s ease all;\n\twidth: 100%;\n\n\t&:not(:last-child) {\n\t\tmargin-bottom: 1.875rem;\n\t}\n"]);return gt=function(){return t},t}var wt=T.default.div(gt()),kt=T.default.span(xt(),(function(t){return t.theme.text1})),St=function(t){return Object(r.jsxs)(wt,{className:"d-flex align-items-center justify-content-between",children:[Object(r.jsx)(kt,{children:t.title}),Object(r.jsx)("div",{children:t.children})]})},Tt=n(769);function Nt(){var t=Object(S.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tborder-radius: ","px;\n\tbox-shadow: 0 6px 10px rgba(0, 0, 0, 0.075);\n\tdisplay: none;\n\n\t@media (min-width: 768px) {\n\t\tdisplay: initial;\n\t}\n"]);return Nt=function(){return t},t}var Et=T.default.img(Nt(),(function(t){return t.size}),(function(t){return t.size}),(function(t){return t.size})),Ct=function(t){var e=Object(Tt.c)(t.id,t.symbolIndex);return Object(r.jsx)(Et,{src:e,size:t.size})};function _t(t){var e=t.proposal,n=t.space,a=t.id,s=Object(f.a)().t;return Object(r.jsx)(g.c,{header:Object(r.jsx)("div",{className:"d-flex flex-column justify-content-around",children:Object(r.jsx)(J,{children:Object(r.jsx)(H,{children:s("information")})})}),children:Object(r.jsxs)("div",{className:"d-flex flex-column justify-content-start",children:[Object(r.jsx)(St,{title:s("importList.tokens"),children:Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:n.strategies.map((function(t,e){return Object(r.jsxs)("div",{className:"d-flex align-items-center",style:{marginLeft:0!==e?"21px":"0px"},children:[Object(r.jsx)(Ct,{id:a,symbolIndex:e,size:30}),Object(r.jsx)(K,{children:t.params.symbol})]},"space-strategy-".concat(e))}))})}),Object(r.jsx)(St,{title:s("author"),children:Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)(ft,{address:e.address}),Object(r.jsxs)(G,{href:"https://etherscan.io/address/".concat(e.address),target:"_blank",rel:"noopener noreferrer",children:[e.address.slice(0,6),"...",e.address.slice(-4)]})]})}),Object(r.jsx)(St,{title:"IPFS",children:Object(r.jsxs)(G,{href:"https://ipfs.io/ipfs/".concat(e.authorIpfsHash),target:"_blank",rel:"noopener noreferrer",children:["#",e.authorIpfsHash.slice(0,7)]})}),Object(r.jsx)(St,{title:s("startDate"),children:Object(r.jsx)(Q,{fontWeight:400,children:e&&Ot()(1e3*e.msg.payload.start).format("YYYY/MM/DD hh:mm")})}),Object(r.jsx)(St,{title:s("endDate"),children:Object(r.jsx)(Q,{fontWeight:400,children:e&&Ot()(1e3*e.msg.payload.end).format("YYYY/MM/DD hh:mm")})}),Object(r.jsx)(St,{title:s("token"),children:Object(r.jsx)(Q,{children:e.address.slice(0,6)})}),Object(r.jsx)(St,{title:"Snapshot",children:Object(r.jsx)(G,{href:"https://etherscan.io/block/".concat(e.msg.payload.snapshot),target:"_blank",rel:"noopener noreferrer",children:e.msg.payload.snapshot})})]})})}function Mt(t){var e=t.result,n=t.choices,a=t.symbol,s=Object(f.a)().t;return Object(r.jsx)(g.c,{header:Object(r.jsx)("div",{className:"d-flex flex-column justify-content-around",children:Object(r.jsx)(J,{children:Object(r.jsx)(H,{children:s("results")})})}),children:Object(r.jsx)("div",{className:"d-flex flex-column",children:n.map((function(t,n){var s,c,i=e.totalVotesBalances?100/e.totalVotesBalances*(null===(s=e.totalBalances)||void 0===s?void 0:s[n]):0;return Object(r.jsxs)(R,{children:[Object(r.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[Object(r.jsx)(U,{children:Object(Tt.b)(t,"choice")}),Object(r.jsxs)(U,{children:[Object(j.c)(null===(c=e.totalBalances)||void 0===c?void 0:c[n]),Object(Tt.b)(a,"symbol")]}),Object(r.jsx)(U,{children:e.totalVotesBalances?"".concat(i.toFixed(2),"%"):0})]}),Object(r.jsx)(X,{className:"progress progress-xs w-100",children:Object(r.jsx)(Z,{role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100",style:{width:"".concat(i,"%")}})})]},"results-row-".concat(n))}))})})}e.default=function(t){var e,n,s=Object(h.d)(),S=s.account,T=s.library,N=Object(u.useState)(!1),E=Object(o.a)(N,2),C=E[0],_=E[1],M=Object(u.useState)(null),B=Object(o.a)(M,2),P=B[0],A=B[1],D=Object(u.useState)(!1),F=Object(o.a)(D,2),z=F[0],I=F[1],L=Object(u.useState)({}),V=Object(o.a)(L,2),q=V[0],Y=V[1],J=Object(u.useState)({}),H=Object(o.a)(J,2),W=H[0],K=H[1],G=Object(u.useState)({}),Q=Object(o.a)(G,2),R=Q[0],U=Q[1],X=Object(b.d)(),Z=Object(v.h)(),$=Object(b.e)((function(t){return t.governance})),tt=$.spaces,et=$.loading,rt=$.proposals,at=Object(f.a)().t,st=new y.a,ct=t.match.params.space,ot=t.match.params.id,ut=tt[ct];Object(u.useEffect)((function(){0===Object.keys(tt).length?X(Object(O.b)()):tt.hasOwnProperty(ct)?(X(Object(O.a)(ct)),st.get("votes",{id:ct,address:ot}).then((function(t){Y(t)})).catch((function(t){m.c.error("Cannot get votes, Please try again in a minute")}))):t.history.push("/governance")}),[tt,ct,ot,X,t.history]);var lt=function(){var t=Object(i.a)(c.a.mark((function t(e,n){var r,a,s,i,o,u,l,p,d,f,b,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},!(Object.keys(e).length>0)){t.next=9;break}return b=n.hasOwnProperty(ct)&&n[ct].hasOwnProperty(ot)?Object(j.d)(Object.assign({},n[ct][ot])):Object(j.d)({}),t.next=5,Object(j.f)(ct,ut.strategies,ut.network,T,Object.keys(e));case 5:m=t.sent,r.votes=Object.fromEntries(Object.entries(e).map((function(t){var e=[t[0],Object.assign({},t[1])];return e[1].scores=ut.strategies.map((function(t,n){return m[n][e[1].address]||0})),e[1].balance=e[1].scores.reduce((function(t,e){return t+e}),0),e})).sort((function(t,e){return e[1].balance-t[1].balance}))),r.results={totalVotes:null===(a=b.msg)||void 0===a||null===(s=a.payload)||void 0===s||null===(i=s.choices)||void 0===i?void 0:i.map((function(t,e){return Object.values(r.votes).filter((function(t){return t.msg.payload.choice===e+1})).length})),totalBalances:null===(o=b.msg)||void 0===o||null===(u=o.payload)||void 0===u||null===(l=u.choices)||void 0===l?void 0:l.map((function(t,e){return Object.values(r.votes).filter((function(t){return t.msg.payload.choice===e+1})).reduce((function(t,e){return t+e.balance}),0)})),totalScores:null===(p=b.msg)||void 0===p||null===(d=p.payload)||void 0===d||null===(f=d.choices)||void 0===f?void 0:f.map((function(t,e){return ut.strategies.map((function(t,n){return Object.values(r.votes).filter((function(t){return t.msg.payload.choice===e+1})).reduce((function(t,e){return t+e.scores[n]}),0)}))})),totalVotesBalances:Object.values(r.votes).reduce((function(t,e){return t+e.balance}),0)},K(r);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(u.useEffect)((function(){lt(q,rt)}),[rt,q]),Object(u.useEffect)((function(){if(rt.hasOwnProperty(ct))if(rt[ct].hasOwnProperty(ot)){_(rt[ct][ot]);var e=(Date.now()/1e3).toFixed(),n=rt[ct][ot].msg.payload,r=n.start,a=n.end;U(e>a?{title:"Closed",className:"label-light-danger"}:e>r?{title:"Active",className:"label-light-success"}:{title:"Pending",className:"label-light-info"})}else t.history.push("/governance/".concat(ct));else _(!1)}),[rt,ct,ot,t.history]);var pt=Object(u.useCallback)(Object(i.a)(c.a.mark((function t(){var e,n,r,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=3;break}return Z(),t.abrupt("return",!1);case 3:return e={token:tt[ct].token,type:"vote",space:ct,payload:{proposal:ot,choice:P,metadata:{}}},n={address:S,msg:JSON.stringify(Object(a.a)({version:"0.1.3",timestamp:(Date.now()/1e3).toFixed()},e))},t.prev=5,Object(m.c)("Sending ...",{icon:"\ud83d\udca1"}),r=T.getSigner(S),t.next=10,r.signMessage(n.msg);case 10:return n.sig=t.sent,t.next=13,st.sendMessage(n);case 13:s=t.sent,m.c.success("Your Vote is in!"),s.hasOwnProperty("ipfsHash")&&st.get("votes",{id:ct,address:ot}).then((function(t){Y(t)})).catch((function(t){m.c.error("Cannot get votes, Please try again in a minute")})),I(!1),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),m.c.error("Something went wrong!");case 22:case"end":return t.stop()}}),t,null,[[5,19]])}))),[C,P,S,ot,st,ct,T,tt]);return Object(r.jsxs)(k.a,{title:at("governance.title"),networkSensitive:!0,children:[et&&!C?Object(r.jsx)(g.c,{children:Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center py-5 w-100",children:Object(r.jsx)(w.a,{color:"primary",width:40,height:40,active:!0,id:"vote-loading"})})}):C&&Object(r.jsxs)(l.a,{className:"custom-row",children:[Object(r.jsx)(p.a,{className:"order-2 order-md-1",xs:12,md:8,children:Object(r.jsxs)(l.a,{children:[Object(r.jsx)(p.a,{xs:12,className:"gutter-b",children:Object(r.jsx)(it,{proposal:C,status:R})}),"Active"===R.title&&Object(r.jsx)(p.a,{xs:12,className:"gutter-b",children:C&&Object(r.jsx)(nt,{proposal:C,selected:P,onSelectOption:A,onVote:function(){S?I(!0):Z()}})}),Object(r.jsx)(p.a,{xs:12,className:"gutter-b",children:q&&W&&C&&Object(r.jsx)(yt,{votes:q,result:W,proposal:C,space:ut})})]})}),Object(r.jsxs)(p.a,{className:"order-1 order-md-2",xs:12,md:4,children:[C&&Object(r.jsx)(_t,{proposal:C,space:tt[ct],id:ct}),(null===W||void 0===W?void 0:W.results)&&Object(r.jsx)(Mt,{result:W.results,choices:null===C||void 0===C||null===(e=C.msg)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.choices,symbol:null===ut||void 0===ut?void 0:ut.symbol})]})]}),C&&Object(r.jsxs)(x.a,{show:z,centered:!0,onHide:function(){return I(!1)},children:[Object(r.jsx)(x.a.Header,{closeButton:!0,children:Object(r.jsx)(x.a.Title,{children:"Confirm Vote"})}),Object(r.jsxs)(x.a.Body,{children:[Object(r.jsxs)("p",{children:[at("governance.voteConfirmation"),' "',C.msg.payload.choices[P-1],'"? ',Object(r.jsx)("br",{}),at("governance.voteWarning")]}),Object(r.jsxs)("div",{className:"pt-4 d-flex align-items-center justify-content-end",children:[Object(r.jsx)(d.a,{variant:"outline-danger",onClick:function(){return I(!1)},children:at("close")}),Object(r.jsx)(d.a,{variant:"primary",onClick:pt,className:"ml-3",children:at("governance.vote")})]})]})]})]})}}}]);
//# sourceMappingURL=44.e3845929.chunk.js.map