(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[44],{4134:function(e,t,n){},4565:function(e,t,n){"use strict";n.r(t);var a=n(63),c=n(2),r=n(1),o=n.n(r),s=n(30),i=n(31),l=n(4),d=n(40),u=n(22),h=n(0),b=n(1266),j=n(3003),f=n(1248),m=n(4132),g=n.n(m),p=n(50),x=n(21),O=n(3049),v=n.n(O),y=(n(4133),n(751)),w=n(470),R=n(46),k=n(802),N=n(456),C=(n(4134),n(457)),P=n(259),S=n(110),z=n(2977);function D(){var e=Object(u.a)(["\n\tborder-radius: 18px;\n\tbackground-color: ",";\n\tmin-height: 56px;\n\tpadding: 18px 20px;\n\tcolor: ",";\n\tresize: none;\n\tborder: none;\n\tfont-weight: 400;\n\tfont-size: 0.875rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n\n\t::placeholder {\n\t\tcolor: ",";\n\t}\n\n\t&:focus,\n\t&:active {\n\t\toutline: none;\n\t\tbackground-color: ",";\n\t}\n"]);return D=function(){return e},e}function B(){var e=Object(u.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tmargin-bottom: 15px;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n"]);return B=function(){return e},e}function I(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 30px;\n"]);return I=function(){return e},e}function M(){var e=Object(u.a)([""]);return M=function(){return e},e}function W(){var e=Object(u.a)(["\n\tfont-size: 1.25rem;\n\tfont-weight: 700;\n\tcolor: ",";\n\tmargin: 0;\n"]);return W=function(){return e},e}function X(){var e=Object(u.a)(["\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 40px;\n\tmargin-top: 10px;\n\tborder: none;\n\tbackground-color: transparent;\n"]);return X=function(){return e},e}function A(){var e=Object(u.a)(["\n\tborder: none;\n\tmargin-top: -70px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-top: -30px;\n\t}\n"]);return A=function(){return e},e}var H=Object(x.default)(y.a)(A()),J=x.default.div(X()),L=x.default.h2(W(),(function(e){return e.theme.text1})),Y=Object(x.default)(b.a.Row)(M()),E=Object(x.default)(b.a.Group)(I()),F=Object(x.default)(b.a.Label)(B()),_=Object(x.default)(b.a.Control)(D(),(function(e){return e.theme.bg2}),(function(e){return e.theme.text1}),(function(e){return e.theme.text4}),(function(e){return e.theme.bg2}));t.default=function(e){var t=Object(R.a)(),n=t.account,r=t.library,u=new k.a,m=Object(S.h)(),x=Object(p.d)(),O=Object(p.e)((function(e){return e.governance})).spaces,y=Object(z.a)().t,D=Object(h.useState)(!1),B=Object(d.a)(D,2),I=B[0],M=B[1],W=Object(h.useState)({name:"",body:"",choices:["",""],snapshot:[],dateRange:{from:null,to:null},metadata:{}}),X=Object(d.a)(W,2),A=X[0],q=X[1],G=e.match.params.space,Q=function(e,t){q((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(i.a)({},e,t))}))},T=function(){var e={start:v()("".concat(A.dateRange.from.year,"-").concat(A.dateRange.from.month,"-").concat(A.dateRange.from.day)).format("X"),end:v()("".concat(A.dateRange.to.year,"-").concat(A.dateRange.to.month,"-").concat(A.dateRange.to.day)).format("X")};return!I&&n&&A.name&&A.body&&e.start&&e.end&&e.end>e.start&&A.snapshot&&A.choices.length>=2&&!A.choices.some((function(e){return""===e}))},K=function(){var t=Object(s.a)(o.a.mark((function t(a){var c,s,i,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n){t.next=4;break}return m(),t.abrupt("return",!1);case 4:if(!T()){t.next=28;break}return M(!0),c={name:A.name,body:A.body,snapshot:A.snapshot,choices:A.choices,start:v()("".concat(A.dateRange.from.year,"-").concat(A.dateRange.from.month,"-").concat(A.dateRange.from.day)).format("X"),end:v()("".concat(A.dateRange.to.year,"-").concat(A.dateRange.to.month,"-").concat(A.dateRange.to.day)).format("X"),metadata:Object(l.a)(Object(l.a)({},A.metadata),{},{strategies:O[G].strategies})},s={token:O[G].token,type:"proposal",space:G,payload:c},i={address:n,msg:JSON.stringify(Object(l.a)({version:"0.1.3",timestamp:(Date.now()/1e3).toFixed()},s))},t.prev=9,Object(P.c)("Sending ...",{icon:"\ud83d\udca1"}),t.next=13,r.getSigner(n).signMessage(i.msg);case 13:return i.sig=t.sent,t.next=16,u.sendMessage(i);case 16:d=t.sent,M(!1),P.c.success("Your Proposal is in!"),d.hasOwnProperty("ipfsHash")&&e.history.push("/tools/governance/".concat(G)),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(9),P.c.error("Something went wrong!"),M(!1);case 26:t.next=29;break;case 28:P.c.error("Please fill all Fields and your proposal choices should be more than 1");case 29:case"end":return t.stop()}}),t,null,[[9,22]])})));return function(e){return t.apply(this,arguments)}}();Object(h.useEffect)((function(){0===Object.keys(O).length?x(Object(w.b)()):O.hasOwnProperty(G)||e.history.push("/tools/governance")}),[O,G,x,e.history]),Object(h.useEffect)((function(){Q("snapshot",r.blockNumber)}),[r.blockNumber]);return Object(c.jsx)(N.a,{title:y("governance.title"),hasBg:!0,children:Object(c.jsx)(j.a,{children:Object(c.jsx)(f.a,{xs:12,children:Object(c.jsxs)(H,{marginBottom:0,children:[Object(c.jsx)(J,{children:Object(c.jsx)(L,{className:"card-title",children:y("governance.createProposal")})}),Object(c.jsx)("div",{children:Object(c.jsx)(b.a,{children:Object(c.jsxs)(Y,{className:"custom-row",children:[Object(c.jsxs)(E,{as:f.a,xs:12,children:[Object(c.jsx)(F,{children:y("governance.question")}),Object(c.jsx)(_,{as:"textarea",rows:"5",placeholder:"Question",value:A.name,onChange:function(e){return Q("name",e.target.value)}})]}),Object(c.jsxs)(E,{as:f.a,xs:12,children:[Object(c.jsx)(F,{children:y("governance.whatIsYourProposal")}),Object(c.jsx)(_,{as:"textarea",rows:"5",placeholder:y("governance.whatIsYourProposal"),value:A.body,onChange:function(e){return Q("body",e.target.value)}})]}),Object(c.jsx)(f.a,{xs:12,children:Object(c.jsxs)(j.a,{children:[Object(c.jsxs)(E,{as:f.a,xs:12,md:12,lg:4,children:[Object(c.jsx)(F,{children:"Snapshot"}),Object(c.jsx)(_,{placeholder:"Snapshot",value:A.snapshot,onChange:function(e){return Q("snapshot",e.target.value)}})]}),Object(c.jsx)(f.a,{xs:12,md:6,lg:8,children:Object(c.jsxs)(j.a,{children:[Object(c.jsxs)(E,{as:f.a,xs:12,md:6,children:[Object(c.jsx)(F,{children:y("startDate")}),Object(c.jsx)(g.a,{wrapperClassName:"d-flex",value:A.dateRange,onChange:function(e){return Q("dateRange",e)},colorPrimary:"#0891B2",colorPrimaryLight:"rgba(6, 115, 141, 0.2)",renderInput:function(e){var t=e.ref;return Object(c.jsx)(_,{ref:t,placeholder:"Select a Date",value:A.dateRange.from?"".concat(A.dateRange.from.year,"/").concat(A.dateRange.from.month,"/").concat(A.dateRange.from.day):""})},shouldHighlightWeekends:!0})]}),Object(c.jsxs)(E,{as:f.a,xs:12,md:6,children:[Object(c.jsx)(F,{children:y("endDate")}),Object(c.jsx)(g.a,{wrapperClassName:"d-flex",value:A.dateRange,onChange:function(e){return Q("dateRange",e)},colorPrimary:"#0891B2",colorPrimaryLight:"rgba(6, 115, 141, 0.2)",renderInput:function(e){var t=e.ref;return Object(c.jsx)(_,{ref:t,placeholder:"Select a Date",value:A.dateRange.to?"".concat(A.dateRange.to.year,"/").concat(A.dateRange.to.month,"/").concat(A.dateRange.to.day):""})},shouldHighlightWeekends:!0})]})]})})]})}),Object(c.jsxs)(E,{as:f.a,xs:12,className:"d-flex flex-column",children:[Object(c.jsx)(F,{children:y("choices")}),A.choices.map((function(e,t){return Object(c.jsx)(_,{value:A.choices[t],onChange:function(e){var n=Object(a.a)(A.choices);n[t]=e.target.value,Q("choices",n)},placeholder:"".concat(y("choice")," ").concat(t+1),className:"mb-3"},"choice-".concat(t+1))})),Object(c.jsxs)("button",{className:"btn btn-link align-self-center align-self-md-end p-0 d-flex align-items-center justify-content-center",onClick:function(e){e.preventDefault();var t=A.choices.concat("");Q("choices",t)},children:[Object(c.jsxs)("svg",{width:"15px",height:"15px",viewBox:"0 0 16 16",className:"bi bi-plus-circle",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(c.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]}),Object(c.jsx)("span",{className:"pl-2",children:y("addChoice")})]})]}),Object(c.jsx)(E,{as:f.a,className:"d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-center mb-0",children:Object(c.jsx)("button",{className:"btn btn-primary py-3",onClick:K,style:{minWidth:250,marginBottom:60,marginTop:30},children:n?I?Object(c.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:Object(c.jsx)(C.a,{width:18,height:18,active:!0,color:"#fff",id:"create-proposal"})}):y("publish"):"Connect Wallet"})})]})})})]})})})})}}}]);
//# sourceMappingURL=44.35bd3573.chunk.js.map